(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}).call(this),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude=""></div>'),a.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)"><span ng-if="item.icon" class="{{item.icon}}"></span>{{item.title}}</button></div>'),a.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" class="schema-form-array {{form.htmlClass}}" ng-model="$$value$$" ng-model-options="form.ngModelOptions"><h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3><ol class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}"><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" schema-vaidate="form" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden="true"></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class="sr-only">{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-show="form.title">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><div ng-transclude=""></div></fieldset>'),a.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-show="form.title">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></fieldset>'),a.put("directives/decorators/bootstrap/help.html",'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>'),a.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="form-group schema-form-radiobuttons {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><div><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" style="display: none;" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/section.html",'<div class="schema-form-section {{form.htmlClass}}"><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),a.put("directives/decorators/bootstrap/select.html",'<div class="form-group {{form.htmlClass}} schema-form-select" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name group by item.group for item in form.titleMap" name="{{form.key.slice(-1)[0]}}"></select><div class="help-block" sf-message="form.description"></div></div>'),a.put("directives/decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><input type="submit" class="btn {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'"><span ng-if="form.icon" class="{{form.icon}}"></span> {{form.title}}</button></div>'),a.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),a.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane" ng-disabled="form.readonly" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),a.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <textarea ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <textarea class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span class="help-block" sf-message="form.description"></span></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(a){var b="directives/decorators/bootstrap/";a.createDecorator("bootstrapDecorator",{textarea:b+"textarea.html",fieldset:b+"fieldset.html",array:b+"array.html",tabarray:b+"tabarray.html",tabs:b+"tabs.html",section:b+"section.html",conditional:b+"section.html",actions:b+"actions.html",select:b+"select.html",checkbox:b+"checkbox.html",checkboxes:b+"checkboxes.html",number:b+"default.html",password:b+"default.html",submit:b+"submit.html",button:b+"submit.html",radios:b+"radios.html","radios-inline":b+"radios-inline.html",radiobuttons:b+"radio-buttons.html",help:b+"help.html","default":b+"default.html"},[]),a.createDirectives({textarea:b+"textarea.html",select:b+"select.html",checkbox:b+"checkbox.html",checkboxes:b+"checkboxes.html",number:b+"default.html",submit:b+"submit.html",button:b+"submit.html",text:b+"default.html",date:b+"default.html",password:b+"default.html",datepicker:b+"datepicker.html",input:b+"default.html",radios:b+"radios.html","radios-inline":b+"radios-inline.html",radiobuttons:b+"radio-buttons.html"})}]).directive("sfFieldset",function(){
return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(a,b,c){a.title=a.$eval(c.title)}}}),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,m){function n(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",B.component.nodes(w.open),y.box),y.wrap),y.frame),y.holder,'tabindex="-1"')}function o(){z.data(g,B).addClass(y.input).val(z.data("value")?B.get("select",x.format):f.value),x.editable||z.on("focus."+w.id+" click."+w.id,function(a){a.preventDefault(),B.open()}).on("keydown."+w.id,u),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function p(){e(B.$root[0],"hidden",!0)}function q(){B.$holder.on({keydown:u,"focus.toOpen":t,blur:function(){z.removeClass(y.target)},focusin:function(a){B.$root.removeClass(y.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=B.$holder[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),B.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(y.navDisabled)||b.hasClass(y.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(B.$root[0],e))&&B.$holder[0].focus(),!d&&c.nav?B.set("highlight",B.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?(B.set("select",c.pick),x.closeOnSelect&&B.close(!0)):c.clear?(B.clear(),x.closeOnClear&&B.close(!0)):c.close&&B.close(!0)})}function r(){var b;x.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof x.hiddenPrefix?x.hiddenPrefix:"","string"==typeof x.hiddenSuffix?x.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),B._hidden=a('<input type=hidden name="'+b+'"'+(z.data("value")||f.value?' value="'+B.get("select",x.formatSubmit)+'"':"")+">")[0],z.on("change."+w.id,function(){B._hidden.value=f.value?B.get("select",x.formatSubmit):""})}function s(){v&&l?B.$holder.find("."+y.frame).one("transitionend",function(){B.$holder[0].focus()}):B.$holder[0].focus()}function t(a){a.stopPropagation(),z.addClass(y.target),B.$root.addClass(y.focused),B.open()}function u(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(B.close(!0),!1):void((32==b||c||!w.open&&B.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?B.clear().close():B.open()))}if(!f)return b;var v=!1,w={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},x=i?a.extend(!0,{},i.defaults,m):m||{},y=a.extend({},b.klasses(),x.klass),z=a(f),A=function(){return this.start()},B=A.prototype={constructor:A,$node:z,start:function(){return w&&w.start?B:(w.methods={},w.start=!0,w.open=!1,w.type=f.type,f.autofocus=f==h(),f.readOnly=!x.editable,f.id=f.id||w.id,"text"!=f.type&&(f.type="text"),B.component=new i(B,x),B.$root=a('<div class="'+y.picker+'" id="'+f.id+'_root" />'),p(),B.$holder=a(n()).appendTo(B.$root),q(),x.formatSubmit&&r(),o(),x.containerHidden?a(x.containerHidden).append(B._hidden):z.after(B._hidden),x.container?a(x.container).append(B.$root):z.after(B.$root),B.on({start:B.component.onStart,render:B.component.onRender,stop:B.component.onStop,open:B.component.onOpen,close:B.component.onClose,set:B.component.onSet}).on({start:x.onStart,render:x.onRender,stop:x.onStop,open:x.onOpen,close:x.onClose,set:x.onSet}),v=c(B.$holder[0]),f.autofocus&&B.open(),B.trigger("start").trigger("render"))},render:function(b){return b?(B.$holder=a(n()),q(),B.$root.html(B.$holder)):B.$root.find("."+y.box).html(B.component.nodes(w.open)),B.trigger("render")},stop:function(){return w.start?(B.close(),B._hidden&&B._hidden.parentNode.removeChild(B._hidden),B.$root.remove(),z.removeClass(y.input).removeData(g),setTimeout(function(){z.off("."+w.id)},0),f.type=w.type,f.readOnly=!1,B.trigger("stop"),w.methods={},w.start=!1,B):B},open:function(c){return w.open?B:(z.addClass(y.active),e(f,"expanded",!0),setTimeout(function(){B.$root.addClass(y.opened),e(B.$root[0],"hidden",!1)},0),c!==!1&&(w.open=!0,v&&k.css("overflow","hidden").css("padding-right","+="+d()),s(),j.on("click."+w.id+" focusin."+w.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&B.close(b===B.$holder[0])}).on("keydown."+w.id,function(c){var d=c.keyCode,e=B.component.key[d],f=c.target;27==d?B.close(!0):f!=B.$holder[0]||!e&&13!=d?a.contains(B.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(B.component.key.go,B,[b._.trigger(e)]):B.$root.find("."+y.highlighted).hasClass(y.disabled)||(B.set("select",B.component.item.highlight),x.closeOnSelect&&B.close(!0)))})),B.trigger("open"))},close:function(a){return a&&(x.editable?f.focus():(B.$holder.off("focus.toOpen").focus(),setTimeout(function(){B.$holder.on("focus.toOpen",t)},0))),z.removeClass(y.active),e(f,"expanded",!1),setTimeout(function(){B.$root.removeClass(y.opened+" "+y.focused),e(B.$root[0],"hidden",!0)},0),w.open?(w.open=!1,v&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+w.id),B.trigger("close")):B},clear:function(a){return B.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in B.component.item&&(void 0===f&&(f=null),B.component.set(e,f,d)),("select"==e||"clear"==e)&&z.val("clear"==e?"":B.get(e,x.format)).trigger("change");B.render()}return d.muted?B:B.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=w[a])return w[a];if("valueSubmit"==a){if(B._hidden)return B._hidden.value;a="value"}if("value"==a)return f.value;if(a in B.component.item){if("string"==typeof c){var d=B.component.get(a);return d?b._.trigger(B.component.formats.toString,B.component,[c,d]):""}return B.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),w.methods[e]=w.methods[e]||[],w.methods[e].push(f)}return B},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in w.methods&&delete w.methods[b];return B},trigger:function(a,c){var d=function(a){var d=w.methods[a];d&&d.map(function(a){b._.trigger(a,B,[c])})};return d("_"+a),d(a),B}};return new A}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement),l=null!=document.documentElement.style.transition;return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h,defaultValue:!0}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav&&!d.defaultValue)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/[^\x00-\x7F]+|\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to):!1},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysShort).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(){var d=c.showMonthsShort?c.monthsShort:c.monthsFull;return c.selectMonths?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[d[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):f.node("div",d[k.month],c.klass.month)},r=function(){var d=k.year,e=c.selectYears===!0?5:~~(c.selectYears/2);if(e){var g=m.year,h=n.year,i=d-e,j=d+e;if(g>i&&(j+=g-i,i=g),j>h){var l=i-g,o=j-h;i-=l>o?o:l,j=h}return f.node("select",f.group({min:i,max:j,i:1,node:"option",item:function(a){return[a,0,"value="+a+(d==a?" selected":"")]}}),c.klass.selectYear,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return f.node("div",d,c.klass.year)};return f.node("div",(c.selectYears?r()+q():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:d&&b.$node.val()===o?!0:null,activedescendant:e?!0:null,disabled:g?!0:null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0}))+f.node("div",f.node("button",c.today,c.klass.buttonToday,"type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,c.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0].value,e=a.$node.data("value"),f=e||d,g=e?b.formatSubmit:b.format;c.settings=b,c.$node=a.$node,c.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.interval=b.interval||30,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),f?c.set("select",f,{format:g}):c.set("select",null).set("highlight",c.item.now),c.key={40:1,38:-1,39:1,37:-1,go:function(a){c.set("highlight",c.item.highlight.pick+a*c.item.interval,{interval:a*c.item.interval}),this.render()}},a.on("render",function(){var c=a.$root.children(),d=c.find("."+b.klass.viewset),e=function(a){return["webkit","moz","ms","o",""].map(function(b){return(b?"-"+b+"-":"")+a})},f=function(a,b){e("transform").map(function(c){a.css(c,b)}),e("transition").map(function(c){a.css(c,b)})};d.length&&(f(c,"none"),c[0].scrollTop=~~d.position().top-2*d[0].clientHeight,f(c,""))},1).on("open",function(){a.$root.find("button").attr("disabled",!1)},1).on("close",function(){a.$root.find("button").attr("disabled",!0)},1)}var d=24,e=60,f=12,g=d*e,h=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):"interval"==a?d.set("min",e.min,c).set("max",e.max,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",b,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",b,c),"min"==a&&d.set("max",e.max,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,f){var i=this;return c=void 0===c?a:c,h.isDate(c)&&(c=[c.getHours(),c.getMinutes()]),b.isPlainObject(c)&&h.isInteger(c.pick)?c=c.pick:b.isArray(c)?c=+c[0]*e+ +c[1]:h.isInteger(c)||(c=i.now(a,c,f)),"max"==a&&c<i.item.min.pick&&(c+=g),"min"!=a&&"max"!=a&&(c-i.item.min.pick)%i.item.interval!==0&&(c+=i.item.interval),c=i.normalize(a,c,f),{hour:~~(d+c/e)%d,mins:(e+c%e)%e,time:(g+c)%g,pick:c%g}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||h.isDate(a)?d.create(a):a};return h.isInteger(a)||(a=e(a)),h.isInteger(c)||(c=e(c)),h.isInteger(a)&&b.isPlainObject(c)?a=[c.hour,c.mins+a*d.settings.interval]:h.isInteger(c)&&b.isPlainObject(a)&&(c=[a.hour,a.mins+c*d.settings.interval]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b){var c,d=this.item.interval,f=new Date,g=f.getHours()*e+f.getMinutes(),i=h.isInteger(b);return g-=g%d,c=0>b&&-d>=d*b+g,g+="min"==a&&c?0:d,i&&(g+=d*(c&&"max"!=a?b+1:b)),g},c.prototype.normalize=function(a,b){var c=this.item.interval,d=this.item.min&&this.item.min.pick||0;return b-="min"==a?0:(b-d)%c},c.prototype.measure=function(a,c,f){var g=this;return c||(c="min"==a?[0,0]:[d-1,e-1]),"string"==typeof c?c=g.parse(a,c):c===!0||h.isInteger(c)?c=g.now(a,c,f):b.isPlainObject(c)&&h.isInteger(c.pick)&&(c=g.normalize(a,c.pick,f)),c},c.prototype.validate=function(a,b,c){var d=this,e=c&&c.interval?c.interval:d.item.interval;return d.disabled(b)&&(b=d.shift(b,e)),b=d.scope(b),d.disabled(b)&&(b=d.shift(b,-1*e)),b},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return h.isInteger(d)?a.hour==d:b.isArray(d)||h.isDate(d)?a.pick==c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[2]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.shift=function(a,b){var c=this,d=c.item.min.pick,e=c.item.max.pick;for(b=b||c.item.interval;c.disabled(a)&&(a=c.create(a.pick+=b),!(a.pick<=d||a.pick>=e)););return a},c.prototype.scope=function(a){var b=this.item.min.pick,c=this.item.max.pick;return this.create(a.pick>c?c:a.pick<b?b:a)},c.prototype.parse=function(a,b,c){var d,f,g,i,j,k=this,l={};if(!b||"string"!=typeof b)return b;c&&c.format||(c=c||{},c.format=k.settings.format),k.formats.toArray(c.format).map(function(a){var c,d=k.formats[a],e=d?h.trigger(d,k,[b,l]):a.replace(/^!/,"").length;d&&(c=b.substr(0,e),l[a]=c.match(/^\d+$/)?+c:c),b=b.substr(e)});for(i in l)j=l[i],h.isInteger(j)?i.match(/^(h|hh)$/i)?(d=j,("h"==i||"hh"==i)&&(d%=12)):"i"==i&&(f=j):i.match(/^a$/i)&&j.match(/^p/i)&&("h"in l||"hh"in l)&&(g=!0);return(g?d+12:d)*e+f},c.prototype.formats={h:function(a,b){return a?h.digits(a):b.hour%f||f},hh:function(a,b){return a?2:h.lead(b.hour%f||f)},H:function(a,b){return a?h.digits(a):""+b.hour%24},HH:function(a,b){return a?h.digits(a):h.lead(b.hour%24)},i:function(a,b){return a?2:h.lead(b.mins)},a:function(a,b){return a?4:g/2>b.time%g?"a.m.":"p.m."},A:function(a,b){return a?2:g/2>b.time%g?"AM":"PM"},toArray:function(a){return a.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return h.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}},c.prototype.isTimeExact=function(a,c){var d=this;return h.isInteger(a)&&h.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(h.isDate(a)||b.isArray(a))&&(h.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isTimeExact(a.from,c.from)&&d.isTimeExact(a.to,c.to):!1},c.prototype.isTimeOverlap=function(a,c){var d=this;return h.isInteger(a)&&(h.isDate(c)||b.isArray(c))?a===d.create(c).hour:h.isInteger(c)&&(h.isDate(a)||b.isArray(a))?c===d.create(a).hour:b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,f=0;f<e.length;f+=1)if(d.isTimeExact(a,e[f])){c=!0;break}c||(h.isInteger(a)||h.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,f=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,g,i,j;for(i=0;f>i;i+=1){if(g=e[i],d.isTimeExact(g,a)){c=e[i]=null,j=!0;break}if(d.isTimeOverlap(g,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[2]||c.push("inverted")):h.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;f>i;i+=1)if(d.isTimeExact(e[i],a)){e[i]=null;break}if(j)for(i=0;f>i;i+=1)if(d.isTimeOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.i=function(a,b){return h.isInteger(b)&&b>0?b:this.item.interval},c.prototype.nodes=function(a){var b=this,c=b.settings,d=b.item.select,e=b.item.highlight,f=b.item.view,g=b.item.disable;return h.node("ul",h.group({min:b.item.min.pick,max:b.item.max.pick,i:b.item.interval,node:"li",item:function(a){a=b.create(a);var i=a.pick,j=d&&d.pick==i,k=e&&e.pick==i,l=g&&b.disabled(a),m=h.trigger(b.formats.toString,b,[c.format,a]);return[h.trigger(b.formats.toString,b,[h.trigger(c.formatLabel,b,[a])||c.format,a]),function(a){return j&&a.push(c.klass.selected),k&&a.push(c.klass.highlighted),f&&f.pick==i&&a.push(c.klass.viewset),l&&a.push(c.klass.disabled),a.join(" ")}([c.klass.listItem]),"data-pick="+a.pick+" "+h.ariaAttr({role:"option",label:m,selected:j&&b.$node.val()===m?!0:null,activedescendant:k?!0:null,disabled:l?!0:null})]}})+h.node("li",h.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+h.ariaAttr({controls:b.$node[0].id})),"",h.ariaAttr({role:"presentation"})),c.klass.list,h.ariaAttr({role:"listbox",controls:b.$node[0].id}))},c.defaults=function(a){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:a+" "+a+"--time",holder:a+"__holder",list:a+"__list",listItem:a+"__list-item",disabled:a+"__list-item--disabled",selected:a+"__list-item--selected",highlighted:a+"__list-item--highlighted",viewset:a+"__list-item--viewset",now:a+"__list-item--now",buttonClear:a+"__button--clear"}}}(a.klasses().picker),a.extend("pickatime",c)}),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/datepicker/datepicker.html",'<div class="form-group {{form.htmlClass}}" ng-class="{\'has-error\': hasError()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <input ng-show="form.key" style="background-color: white" type="text" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-model="$$value$$" pick-a-date="form.pickadate" min-date="form.minDate" max-date="form.maxDate" name="{{form.key.slice(-1)[0]}}" format="form.format"> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>')}]),angular.module("schemaForm").directive("pickADate",function(){var a=function(a){return angular.isString(a)||angular.isNumber(a)?new Date(a):a};return{restrict:"A",require:"ngModel",scope:{ngModel:"=",pickADate:"=",minDate:"=",maxDate:"=",format:"="},link:function(b,c,d,e){if(c.pickadate){var f={onClose:function(){c.blur()},formatSubmit:null};b.pickADate&&angular.extend(f,b.pickADate),c.pickadate(f);var g="yyyy-mm-dd",h=$.fn.pickadate.defaults.format,i=c.pickadate("picker");if(e.$formatters.push(function(a){return angular.isUndefined(a)||null===a?a:(i.set("view",a,{format:b.format||g}),i.set("highlight",a,{format:b.format||g}),i.get("highlight",h))}),e.$parsers.push(function(){return i.get("select",b.format||g)}),angular.isDefined(d.minDate))var j=b.$watch("minDate",function(b){b&&(i.set("min",a(b)),j())},!0);if(angular.isDefined(d.maxDate))var k=b.$watch("maxDate",function(b){b&&(i.set("max",a(b)),k())},!0)}}}}),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if("string"===d.type&&("date"===d.format||"date-time"===d.format)){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="datepicker",
e.lookup[c.stringify(e.path)]=f,f}};a.defaults.string.unshift(d),b.addMapping("bootstrapDecorator","datepicker","directives/decorators/bootstrap/datepicker/datepicker.html"),b.createDirective("datepicker","directives/decorators/bootstrap/datepicker/datepicker.html")}]),angular.module("schemaForm").run(["$templateCache",function(a){a.put("directives/decorators/bootstrap/uiselect/multi.html",'<div class="form-group {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}" ng-init="form.select_models=(form.schema.items| whereMulti : \'value\' : ($$value$$||[]))"><div id="injected_help" {{form.helpdirectivename}}="" {{form.helpdirectiveparams}}="" class="{{form.helpDirectiveClasses}}"></div><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="form-group" ng-controller="UiSelectController"><ui-select multiple="" sortable-options="{{form.sortableOptions}}" ng-if="!(form.options.tagging||false)" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}</ui-select-match><ui-select-choices refresh="fetchResult(form.schema, form.options, $select.search)" refresh-delay="form.options.refreshDelay" group-by="form.options.groupBy" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') } | dupesFilter : form.select_models"><div ng-bind-html="item.label | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\'))+ \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" multiple="" ng-if="(form.options.tagging||false) && !(form.options.groupBy || false)" tagging="tagFunction" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" sortable-options="{{form.sortableOptions}}" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}&nbsp;<small>{{($item.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices refresh-delay="form.options.refreshDelay" refresh="fetchResult(form.schema, form.options, $select.search)" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') } | dupesFilter : form.select_models"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" multiple="" ng-if="(form.options.tagging||false) && (form.options.groupBy || false)" tagging="tagFunction" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" sortable-options="{{form.sortableOptions}}" ng-model="form.select_models" theme="bootstrap" on-select="$$value$$.push($item.value)" on-remove="$$value$$.splice($$value$$.indexOf($item.value), 1)" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{$item.label}}&nbsp;<small>{{($item.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices group-by="form.options.groupBy" refresh-delay="form.options.refreshDelay" refresh="fetchResult(form.schema, form.options, $select.search)" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') } | dupesFilter : form.select_models"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><input toggle-model="" type="hidden" ng-model="insideModel" sf-changed="form" schema-validate="form"> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div></div>'),a.put("directives/decorators/bootstrap/uiselect/single.html",'<div class="form-group {{form.htmlClass}}" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}" ng-init="select_models=(form.schema.items | filter : {value: $$value$$} : true)"><div id="injected_help" {{form.helpdirectivename}}="" {{form.helpdirectiveparams}}="" class="{{form.helpDirectiveClasses}}"></div><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="form-group" ng-init="select_model.selected=select_models[0]"><ui-select ng-model="select_model.selected" ng-controller="UiSelectController" ng-if="!(form.options.tagging||false)" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}</ui-select-match><ui-select-choices refresh="fetchResult(form.schema, form.options, $select.search)" refresh-delay="form.options.refreshDelay" group-by="form.options.groupBy" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\') }"><div ng-bind-html="item.label | highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\'))+ \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" ng-model="select_model.selected" ng-if="(form.options.tagging||false) && !(form.options.groupBy || false)" tagging="tagFunction" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}&nbsp;<small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices refresh="form.options.refreshMethod(form.schema, $select.search)" refresh-delay="form.options.refreshDelay" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') } | dupesFilter : [select_model.selected]"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag| highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><ui-select ng-controller="UiSelectController" ng-model="select_model.selected" ng-if="(form.options.tagging||false) && (form.options.groupBy || false)" tagging="tagFunction" tagging-label="form.options.taggingLabel" tagging-tokens="form.options.taggingTokens" theme="bootstrap" ng-disabled="form.disabled" on-select="$$value$$=$item.value" class="{{form.options.uiClass}}"><ui-select-match placeholder="{{form.placeholder || form.schema.placeholder || (\'placeholders.select\' | translate)}}">{{select_model.selected.label}}&nbsp;<small>{{(select_model.selected.isTag===true ? form.options.taggingLabel : \'\')}}</small></ui-select-match><ui-select-choices group-by="form.options.groupBy" refresh="form.options.refreshMethod(form.schema, $select.search)" refresh-delay="form.options.refreshDelay" repeat="item in form.schema.items | propsFilter: {label: $select.search, description: (form.options.searchDescription===true ? $select.search : \'NOTSEARCHINGFORTHIS\') } | dupesFilter : [select_model.selected]"><div ng-if="item.isTag" ng-bind-html="\'<div>\' + (item.label | highlight: $select.search) + \' \' + form.options.taggingLabel + \'</div><div class=&quot;divider&quot;></div>\'"></div><div ng-if="!item.isTag" ng-bind-html="item.label + item.isTag| highlight: $select.search"></div><div ng-if="item.description"><span ng-bind-html="\'<small>\' + (\'\'+item.description | highlight: (form.options.searchDescriptions===true ? $select.search : \'NOTSEARCHINGFORTHIS\')) + \'</small>\'"></span></div></ui-select-choices></ui-select><input type="hidden" toggle-single-model="" sf-changed="form" ng-model="insideModel" schema-validate="form"> <span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }"></span><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div></div>')}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(a,b,c){var d=function(b,d,e){if("string"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.string.unshift(d);var d=function(b,d,e){if("number"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.number.unshift(d);var e=function(b,d,e){if("array"===d.type&&"uiselect"==d.format){var f=a.stdFormObj(b,d,e);return f.key=e.path,f.type="uimultiselect",e.lookup[c.stringify(e.path)]=f,f}};a.defaults.array.unshift(e),b.addMapping("bootstrapDecorator","uiselect","directives/decorators/bootstrap/uiselect/single.html"),b.createDirective("uiselect","directives/decorators/bootstrap/uiselect/single.html"),b.addMapping("bootstrapDecorator","uimultiselect","directives/decorators/bootstrap/uiselect/multi.html"),b.createDirective("uimultiselect","directives/decorators/bootstrap/uiselect/multi.html")}]).directive("toggleSingleModel",function(){return{require:"ngModel",restrict:"A",scope:{},replace:!0,controller:["$scope",function(a){a.$parent.$watch("select_model.selected",function(){void 0!=a.$parent.select_model.selected&&(a.$parent.insideModel=a.$parent.select_model.selected.value,a.$parent.ngModel.$setViewValue(a.$parent.select_model.selected.value))})}]}}).directive("toggleModel",function(){return{require:"ngModel",restrict:"A",scope:{},replace:!0,controller:["$scope","sfSelect",function(a,b){var c=b(a.$parent.form.key,a.$parent.model);angular.isUndefined(c)&&(c=[],b(a.$parent.form.key,a.$parent.model,c)),a.$parent.$watch("c.select_models",function(){0==a.$parent.form.select_models.length?(a.$parent.insideModel=a.$parent.$$value$$,void 0!=a.$parent.ngModel.$viewValue&&a.$parent.ngModel.$setViewValue(a.$parent.form.select_models)):(a.$parent.insideModel=a.$parent.form.select_models,a.$parent.ngModel.$setViewValue(a.$parent.form.select_models))},!0)}]}}).filter("whereMulti",function(){return function(a,b,c){var d=[];return angular.isArray(c)?c.forEach(function(c){for(var e=0;e<a.length;e++)if(c==a[e][b]){d.push(a[e]);break}}):d=a,d}}).filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f];if(a.hasOwnProperty(g)){var h=b[g].toLowerCase();if(0===a[g].toString().toLowerCase().indexOf(h)||-1!==a[g].toString().toLowerCase().indexOf(" "+h)){d=!0;break}}}d&&c.push(a)}):c=a,c}}).filter("dupesFilter",function(){return function(a,b){var c=[],d=b.map(function(a){return a.value.toLowerCase().trim()});return angular.forEach(a,function(a){-1==d.indexOf(a.value.toLowerCase().trim())&&(c.push(a),d.push(a.value.toLowerCase().trim()))}),console.log(c),c}}).controller("UiSelectController",["$scope","$http",function(a,b){a.tagFunction=function(a){var b={value:a,label:a,description:"",group:""};return b},a.fetchResult=function(a,c,d){if(c)if(c.callback)a.items=c.callback(a,c,d);else{if(c.http_post)return b.post(c.http_post.url,c.http_post.parameter).then(function(b){a.items=b.data},function(a,b){alert("Loading select items failed (URL: '"+String(c.http_post.url)+"' Parameter: "+String(c.http_post.parameter)+"\nError: "+b)});if(c.http_get)return b.get(c.http_get.url,c.http_get.parameter).then(function(b){a.items=b.data},function(a,b){alert("Loading select items failed (URL: '"+String(c.http_get.url)+"\nError: "+b)});if(c.async)return c.async.call(a,c,d).then(function(b){a.items=b.data},function(a,b){alert("Loading select items failed(Options: '"+String(c)+"\nError: "+b)})}}}]),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({
from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe}),function(a,b){"use strict";var c;if("object"==typeof exports){try{c=require("moment")}catch(d){}module.exports=b(c)}else"function"==typeof define&&define.amd?define(function(a){var d="moment";try{c=a(d)}catch(e){}return b(c)}):a.Pikaday=b(a.moment)}(this,function(a){"use strict";var b="function"==typeof a,c=!!window.addEventListener,d=window.document,e=window.setTimeout,f=function(a,b,d,e){c?a.addEventListener(b,d,!!e):a.attachEvent("on"+b,d)},g=function(a,b,d,e){c?a.removeEventListener(b,d,!!e):a.detachEvent("on"+b,d)},h=function(a,b,c){var e;d.createEvent?(e=d.createEvent("HTMLEvents"),e.initEvent(b,!0,!1),e=t(e,c),a.dispatchEvent(e)):d.createEventObject&&(e=d.createEventObject(),e=t(e,c),a.fireEvent("on"+b,e))},i=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},j=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},k=function(a,b){j(a,b)||(a.className=""===a.className?b:a.className+" "+b)},l=function(a,b){a.className=i((" "+a.className+" ").replace(" "+b+" "," "))},m=function(a){return/Array/.test(Object.prototype.toString.call(a))},n=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},o=function(a){var b=a.getDay();return 0===b||6===b},p=function(a){return a%4===0&&a%100!==0||a%400===0},q=function(a,b){return[31,p(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},r=function(a){n(a)&&a.setHours(0,0,0,0)},s=function(a,b){return a.getTime()===b.getTime()},t=function(a,b,c){var d,e;for(d in b)e=void 0!==a[d],e&&"object"==typeof b[d]&&null!==b[d]&&void 0===b[d].nodeName?n(b[d])?c&&(a[d]=new Date(b[d].getTime())):m(b[d])?c&&(a[d]=b[d].slice(0)):a[d]=t({},b[d],c):(c||!e)&&(a[d]=b[d]);return a},u=function(a){return a.month<0&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12),a.month>11&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12),a},v={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(a,b,c){for(b+=a.firstDay;b>=7;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},x=function(a){if(a.isEmpty)return'<td class="is-empty"></td>';var b=[];return a.isDisabled&&b.push("is-disabled"),a.isToday&&b.push("is-today"),a.isSelected&&b.push("is-selected"),a.isInRange&&b.push("is-inrange"),a.isStartRange&&b.push("is-startrange"),a.isEndRange&&b.push("is-endrange"),'<td data-day="'+a.day+'" class="'+b.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+a.year+'" data-pika-month="'+a.month+'" data-pika-day="'+a.day+'">'+a.day+"</button></td>"},y=function(a,b,c){var d=new Date(c,0,1),e=Math.ceil(((new Date(c,b,a)-d)/864e5+d.getDay()+1)/7);return'<td class="pika-week">'+e+"</td>"},z=function(a,b){return"<tr>"+(b?a.reverse():a).join("")+"</tr>"},A=function(a){return"<tbody>"+a.join("")+"</tbody>"},B=function(a){var b,c=[];for(a.showWeekNumber&&c.push("<th></th>"),b=0;7>b;b++)c.push('<th scope="col"><abbr title="'+w(a,b)+'">'+w(a,b,!0)+"</abbr></th>");return"<thead>"+(a.isRTL?c.reverse():c).join("")+"</thead>"},C=function(a,b,c,d,e){var f,g,h,i,j,k=a._o,l=c===k.minYear,n=c===k.maxYear,o='<div class="pika-title">',p=!0,q=!0;for(h=[],f=0;12>f;f++)h.push('<option value="'+(c===e?f-b:12+f-b)+'"'+(f===d?" selected":"")+(l&&f<k.minMonth||n&&f>k.maxMonth?"disabled":"")+">"+k.i18n.months[f]+"</option>");for(i='<div class="pika-label">'+k.i18n.months[d]+'<select class="pika-select pika-select-month" tabindex="-1">'+h.join("")+"</select></div>",m(k.yearRange)?(f=k.yearRange[0],g=k.yearRange[1]+1):(f=c-k.yearRange,g=1+c+k.yearRange),h=[];g>f&&f<=k.maxYear;f++)f>=k.minYear&&h.push('<option value="'+f+'"'+(f===c?" selected":"")+">"+f+"</option>");return j='<div class="pika-label">'+c+k.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+h.join("")+"</select></div>",o+=k.showMonthAfterYear?j+i:i+j,l&&(0===d||k.minMonth>=d)&&(p=!1),n&&(11===d||k.maxMonth<=d)&&(q=!1),0===b&&(o+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+k.i18n.previousMonth+"</button>"),b===a._o.numberOfMonths-1&&(o+='<button class="pika-next'+(q?"":" is-disabled")+'" type="button">'+k.i18n.nextMonth+"</button>"),o+="</div>"},D=function(a,b){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+B(a)+A(b)+"</table>"},E=function(g){var h=this,i=h.config(g);h._onMouseDown=function(a){if(h._v){a=a||window.event;var b=a.target||a.srcElement;if(b){if(!j(b.parentNode,"is-disabled")){if(j(b,"pika-button")&&!j(b,"is-empty"))return h.setDate(new Date(b.getAttribute("data-pika-year"),b.getAttribute("data-pika-month"),b.getAttribute("data-pika-day"))),void(i.bound&&e(function(){h.hide(),i.field&&i.field.blur()},100));j(b,"pika-prev")?h.prevMonth():j(b,"pika-next")&&h.nextMonth()}if(j(b,"pika-select"))h._c=!0;else{if(!a.preventDefault)return a.returnValue=!1,!1;a.preventDefault()}}}},h._onChange=function(a){a=a||window.event;var b=a.target||a.srcElement;b&&(j(b,"pika-select-month")?h.gotoMonth(b.value):j(b,"pika-select-year")&&h.gotoYear(b.value))},h._onInputChange=function(c){var d;c.firedBy!==h&&(b?(d=a(i.field.value,i.format),d=d&&d.isValid()?d.toDate():null):d=new Date(Date.parse(i.field.value)),n(d)&&h.setDate(d),h._v||h.show())},h._onInputFocus=function(){h.show()},h._onInputClick=function(){h.show()},h._onInputBlur=function(){var a=d.activeElement;do if(j(a,"pika-single"))return;while(a=a.parentNode);h._c||(h._b=e(function(){h.hide()},50)),h._c=!1},h._onClick=function(a){a=a||window.event;var b=a.target||a.srcElement,d=b;if(b){!c&&j(b,"pika-select")&&(b.onchange||(b.setAttribute("onchange","return;"),f(b,"change",h._onChange)));do if(j(d,"pika-single")||d===i.trigger)return;while(d=d.parentNode);h._v&&b!==i.trigger&&d!==i.trigger&&h.hide()}},h.el=d.createElement("div"),h.el.className="pika-single"+(i.isRTL?" is-rtl":"")+(i.theme?" "+i.theme:""),f(h.el,"ontouchend"in d?"touchend":"mousedown",h._onMouseDown,!0),f(h.el,"change",h._onChange),i.field&&(i.container?i.container.appendChild(h.el):i.bound?d.body.appendChild(h.el):i.field.parentNode.insertBefore(h.el,i.field.nextSibling),f(i.field,"change",h._onInputChange),i.defaultDate||(b&&i.field.value?i.defaultDate=a(i.field.value,i.format).toDate():i.defaultDate=new Date(Date.parse(i.field.value)),i.setDefaultDate=!0));var k=i.defaultDate;n(k)?i.setDefaultDate?h.setDate(k,!0):h.gotoDate(k):h.gotoDate(new Date),i.bound?(this.hide(),h.el.className+=" is-bound",f(i.trigger,"click",h._onInputClick),f(i.trigger,"focus",h._onInputFocus),f(i.trigger,"blur",h._onInputBlur)):this.show()};return E.prototype={config:function(a){this._o||(this._o=t({},v,!0));var b=t(this._o,a,!0);b.isRTL=!!b.isRTL,b.field=b.field&&b.field.nodeName?b.field:null,b.theme="string"==typeof b.theme&&b.theme?b.theme:null,b.bound=!!(void 0!==b.bound?b.field&&b.bound:b.field),b.trigger=b.trigger&&b.trigger.nodeName?b.trigger:b.field,b.disableWeekends=!!b.disableWeekends,b.disableDayFn="function"==typeof b.disableDayFn?b.disableDayFn:null;var c=parseInt(b.numberOfMonths,10)||1;if(b.numberOfMonths=c>4?4:c,n(b.minDate)||(b.minDate=!1),n(b.maxDate)||(b.maxDate=!1),b.minDate&&b.maxDate&&b.maxDate<b.minDate&&(b.maxDate=b.minDate=!1),b.minDate&&this.setMinDate(b.minDate),b.maxDate&&(r(b.maxDate),b.maxYear=b.maxDate.getFullYear(),b.maxMonth=b.maxDate.getMonth()),m(b.yearRange)){var d=(new Date).getFullYear()-10;b.yearRange[0]=parseInt(b.yearRange[0],10)||d,b.yearRange[1]=parseInt(b.yearRange[1],10)||d}else b.yearRange=Math.abs(parseInt(b.yearRange,10))||v.yearRange,b.yearRange>100&&(b.yearRange=100);return b},toString:function(c){return n(this._d)?b?a(this._d).format(c||this._o.format):this._d.toDateString():""},getMoment:function(){return b?a(this._d):null},setMoment:function(c,d){b&&a.isMoment(c)&&this.setDate(c.toDate(),d)},getDate:function(){return n(this._d)?new Date(this._d.getTime()):null},setDate:function(a,b){if(!a)return this._d=null,this._o.field&&(this._o.field.value="",h(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),n(a)){var c=this._o.minDate,d=this._o.maxDate;n(c)&&c>a?a=c:n(d)&&a>d&&(a=d),this._d=new Date(a.getTime()),r(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),h(this._o.field,"change",{firedBy:this})),b||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(a){var b=!0;if(n(a)){if(this.calendars){var c=new Date(this.calendars[0].year,this.calendars[0].month,1),d=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),e=a.getTime();d.setMonth(d.getMonth()+1),d.setDate(d.getDate()-1),b=e<c.getTime()||d.getTime()<e}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=u(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++)this.calendars[a]=u({month:this.calendars[0].month+a,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){r(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()},setMaxDate:function(a){this._o.maxDate=a},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(a){if(this._v||a){var b=this._o,c=b.minYear,d=b.maxYear,f=b.minMonth,g=b.maxMonth,h="";this._y<=c&&(this._y=c,!isNaN(f)&&this._m<f&&(this._m=f)),this._y>=d&&(this._y=d,!isNaN(g)&&this._m>g&&(this._m=g));for(var i=0;i<b.numberOfMonths;i++)h+='<div class="pika-lendar">'+C(this,i,this.calendars[i].year,this.calendars[i].month,this.calendars[0].year)+this.render(this.calendars[i].year,this.calendars[i].month)+"</div>";if(this.el.innerHTML=h,b.bound&&"hidden"!==b.field.type&&e(function(){b.trigger.focus()},1),"function"==typeof this._o.onDraw){var j=this;e(function(){j._o.onDraw.call(j)},0)}}},adjustPosition:function(){var a,b,c,e,f,g,h,i,j,k;if(!this._o.container){if(this.el.style.position="absolute",a=this._o.trigger,b=a,c=this.el.offsetWidth,e=this.el.offsetHeight,f=window.innerWidth||d.documentElement.clientWidth,g=window.innerHeight||d.documentElement.clientHeight,h=window.pageYOffset||d.body.scrollTop||d.documentElement.scrollTop,"function"==typeof a.getBoundingClientRect)k=a.getBoundingClientRect(),i=k.left+window.pageXOffset,j=k.bottom+window.pageYOffset;else for(i=b.offsetLeft,j=b.offsetTop+b.offsetHeight;b=b.offsetParent;)i+=b.offsetLeft,j+=b.offsetTop;(this._o.reposition&&i+c>f||this._o.position.indexOf("right")>-1&&i-c+a.offsetWidth>0)&&(i=i-c+a.offsetWidth),(this._o.reposition&&j+e>g+h||this._o.position.indexOf("top")>-1&&j-e-a.offsetHeight>0)&&(j=j-e-a.offsetHeight),this.el.style.left=i+"px",this.el.style.top=j+"px"}},render:function(a,b){var c=this._o,d=new Date,e=q(a,b),f=new Date(a,b,1).getDay(),g=[],h=[];r(d),c.firstDay>0&&(f-=c.firstDay,0>f&&(f+=7));for(var i=e+f,j=i;j>7;)j-=7;i+=7-j;for(var k=0,l=0;i>k;k++){var m,p=new Date(a,b,1+(k-f)),t=n(this._d)?s(p,this._d):!1,u=s(p,d),v=f>k||k>=e+f,w=c.startRange&&s(c.startRange,p),A=c.endRange&&s(c.endRange,p),B=c.startRange&&c.endRange&&c.startRange<p&&p<c.endRange,C=c.minDate&&p<c.minDate||c.maxDate&&p>c.maxDate||c.disableWeekends&&o(p)||c.disableDayFn&&c.disableDayFn(p),m={day:1+(k-f),month:b,year:a,isSelected:t,isToday:u,isDisabled:C,isEmpty:v,isStartRange:w,isEndRange:A,isInRange:B};h.push(x(m)),7===++l&&(c.showWeekNumber&&h.unshift(y(k-f,b,a)),g.push(z(h,c.isRTL)),h=[],l=0)}return D(c,g)},isVisible:function(){return this._v},show:function(){this._v||(l(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(f(d,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var a=this._v;a!==!1&&(this._o.bound&&g(d,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",k(this.el,"is-hidden"),this._v=!1,void 0!==a&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),g(this.el,"mousedown",this._onMouseDown,!0),g(this.el,"change",this._onChange),this._o.field&&(g(this._o.field,"change",this._onInputChange),this._o.bound&&(g(this._o.trigger,"click",this._onInputClick),g(this._o.trigger,"focus",this._onInputFocus),g(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},E}),window.Handsontable={version:"0.16.1",buildDate:"Fri Jul 24 2015 09:09:44 GMT+0200 (CEST)"},function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Handsontable=a()}}(function(){var a;return function(a,b,c){return function d(a,b,c){function e(h,i){if(!b[h]){if(!a[h]){var j="function"==typeof require&&require;if(!i&&j)return j(h,!0);if(f)return f(h,!0);if(g[h]&&"undefined"!=typeof window[g[h]])return window[g[h]];var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=b[h]={exports:{}};a[h][0].call(l.exports,function(b){var c=a[h][1][b];
return e(c?c:b)},l,l.exports,d,a,b,c)}return b[h].exports}for(var f="function"==typeof require&&require,g=JSON.parse('{"zeroclipboard":"ZeroClipboard","moment":"moment","pikaday":"Pikaday"}')||{},h=0;h<c.length;h++)e(c[h]);return e}(a,b,c),function(){return Handsontable}}({1:[function(a,b,c){"use strict";window.jQuery&&!function(a,b,c){b.fn.handsontable=function(a){var b,d,e,f,g,h=this.first(),i=h.data("handsontable");if("string"!=typeof a)return g=a||{},i?i.updateSettings(g):(i=new c.Core(h[0],g),h.data("handsontable",i),i.init()),h;if(e=[],arguments.length>1)for(b=1,d=arguments.length;d>b;b++)e.push(arguments[b]);if(i){if("undefined"==typeof i[a])throw new Error("Handsontable do not provide action: "+a);f=i[a].apply(i,e),"destroy"===a&&h.removeData()}return f}}(window,jQuery,Handsontable)},{}],2:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableBorder:{get:function(){return j}},__esModule:{value:!0}});var d,e,f,g=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),h=(e=a("./../../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).EventManager,i=(f=a("./cell/coords.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellCoords,j=function(a,b){b&&(this.eventManager=new h(a),this.instance=a,this.wot=a,this.settings=b,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=null,this.cornerStyle=null,this.createBorders(b),this.registerListeners())};$traceurRuntime.createClass(j,{registerListeners:function(){var a=this;this.eventManager.addEventListener(document.body,"mousedown",function(){return a.onMouseDown()}),this.eventManager.addEventListener(document.body,"mouseup",function(){return a.onMouseUp()});for(var b=0,c=this.main.childNodes.length;c>b;b++)this.eventManager.addEventListener(this.main.childNodes[b],"mouseenter",function(b){return a.onMouseEnter(b)})},onMouseDown:function(){this.mouseDown=!0},onMouseUp:function(){this.mouseDown=!1},onMouseEnter:function(a){function b(a){return a.clientY<Math.floor(e.top)?!0:a.clientY>Math.ceil(e.top+e.height)?!0:a.clientX<Math.floor(e.left)?!0:a.clientX>Math.ceil(e.left+e.width)?!0:void 0}function c(a){b(a)&&(d.eventManager.removeEventListener(document.body,"mousemove",c),d.style.display="block")}if(this.mouseDown&&this.wot.getSetting("hideBorderOnMouseDownOver")){a.preventDefault(),a.stopImmediatePropagation();var d=this,e=this.getBoundingClientRect();this.style.display="none",this.eventManager.addEventListener(document.body,"mousemove",c)}},createBorders:function(a){this.main=document.createElement("div");var b=["top","left","bottom","right","corner"],c=this.main.style;c.position="absolute",c.top=0,c.left=0;for(var d=0;5>d;d++){var e=b[d],f=document.createElement("div");f.className="wtBorder "+(this.settings.className||""),this.settings[e]&&this.settings[e].hide&&(f.className+=" hidden"),c=f.style,c.backgroundColor=this.settings[e]&&this.settings[e].color?this.settings[e].color:a.border.color,c.height=this.settings[e]&&this.settings[e].width?this.settings[e].width+"px":a.border.width+"px",c.width=this.settings[e]&&this.settings[e].width?this.settings[e].width+"px":a.border.width+"px",this.main.appendChild(f)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),Handsontable.mobileBrowser&&this.createMultipleSelectorHandles(),this.disappear(),this.wot.wtTable.bordersHolder||(this.wot.wtTable.bordersHolder=document.createElement("div"),this.wot.wtTable.bordersHolder.className="htBorders",this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)),this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild)},createMultipleSelectorHandles:function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var a=10,b=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var c={position:"absolute",height:b+"px",width:b+"px","border-radius":parseInt(b/1.5,10)+"px"};for(var d in c)c.hasOwnProperty(d)&&(this.selectionHandles.styles.bottomRightHitArea[d]=c[d],this.selectionHandles.styles.topLeftHitArea[d]=c[d]);var e={position:"absolute",height:a+"px",width:a+"px","border-radius":parseInt(a/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var f in e)e.hasOwnProperty(f)&&(this.selectionHandles.styles.bottomRight[f]=e[f],this.selectionHandles.styles.topLeft[f]=e[f]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)},isPartRange:function(a,b){return!this.wot.selections.area.cellRange||a==this.wot.selections.area.cellRange.to.row&&b==this.wot.selections.area.cellRange.to.col?!1:!0},updateMultipleSelectionHandlesPosition:function(a,b,c,d,e,f){var g=parseInt(this.selectionHandles.styles.topLeft.width,10),h=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(c-g,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(d-g,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(c-h/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(d-h/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(c+f,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(d+e,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(c+f-h/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(d+e-h/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(a,b)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),a==this.wot.wtSettings.getSetting("fixedRowsTop")||b==this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")},appear:function(a){if(!this.disabled){var b,c,d,e,f,h,j,k,l,m,n,o,p,q,r,s,t;t=this.wot.cloneOverlay instanceof WalkontableTopOverlay||this.wot.cloneOverlay instanceof WalkontableCornerOverlay?this.wot.getSetting("fixedRowsTop"):this.wot.wtTable.getRenderedRowsCount();for(var u=0;t>u;u++){var v=this.wot.wtTable.rowFilter.renderedToSource(u);if(v>=a[0]&&v<=a[2]){p=v;break}}for(var w=t-1;w>=0;w--){var x=this.wot.wtTable.rowFilter.renderedToSource(w);if(x>=a[0]&&x<=a[2]){r=x;break}}t=this.wot.wtTable.getRenderedColumnsCount();for(var y=0;t>y;y++){var z=this.wot.wtTable.columnFilter.renderedToSource(y);if(z>=a[1]&&z<=a[3]){q=z;break}}for(var A=t-1;A>=0;A--){var B=this.wot.wtTable.columnFilter.renderedToSource(A);if(B>=a[1]&&B<=a[3]){s=B;break}}if(void 0===p||void 0===q)return void this.disappear();b=p!==r||q!==s,c=this.wot.wtTable.getCell(new i(p,q)),d=b?this.wot.wtTable.getCell(new i(r,s)):c,e=g.offset(c),f=b?g.offset(d):e,h=g.offset(this.wot.wtTable.TABLE),k=e.top,n=f.top+g.outerHeight(d)-k,m=e.left,o=f.left+g.outerWidth(d)-m,j=k-h.top-1,l=m-h.left-1;var C=g.getComputedStyle(c);parseInt(C.borderTopWidth,10)>0&&(j+=1,n=n>0?n-1:0),parseInt(C.borderLeftWidth,10)>0&&(l+=1,o=o>0?o-1:0),this.topStyle.top=j+"px",this.topStyle.left=l+"px",this.topStyle.width=o+"px",this.topStyle.display="block",this.leftStyle.top=j+"px",this.leftStyle.left=l+"px",this.leftStyle.height=n+"px",this.leftStyle.display="block";var D=Math.floor(this.settings.border.width/2);if(this.bottomStyle.top=j+n-D+"px",this.bottomStyle.left=l+"px",this.bottomStyle.width=o+"px",this.bottomStyle.display="block",this.rightStyle.top=j+"px",this.rightStyle.left=l+o-D+"px",this.rightStyle.height=n+1+"px",this.rightStyle.display="block",Handsontable.mobileBrowser||!this.hasSetting(this.settings.border.cornerVisible)||this.isPartRange(r,s))this.cornerStyle.display="none";else if(this.cornerStyle.top=j+n-4+"px",this.cornerStyle.left=l+o-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="block",s===this.wot.getSetting("totalColumns")-1){var E=g.getTrimmingContainer(this.wot.wtTable.TABLE),F=d.offsetLeft+g.outerWidth(d)>=g.innerWidth(E);F&&(this.cornerStyle.left=Math.floor(l+o-3-parseInt(this.cornerDefaultStyle.width)/2)+"px",this.cornerStyle.borderRightWidth=0)}Handsontable.mobileBrowser&&this.updateMultipleSelectionHandlesPosition(p,q,j,l,o,n)}},disappear:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",Handsontable.mobileBrowser&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")},hasSetting:function(a){return"function"==typeof a?a():!!a}},{}),window.WalkontableBorder=j},{"./../../../dom.js":27,"./../../../eventManager.js":41,"./cell/coords.js":5}],3:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableViewportColumnsCalculator:{get:function(){return e}},__esModule:{value:!0}});var d=new WeakMap,e=function(a,b,c,e,f,g,h){d.set(this,{viewportWidth:a,scrollOffset:b,totalColumns:c,columnWidthFn:e,overrideFn:f,onlyFullyVisible:g}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=h,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()},f=e;$traceurRuntime.createClass(e,{calculate:function(){for(var a,b=0,c=!0,e=[],f=d.get(this),g=f.onlyFullyVisible,h=f.overrideFn,i=f.scrollOffset,j=f.totalColumns,k=f.viewportWidth,l=0;j>l;l++)if(a=this._getColumnWidth(l),i>=b&&!g&&(this.startColumn=l),b>=i&&i+k>=b+a&&(null==this.startColumn&&(this.startColumn=l),this.endColumn=l),e.push(b),b+=a,g||(this.endColumn=l),b>=i+k){c=!1;break}if(this.endColumn===j-1&&c)for(this.startColumn=this.endColumn;this.startColumn>0;){var m=e[this.endColumn]+a-e[this.startColumn-1];if((k>=m||!g)&&this.startColumn--,m>k)break}null!==this.startColumn&&h&&h(this),this.startPosition=e[this.startColumn],void 0==this.startPosition&&(this.startPosition=null),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)},refreshStretching:function(a){if("none"!==this.stretch){for(var b,c,e=0,f=d.get(this),g=f.totalColumns,h=0;g>h;h++)b=this._getColumnWidth(h),e+=b;this.totalTargetWidth=a,c=e-a,"all"===this.stretch&&0>c?(this.stretchAllRatio=a/e,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0):"last"===this.stretch&&a!==1/0&&(this.stretchLastWidth=-c+this._getColumnWidth(g-1))}},getStretchedColumnWidth:function(a,b){var c=null;return"all"===this.stretch&&0!==this.stretchAllRatio?c=this._getStretchedAllColumnWidth(a,b):"last"===this.stretch&&0!==this.stretchLastWidth&&(c=this._getStretchedLastColumnWidth(a)),c},_getStretchedAllColumnWidth:function(a,b){var c=0,e=d.get(this),f=e.totalColumns;if(this.stretchAllColumnsWidth[a]||(this.stretchAllColumnsWidth[a]=Math.round(b*this.stretchAllRatio)),this.stretchAllColumnsWidth.length===f&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var g=0;g<this.stretchAllColumnsWidth.length;g++)c+=this.stretchAllColumnsWidth[g];c!==this.totalTargetWidth&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-c)}return this.stretchAllColumnsWidth[a]},_getStretchedLastColumnWidth:function(a){var b=d.get(this),c=b.totalColumns;return a===c-1?this.stretchLastWidth:null},_getColumnWidth:function(a){var b=d.get(this).columnWidthFn(a);return void 0===b&&(b=f.DEFAULT_WIDTH),b}},{get DEFAULT_WIDTH(){return 50}}),window.WalkontableViewportColumnsCalculator=e},{}],4:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableViewportRowsCalculator:{get:function(){return e}},__esModule:{value:!0}});var d=new WeakMap,e=function(a,b,c,e,f,g){d.set(this,{viewportHeight:a,scrollOffset:b,totalRows:c,rowHeightFn:e,overrideFn:f,onlyFullyVisible:g}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()},f=e;$traceurRuntime.createClass(e,{calculate:function(){for(var a=0,b=!0,c=[],e=d.get(this),g=e.onlyFullyVisible,h=e.overrideFn,i=e.rowHeightFn,j=e.scrollOffset,k=e.totalRows,l=e.viewportHeight,m=0;k>m;m++){var n=i(m);if(void 0===n&&(n=f.DEFAULT_HEIGHT),j>=a&&!g&&(this.startRow=m),a>=j&&j+l>=a+n&&(null===this.startRow&&(this.startRow=m),this.endRow=m),c.push(a),a+=n,g||(this.endRow=m),a>=j+l){b=!1;break}}if(this.endRow===k-1&&b)for(this.startRow=this.endRow;this.startRow>0;){var o=c[this.endRow]+n-c[this.startRow-1];if((l>=o||!g)&&this.startRow--,o>=l)break}null!==this.startRow&&h&&h(this),this.startPosition=c[this.startRow],void 0==this.startPosition&&(this.startPosition=null),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}},{get DEFAULT_HEIGHT(){return 23}}),window.WalkontableViewportRowsCalculator=e},{}],5:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableCellCoords:{get:function(){return d}},__esModule:{value:!0}});var d=function(a,b){"undefined"!=typeof a&&"undefined"!=typeof b?(this.row=a,this.col=b):(this.row=null,this.col=null)};$traceurRuntime.createClass(d,{isValid:function(a){return this.row<0||this.col<0?!1:this.row>=a.getSetting("totalRows")||this.col>=a.getSetting("totalColumns")?!1:!0},isEqual:function(a){return a===this?!0:this.row===a.row&&this.col===a.col},isSouthEastOf:function(a){return this.row>=a.row&&this.col>=a.col},isNorthWestOf:function(a){return this.row<=a.row&&this.col<=a.col},isSouthWestOf:function(a){return this.row>=a.row&&this.col<=a.col},isNorthEastOf:function(a){return this.row<=a.row&&this.col>=a.col}},{}),window.WalkontableCellCoords=d},{}],6:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableCellRange:{get:function(){return f}},__esModule:{value:!0}});var d,e=(d=a("./../cell/coords.js"),d&&d.__esModule&&d||{"default":d}).WalkontableCellCoords,f=function(a,b,c){this.highlight=a,this.from=b,this.to=c},g=f;$traceurRuntime.createClass(f,{isValid:function(a){return this.from.isValid(a)&&this.to.isValid(a)},isSingle:function(){return this.from.row===this.to.row&&this.from.col===this.to.col},getHeight:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1},getWidth:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1},includes:function(a){var b=this.getTopLeftCorner(),c=this.getBottomRightCorner();return a.row<0&&(a.row=0),a.col<0&&(a.col=0),b.row<=a.row&&c.row>=a.row&&b.col<=a.col&&c.col>=a.col},includesRange:function(a){return this.includes(a.getTopLeftCorner())&&this.includes(a.getBottomRightCorner())},isEqual:function(a){return Math.min(this.from.row,this.to.row)==Math.min(a.from.row,a.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(a.from.row,a.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(a.from.col,a.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(a.from.col,a.to.col)},overlaps:function(a){return a.isSouthEastOf(this.getTopLeftCorner())&&a.isNorthWestOf(this.getBottomRightCorner())},isSouthEastOf:function(a){return this.getTopLeftCorner().isSouthEastOf(a)||this.getBottomRightCorner().isSouthEastOf(a)},isNorthWestOf:function(a){return this.getTopLeftCorner().isNorthWestOf(a)||this.getBottomRightCorner().isNorthWestOf(a)},expand:function(a){var b=this.getTopLeftCorner(),c=this.getBottomRightCorner();return a.row<b.row||a.col<b.col||a.row>c.row||a.col>c.col?(this.from=new e(Math.min(b.row,a.row),Math.min(b.col,a.col)),this.to=new e(Math.max(c.row,a.row),Math.max(c.col,a.col)),!0):!1},expandByRange:function(a){if(this.includesRange(a)||!this.overlaps(a))return!1;var b=this.getTopLeftCorner(),c=this.getBottomRightCorner(),d=(this.getTopRightCorner(),this.getBottomLeftCorner(),a.getTopLeftCorner()),f=a.getBottomRightCorner(),h=Math.min(b.row,d.row),i=Math.min(b.col,d.col),j=Math.max(c.row,f.row),k=Math.max(c.col,f.col),l=new e(h,i),m=new e(j,k),n=new g(l,l,m).isCorner(this.from,a),o=a.isEqual(new g(l,l,m));return n&&!o&&(this.from.col>l.col&&(l.col=k,m.col=i),this.from.row>l.row&&(l.row=j,m.row=h)),this.from=l,this.to=m,!0},getDirection:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},setDirection:function(a){switch(a){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},getTopLeftCorner:function(){return new e(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},getBottomRightCorner:function(){return new e(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getTopRightCorner:function(){return new e(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getBottomLeftCorner:function(){return new e(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},isCorner:function(a,b){return b&&b.includes(a)&&(this.getTopLeftCorner().isEqual(new e(b.from.row,b.from.col))||this.getTopRightCorner().isEqual(new e(b.from.row,b.to.col))||this.getBottomLeftCorner().isEqual(new e(b.to.row,b.from.col))||this.getBottomRightCorner().isEqual(new e(b.to.row,b.to.col)))?!0:a.isEqual(this.getTopLeftCorner())||a.isEqual(this.getTopRightCorner())||a.isEqual(this.getBottomLeftCorner())||a.isEqual(this.getBottomRightCorner())},getOppositeCorner:function(a,b){if(!(a instanceof e))return!1;if(b&&b.includes(a)){if(this.getTopLeftCorner().isEqual(new e(b.from.row,b.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new e(b.from.row,b.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new e(b.to.row,b.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new e(b.to.row,b.to.col)))return this.getTopLeftCorner()}return a.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():a.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():a.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():a.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},getBordersSharedWith:function(a){if(!this.includesRange(a))return[];var b={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},c={top:Math.min(a.from.row,a.to.row),bottom:Math.max(a.from.row,a.to.row),left:Math.min(a.from.col,a.to.col),right:Math.max(a.from.col,a.to.col)},d=[];return b.top==c.top&&d.push("top"),b.right==c.right&&d.push("right"),b.bottom==c.bottom&&d.push("bottom"),b.left==c.left&&d.push("left"),d},getInner:function(){for(var a=this.getTopLeftCorner(),b=this.getBottomRightCorner(),c=[],d=a.row;d<=b.row;d++)for(var f=a.col;f<=b.col;f++)this.from.row===d&&this.from.col===f||this.to.row===d&&this.to.col===f||c.push(new e(d,f));return c},getAll:function(){for(var a=this.getTopLeftCorner(),b=this.getBottomRightCorner(),c=[],d=a.row;d<=b.row;d++)for(var f=a.col;f<=b.col;f++)a.row===d&&a.col===f?c.push(a):b.row===d&&b.col===f?c.push(b):c.push(new e(d,f));return c},forAll:function(a){for(var b=this.getTopLeftCorner(),c=this.getBottomRightCorner(),d=b.row;d<=c.row;d++)for(var e=b.col;e<=c.col;e++){var f=a(d,e);if(f===!1)return}}},{}),window.WalkontableCellRange=f},{"./../cell/coords.js":5}],7:[function(a,b,c){"use strict";Object.defineProperties(c,{Walkontable:{get:function(){return w}},__esModule:{value:!0}});var d,e,e,f,g,h,i,j,k,l=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),m=(e=a("./../../../helpers.js"),e&&e.__esModule&&e||{"default":e}),n=m.objectEach,o=m.toUpperCaseFirst,p=(e=a("./../../../helpers.js"),e&&e.__esModule&&e||{"default":e}).randomString,q=(f=a("./event.js"),f&&f.__esModule&&f||{"default":f}).WalkontableEvent,r=(g=a("./overlays.js"),g&&g.__esModule&&g||{"default":g}).WalkontableOverlays,s=(h=a("./scroll.js"),h&&h.__esModule&&h||{"default":h}).WalkontableScroll,t=(i=a("./settings.js"),i&&i.__esModule&&i||{"default":i}).WalkontableSettings,u=(j=a("./table.js"),j&&j.__esModule&&j||{"default":j}).WalkontableTable,v=(k=a("./viewport.js"),k&&k.__esModule&&k||{"default":k}).WalkontableViewport,w=function(a){var b=[];if(this.guid="wt_"+p(),a.cloneSource?(this.cloneSource=a.cloneSource,this.cloneOverlay=a.cloneOverlay,this.wtSettings=a.cloneSource.wtSettings,this.wtTable=new u(this,a.table,a.wtRootElement),this.wtScroll=new s(this),this.wtViewport=a.cloneSource.wtViewport,this.wtEvent=new q(this),this.selections=this.cloneSource.selections):(this.wtSettings=new t(this,a),this.wtTable=new u(this,a.table),this.wtScroll=new s(this),this.wtViewport=new v(this),this.wtEvent=new q(this),this.selections=this.getSetting("selections"),this.wtOverlays=new r(this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var c=0,d=this.wtTable.THEAD.childNodes[0].childNodes.length;d>c;c++)b.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(a,c){l.fastInnerText(c,b[a])}])}this.drawn=!1,this.drawInterrupted=!1};$traceurRuntime.createClass(w,{draw:function(){var a=void 0!==arguments[0]?arguments[0]:!1;return this.drawInterrupted=!1,a||l.isVisible(this.wtTable.TABLE)?this.wtTable.draw(a):this.drawInterrupted=!0,this},getCell:function(a){var b=void 0!==arguments[1]?arguments[1]:!1;if(!b)return this.wtTable.getCell(a);var c=this.wtSettings.getSetting("fixedRowsTop"),d=this.wtSettings.getSetting("fixedColumnsLeft");return a.row<c&&a.col<d?this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(a):a.row<c?this.wtOverlays.topOverlay.clone.wtTable.getCell(a):a.col<d?this.wtOverlays.leftOverlay.clone.wtTable.getCell(a):this.wtTable.getCell(a)},update:function(a,b){return this.wtSettings.update(a,b)},scrollVertical:function(a){return this.wtOverlays.topOverlay.scrollTo(a),this.getSetting("onScrollVertically"),this},scrollHorizontal:function(a){return this.wtOverlays.leftOverlay.scrollTo(a),this.getSetting("onScrollHorizontally"),this},scrollViewport:function(a){return this.wtScroll.scrollViewport(a),this},getViewport:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},getOverlayName:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"},exportSettingsAsClassNames:function(){var a=this,b={rowHeaders:["array"],columnHeaders:["array"]},c=[],d=[];n(b,function(b,e){b.indexOf("array")>-1&&a.getSetting(e).length&&d.push("ht"+o(e)),c.push("ht"+o(e))}),l.removeClass(this.wtTable.wtRootElement.parentNode,c),l.addClass(this.wtTable.wtRootElement.parentNode,d)},getSetting:function(a,b,c,d,e){return this.wtSettings.getSetting(a,b,c,d,e)},hasSetting:function(a){return this.wtSettings.has(a)},destroy:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}},{}),window.Walkontable=w},{"./../../../dom.js":27,"./../../../helpers.js":42,"./event.js":8,"./overlays.js":16,"./scroll.js":17,"./settings.js":19,"./table.js":20,"./viewport.js":22}],8:[function(a,b,c){"use strict";function d(a){var b=this,c=h(a);this.instance=a;var d=[null,null];this.dblClickTimeout=[null,null];var e,f,i=function(a){var c=b.parentCell(a.realTarget);g.hasClass(a.realTarget,"corner")?b.instance.getSetting("onCellCornerMouseDown",a,a.realTarget):c.TD&&b.instance.hasSetting("onCellMouseDown")&&b.instance.getSetting("onCellMouseDown",a,c.coords,c.TD,b.instance),2!==a.button&&c.TD&&(d[0]=c.TD,clearTimeout(b.dblClickTimeout[0]),b.dblClickTimeout[0]=setTimeout(function(){d[0]=null},1e3))},j=function(a){b.instance.touchMoving=!0},k=function(a){c.addEventListener(this,"touchmove",j),b.checkIfTouchMove=setTimeout(function(){return b.instance.touchMoving===!0?(b.instance.touchMoving=void 0,void c.removeEventListener("touchmove",j,!1)):void i(a)},30)},l=function(a){var c,d;b.instance.hasSetting("onCellMouseOver")&&(c=b.instance.wtTable.TABLE,d=g.closest(a.realTarget,["TD","TH"],c),d&&d!==f&&g.isChildOf(d,c)&&(f=d,b.instance.getSetting("onCellMouseOver",a,b.instance.wtTable.getCoords(d),d,b.instance)))},m=function(a){if(2!==a.button){var c=b.parentCell(a.realTarget);c.TD===d[0]&&c.TD===d[1]?(g.hasClass(a.realTarget,"corner")?b.instance.getSetting("onCellCornerDblClick",a,c.coords,c.TD,b.instance):b.instance.getSetting("onCellDblClick",a,c.coords,c.TD,b.instance),d[0]=null,d[1]=null):c.TD===d[0]&&(d[1]=c.TD,clearTimeout(b.dblClickTimeout[1]),b.dblClickTimeout[1]=setTimeout(function(){d[1]=null},500))}},n=function(a){clearTimeout(e),a.preventDefault(),m(a)};if(c.addEventListener(this.instance.wtTable.holder,"mousedown",i),c.addEventListener(this.instance.wtTable.TABLE,"mouseover",l),c.addEventListener(this.instance.wtTable.holder,"mouseup",m),this.instance.wtTable.holder.parentNode.parentNode&&Handsontable.mobileBrowser&&!b.instance.wtTable.isWorkingOnClone()){var o="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");c.addEventListener(this.instance.wtTable.holder,"touchstart",function(a){b.instance.touchApplied=!0,g.isChildOf(a.target,o)&&k.call(a.target,a)}),c.addEventListener(this.instance.wtTable.holder,"touchend",function(a){b.instance.touchApplied=!1,g.isChildOf(a.target,o)&&n.call(a.target,a)}),b.instance.momentumScrolling||(b.instance.momentumScrolling={}),c.addEventListener(this.instance.wtTable.holder,"scroll",function(a){clearTimeout(b.instance.momentumScrolling._timeout),b.instance.momentumScrolling.ongoing||b.instance.getSetting("onBeforeTouchScroll"),b.instance.momentumScrolling.ongoing=!0,b.instance.momentumScrolling._timeout=setTimeout(function(){b.instance.touchApplied||(b.instance.momentumScrolling.ongoing=!1,b.instance.getSetting("onAfterMomentumScroll"))},200)})}c.addEventListener(window,"resize",function(){"none"!==b.instance.getSetting("stretchH")&&b.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),c.destroy()}}Object.defineProperties(c,{WalkontableEvent:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../../../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../../../eventManager.js"),f&&f.__esModule&&f||{"default":f}).eventManager;d.prototype.parentCell=function(a){var b={},c=this.instance.wtTable.TABLE,d=g.closest(a,["TD","TH"],c);return d&&g.isChildOf(d,c)?(b.coords=this.instance.wtTable.getCoords(d),b.TD=d):g.hasClass(a,"wtBorder")&&g.hasClass(a,"current")?(b.coords=this.instance.selections.current.cellRange.highlight,b.TD=this.instance.wtTable.getCell(b.coords)):g.hasClass(a,"wtBorder")&&g.hasClass(a,"area")&&this.instance.selections.area.cellRange&&(b.coords=this.instance.selections.area.cellRange.to,b.TD=this.instance.wtTable.getCell(b.coords)),b},window.WalkontableEvent=d},{"./../../../dom.js":27,"./../../../eventManager.js":41}],9:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableColumnFilter:{get:function(){return d}},__esModule:{value:!0}});var d=function(a,b,c){this.offset=a,this.total=b,this.countTH=c};$traceurRuntime.createClass(d,{offsetted:function(a){return a+this.offset},unOffsetted:function(a){return a-this.offset},renderedToSource:function(a){return this.offsetted(a)},sourceToRendered:function(a){return this.unOffsetted(a)},offsettedTH:function(a){return a-this.countTH},unOffsettedTH:function(a){return a+this.countTH},visibleRowHeadedColumnToSourceColumn:function(a){return this.renderedToSource(this.offsettedTH(a))},sourceColumnToVisibleRowHeadedColumn:function(a){return this.unOffsettedTH(this.sourceToRendered(a))}},{}),window.WalkontableColumnFilter=d},{}],10:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableRowFilter:{get:function(){return d}},__esModule:{value:!0}});var d=function(a,b,c){this.offset=a,this.total=b,this.countTH=c};$traceurRuntime.createClass(d,{offsetted:function(a){return a+this.offset},unOffsetted:function(a){return a-this.offset},renderedToSource:function(a){return this.offsetted(a)},sourceToRendered:function(a){return this.unOffsetted(a)},offsettedTH:function(a){return a-this.countTH},unOffsettedTH:function(a){return a+this.countTH},visibleColHeadedRowToSourceRow:function(a){return this.renderedToSource(this.offsettedTH(a))},sourceRowToVisibleColHeadedRow:function(a){return this.unOffsettedTH(this.sourceToRendered(a))}},{}),window.WalkontableRowFilter=d},{}],11:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableOverlay:{get:function(){return j}},__esModule:{value:!0}});var d,e,f,g=(d=a("./../../../../dom.js"),d&&d.__esModule&&d||{"default":d}),h=(e=a("./../../../../helpers.js"),e&&e.__esModule&&e||{"default":e}).defineGetter,i=(f=a("./../../../../eventManager.js"),f&&f.__esModule&&f||{"default":f}).eventManager,j=function(a){h(this,"wot",a,{writable:!1}),this.instance=this.wot,this.type="",this.TABLE=this.wot.wtTable.TABLE,this.hider=this.wot.wtTable.hider,this.spreader=this.wot.wtTable.spreader,this.holder=this.wot.wtTable.holder,this.wtRootElement=this.wot.wtTable.wtRootElement,this.trimmingContainer=g.getTrimmingContainer(this.hider.parentNode.parentNode),this.mainTableScrollableElement=g.getScrollableElement(this.wot.wtTable.TABLE),this.needFullRender=this.shouldBeRendered(),this.isElementSizesAdjusted=!1},k=j;$traceurRuntime.createClass(j,{shouldBeRendered:function(){return!0},makeClone:function(a){if(-1===k.CLONE_TYPES.indexOf(a))throw new Error('Clone type "'+a+'" is not supported.');var b=document.createElement("DIV"),c=document.createElement("TABLE");return b.className="ht_clone_"+a+" handsontable",b.style.position="absolute",b.style.top=0,b.style.left=0,b.style.overflow="hidden",c.className=this.wot.wtTable.TABLE.className,b.appendChild(c),this.type=a,
this.wot.wtTable.wtRootElement.parentNode.appendChild(b),new Walkontable({cloneSource:this.wot,cloneOverlay:this,table:c})},refresh:function(){var a=void 0!==arguments[0]?arguments[0]:!1,b=this.shouldBeRendered();this.clone&&(this.needFullRender||b)&&this.clone.draw(a),this.needFullRender=b},destroy:function(){i(this.clone).destroy()}},{get CLONE_TOP(){return"top"},get CLONE_LEFT(){return"left"},get CLONE_CORNER(){return"corner"},get CLONE_DEBUG(){return"debug"},get CLONE_TYPES(){return[k.CLONE_TOP,k.CLONE_LEFT,k.CLONE_CORNER,k.CLONE_DEBUG]}}),window.WalkontableOverlay=j},{"./../../../../dom.js":27,"./../../../../eventManager.js":41,"./../../../../helpers.js":42}],12:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableCornerOverlay:{get:function(){return h}},__esModule:{value:!0}});var d,e,f=(d=a("./../../../../dom.js"),d&&d.__esModule&&d||{"default":d}),g=(e=a("./_base.js"),e&&e.__esModule&&e||{"default":e}).WalkontableOverlay,h=function(a){$traceurRuntime.superConstructor(i).call(this,a),this.clone=this.makeClone(g.CLONE_CORNER)},i=h;$traceurRuntime.createClass(h,{shouldBeRendered:function(){return(this.wot.getSetting("fixedRowsTop")||this.wot.getSetting("columnHeaders").length)&&(this.wot.getSetting("fixedColumnsLeft")||this.wot.getSetting("rowHeaders").length)?!0:!1},resetFixedPosition:function(){if(this.wot.wtTable.holder.parentNode){var a=this.clone.wtTable.holder.parentNode,b=f.outerHeight(this.clone.wtTable.TABLE),c=f.outerWidth(this.clone.wtTable.TABLE);if(this.trimmingContainer===window){var d,e,g=this.wot.wtTable.hider.getBoundingClientRect(),h=Math.ceil(g.top),i=Math.ceil(g.left),j=Math.ceil(g.bottom),k=Math.ceil(g.right);d=0>i&&k-a.offsetWidth>0?-i+"px":"0",e=0>h&&j-a.offsetHeight>0?-h+"px":"0",f.setOverlayPosition(a,d,e)}a.style.height=(0===b?b:b+4)+"px",a.style.width=(0===c?c:c+4)+"px"}}},{},g),window.WalkontableCornerOverlay=h},{"./../../../../dom.js":27,"./_base.js":11}],13:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableDebugOverlay:{get:function(){return h}},__esModule:{value:!0}});var d,e,f=(d=a("./../../../../dom.js"),d&&d.__esModule&&d||{"default":d}),g=(e=a("./_base.js"),e&&e.__esModule&&e||{"default":e}).WalkontableOverlay,h=function(a){$traceurRuntime.superConstructor(i).call(this,a),this.clone=this.makeClone(g.CLONE_DEBUG),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",f.addClass(this.clone.wtTable.holder.parentNode,"wtDebugVisible")},i=h;$traceurRuntime.createClass(h,{},{},g),window.WalkontableDebugOverlay=h},{"./../../../../dom.js":27,"./_base.js":11}],14:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableLeftOverlay:{get:function(){return h}},__esModule:{value:!0}});var d,e,f=(d=a("./../../../../dom.js"),d&&d.__esModule&&d||{"default":d}),g=(e=a("./_base.js"),e&&e.__esModule&&e||{"default":e}).WalkontableOverlay,h=function(a){$traceurRuntime.superConstructor(i).call(this,a),this.clone=this.makeClone(g.CLONE_LEFT)},i=h;$traceurRuntime.createClass(h,{shouldBeRendered:function(){return this.wot.getSetting("fixedColumnsLeft")||this.wot.getSetting("rowHeaders").length?!0:!1},resetFixedPosition:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var a=this.clone.wtTable.holder.parentNode,b=0;if(this.trimmingContainer===window){var c,d,e=this.wot.wtTable.hider.getBoundingClientRect(),g=Math.ceil(e.left),h=Math.ceil(e.right);d=this.wot.wtTable.hider.style.top,d=""===d?0:d,c=0>g&&h-a.offsetWidth>0?-g:0,b=c,c+="px",f.setOverlayPosition(a,c,d)}else b=this.getScrollPosition();this.adjustHeaderBordersPosition(b)}},setScrollPosition:function(a){this.mainTableScrollableElement===window?window.scrollTo(a,f.getWindowScrollTop()):this.mainTableScrollableElement.scrollLeft=a},onScroll:function(){this.wot.getSetting("onScrollHorizontally")},sumCellSizes:function(a,b){for(var c=0,d=this.wot.wtSettings.defaultColumnWidth;b>a;)c+=this.wot.wtTable.getStretchedColumnWidth(a)||d,a++;return c},adjustElementsSize:function(){var a=void 0!==arguments[0]?arguments[0]:!1;(this.needFullRender||a)&&(this.adjustRootElementSize(),this.adjustRootChildsSize(),a||(this.isElementSizesAdjusted=!0))},adjustRootElementSize:function(){var a,b=this.wot.wtTable.holder,c=b.clientHeight!==b.offsetHeight?f.getScrollbarWidth():0,d=this.clone.wtTable.holder.parentNode,e=d.style;this.trimmingContainer!==window&&(e.height=this.wot.wtViewport.getWorkspaceHeight()-c+"px"),this.clone.wtTable.holder.style.height=e.height,a=f.outerWidth(this.clone.wtTable.TABLE),e.width=(0===a?a:a+4)+"px"},adjustRootChildsSize:function(){var a=f.getScrollbarWidth();this.clone.wtTable.hider.style.height=this.hider.style.height,this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height,0===a&&(a=30),this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+a+"px"},applyToDOM:function(){var a=this.wot.getSetting("totalColumns");if(this.isElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==a)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""},scrollTo:function(a,b){var c=this.getTableParentOffset(),d=this.wot.cloneSource?this.wot.cloneSource:this.wot,e=d.wtTable.holder,g=0;b&&e.offsetWidth!==e.clientWidth&&(g=f.getScrollbarWidth()),b?(c+=this.sumCellSizes(0,a+1),c-=this.wot.wtViewport.getViewportWidth()):c+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),a),c+=g,this.setScrollPosition(c)},getTableParentOffset:function(){return this.trimmingContainer===window?this.wot.wtTable.holderOffset.left:0},getScrollPosition:function(){return f.getScrollLeft(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(a){var b=this.wot.wtTable.holder.parentNode,c=this.wot.getSetting("rowHeaders"),d=this.wot.getSetting("fixedColumnsLeft");if(d&&!c.length)f.addClass(b,"innerBorderLeft");else if(!d&&c.length){var e=f.hasClass(b,"innerBorderLeft");a?f.addClass(b,"innerBorderLeft"):f.removeClass(b,"innerBorderLeft"),(!e&&a||e&&!a)&&this.wot.wtOverlays.adjustElementsSize()}}},{},g),window.WalkontableLeftOverlay=h},{"./../../../../dom.js":27,"./_base.js":11}],15:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableTopOverlay:{get:function(){return h}},__esModule:{value:!0}});var d,e,f=(d=a("./../../../../dom.js"),d&&d.__esModule&&d||{"default":d}),g=(e=a("./_base.js"),e&&e.__esModule&&e||{"default":e}).WalkontableOverlay,h=function(a){$traceurRuntime.superConstructor(i).call(this,a),this.clone=this.makeClone(g.CLONE_TOP)},i=h;$traceurRuntime.createClass(h,{shouldBeRendered:function(){return this.wot.getSetting("fixedRowsTop")||this.wot.getSetting("columnHeaders").length?!0:!1},resetFixedPosition:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var a=this.clone.wtTable.holder.parentNode,b=0;if(this.wot.wtOverlays.leftOverlay.trimmingContainer===window){var c,d,e=this.wot.wtTable.hider.getBoundingClientRect(),g=Math.ceil(e.top),h=Math.ceil(e.bottom);c=this.wot.wtTable.hider.style.left,c=""===c?0:c,d=0>g&&h-a.offsetHeight>0?-g:0,b=d,d+="px",f.setOverlayPosition(a,c,d)}else b=this.getScrollPosition();this.adjustHeaderBordersPosition(b)}},setScrollPosition:function(a){this.mainTableScrollableElement===window?window.scrollTo(f.getWindowScrollLeft(),a):this.mainTableScrollableElement.scrollTop=a},onScroll:function(){this.wot.getSetting("onScrollVertically")},sumCellSizes:function(a,b){for(var c=0,d=this.wot.wtSettings.settings.defaultRowHeight;b>a;)c+=this.wot.wtTable.getRowHeight(a)||d,a++;return c},adjustElementsSize:function(){var a=void 0!==arguments[0]?arguments[0]:!1;(this.needFullRender||a)&&(this.adjustRootElementSize(),this.adjustRootChildsSize(),a||(this.isElementSizesAdjusted=!0))},adjustRootElementSize:function(){var a,b=this.wot.wtTable.holder,c=b.clientWidth!==b.offsetWidth?f.getScrollbarWidth():0,d=this.clone.wtTable.holder.parentNode,e=d.style;this.trimmingContainer!==window&&(e.width=this.wot.wtViewport.getWorkspaceWidth()-c+"px"),this.clone.wtTable.holder.style.width=e.width,a=f.outerHeight(this.clone.wtTable.TABLE),e.height=(0===a?a:a+4)+"px"},adjustRootChildsSize:function(){var a=f.getScrollbarWidth();this.clone.wtTable.hider.style.width=this.hider.style.width,this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width,0===a&&(a=30),this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+a+"px"},applyToDOM:function(){var a=this.wot.getSetting("totalRows");if(this.isElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==a)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.left=""},scrollTo:function(a,b){var c=this.getTableParentOffset(),d=this.wot.cloneSource?this.wot.cloneSource:this.wot,e=d.wtTable.holder,g=0;b&&e.offsetHeight!==e.clientHeight&&(g=f.getScrollbarWidth()),b?(c+=this.sumCellSizes(0,a+1),c-=this.wot.wtViewport.getViewportHeight(),c+=1):c+=this.sumCellSizes(this.wot.getSetting("fixedRowsTop"),a),c+=g,this.setScrollPosition(c)},getTableParentOffset:function(){return this.mainTableScrollableElement===window?this.wot.wtTable.holderOffset.top:0},getScrollPosition:function(){return f.getScrollTop(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(a){if(0===this.wot.getSetting("fixedRowsTop")&&this.wot.getSetting("columnHeaders").length>0){var b=this.wot.wtTable.holder.parentNode,c=f.hasClass(b,"innerBorderTop");a?f.addClass(b,"innerBorderTop"):f.removeClass(b,"innerBorderTop"),(!c&&a||c&&!a)&&this.wot.wtOverlays.adjustElementsSize()}if(0===this.wot.getSetting("rowHeaders").length){var d=this.clone.wtTable.THEAD.querySelector("th:nth-of-type(2)");d&&(d.style["border-left-width"]=0)}}},{},g),window.WalkontableTopOverlay=h},{"./../../../../dom.js":27,"./_base.js":11}],16:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableOverlays:{get:function(){return p}},__esModule:{value:!0}});var d,e,f,g,h,i,j=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),k=(e=a("./../../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).EventManager,l=(f=a("./overlay/corner.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCornerOverlay,m=(g=a("./overlay/debug.js"),g&&g.__esModule&&g||{"default":g}).WalkontableDebugOverlay,n=(h=a("./overlay/left.js"),h&&h.__esModule&&h||{"default":h}).WalkontableLeftOverlay,o=(i=a("./overlay/top.js"),i&&i.__esModule&&i||{"default":i}).WalkontableTopOverlay,p=function(a){this.wot=a,this.instance=this.wot,this.eventManager=new k(this.wot),this.wot.update("scrollbarWidth",j.getScrollbarWidth()),this.wot.update("scrollbarHeight",j.getScrollbarWidth()),this.mainTableScrollableElement=j.getScrollableElement(this.wot.wtTable.TABLE),this.topOverlay=new o(this.wot),this.leftOverlay=new n(this.wot),this.topOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.topLeftCornerOverlay=new l(this.wot)),this.wot.getSetting("debug")&&(this.debug=new m(this.wot)),this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},left:{top:0,left:null}},this.registerListeners()};$traceurRuntime.createClass(p,{refreshAll:function(){if(this.wot.drawn){if(!this.wot.wtTable.holder.parentNode)return void this.destroy();this.wot.draw(!0),this.topOverlay.onScroll(),this.leftOverlay.onScroll()}},registerListeners:function(){var a=this;this.eventManager.addEventListener(document.documentElement,"keydown",function(){return a.onKeyDown()}),this.eventManager.addEventListener(document.documentElement,"keyup",function(){return a.onKeyUp()}),this.eventManager.addEventListener(document,"visibilitychange",function(){return a.onKeyUp()}),this.eventManager.addEventListener(this.mainTableScrollableElement,"scroll",function(b){return a.onTableScroll(b)}),this.topOverlay.needFullRender&&(this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder,"scroll",function(b){return a.onTableScroll(b)}),this.eventManager.addEventListener(this.topOverlay.clone.wtTable.holder,"wheel",function(b){return a.onTableScroll(b)})),this.leftOverlay.needFullRender&&(this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder,"scroll",function(b){return a.onTableScroll(b)}),this.eventManager.addEventListener(this.leftOverlay.clone.wtTable.holder,"wheel",function(b){return a.onTableScroll(b)})),this.topOverlay.trimmingContainer!==window&&this.leftOverlay.trimmingContainer!==window&&this.eventManager.addEventListener(window,"wheel",function(b){var c,d=b.wheelDeltaY||b.deltaY,e=b.wheelDeltaX||b.deltaX;a.topOverlay.clone.wtTable.holder.contains(b.realTarget)?c="top":a.leftOverlay.clone.wtTable.holder.contains(b.realTarget)&&(c="left"),"top"==c&&0!==d?b.preventDefault():"left"==c&&0!==e&&b.preventDefault()})},onTableScroll:function(a){Handsontable.mobileBrowser||(!this.keyPressed||this.mainTableScrollableElement===window||a.target.contains(this.mainTableScrollableElement))&&("scroll"===a.type?this.syncScrollPositions(a):this.translateMouseWheelToScroll(a))},onKeyDown:function(){this.keyPressed=!0},onKeyUp:function(){this.keyPressed=!1},translateMouseWheelToScroll:function(a){for(var b,c=this.topOverlay.clone.wtTable.holder,d=this.leftOverlay.clone.wtTable.holder,e={type:"wheel"},f=a.target,g=a.wheelDeltaY||-1*a.deltaY,h=a.wheelDeltaX||-1*a.deltaX;f!=document&&null!=f;){if(f.className.indexOf("wtHolder")>-1){b=f;break}f=f.parentNode}return e.target=b,b==c?this.syncScrollPositions(e,-.2*g):b==d&&this.syncScrollPositions(e,-.2*h),!1},syncScrollPositions:function(a){var b=void 0!==arguments[1]?arguments[1]:null;if(!this.destroyed){if(0===arguments.length)return void this.syncScrollWithMaster();var c,d,e=this.mainTableScrollableElement,f=a.target,g=0,h=!1;this.topOverlay.needFullRender&&(c=this.topOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&(d=this.leftOverlay.clone.wtTable.holder),f===document&&(f=window),f===e?(g=j.getScrollLeft(f),this.overlayScrollPositions.master.left!==g&&(this.overlayScrollPositions.master.left=g,h=!0,c&&(c.scrollLeft=g)),g=j.getScrollTop(f),this.overlayScrollPositions.master.top!==g&&(this.overlayScrollPositions.master.top=g,h=!0,d&&(d.scrollTop=g))):f===c?(g=j.getScrollLeft(f),this.overlayScrollPositions.top.left!==g&&(this.overlayScrollPositions.top.left=g,h=!0,e.scrollLeft=g),null!==b&&(h=!0,e.scrollTop+=b)):f===d&&(g=j.getScrollTop(f),this.overlayScrollPositions.left.top!==g&&(this.overlayScrollPositions.left.top=g,h=!0,e.scrollTop=g),null!==b&&(h=!0,e.scrollLeft+=b)),!this.keyPressed&&h&&"scroll"===a.type&&this.refreshAll()}},syncScrollWithMaster:function(){var a=this.topOverlay.mainTableScrollableElement;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=a.scrollLeft),this.leftOverlay.needFullRender&&(this.leftOverlay.clone.wtTable.holder.scrollTop=a.scrollTop)},destroy:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.destroy(),this.debug&&this.debug.destroy(),this.destroyed=!0},refresh:function(){var a=void 0!==arguments[0]?arguments[0]:!1;if(this.topOverlay.isElementSizesAdjusted&&this.leftOverlay.isElementSizesAdjusted){var b=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement,c=b.clientWidth,d=b.clientHeight;(c!==this.spreaderLastSize.width||d!==this.spreaderLastSize.height)&&(this.spreaderLastSize.width=c,this.spreaderLastSize.height=d,this.adjustElementsSize())}this.leftOverlay.refresh(a),this.topOverlay.refresh(a),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.refresh(a),this.debug&&this.debug.refresh(a)},adjustElementsSize:function(){var a=void 0!==arguments[0]?arguments[0]:!1,b=this.wot.getSetting("totalColumns"),c=this.wot.getSetting("totalRows"),d=this.wot.wtViewport.getRowHeaderWidth(),e=this.wot.wtViewport.getColumnHeaderHeight(),f=this.wot.wtTable.hider.style;f.width=d+this.leftOverlay.sumCellSizes(0,b)+"px",f.height=e+this.topOverlay.sumCellSizes(0,c)+1+"px",this.topOverlay.adjustElementsSize(a),this.leftOverlay.adjustElementsSize(a)},applyToDOM:function(){this.topOverlay.isElementSizesAdjusted&&this.leftOverlay.isElementSizesAdjusted||this.adjustElementsSize(),this.topOverlay.applyToDOM(),this.leftOverlay.applyToDOM()}},{}),window.WalkontableOverlays=p},{"./../../../dom.js":27,"./../../../eventManager.js":41,"./overlay/corner.js":12,"./overlay/debug.js":13,"./overlay/left.js":14,"./overlay/top.js":15}],17:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableScroll:{get:function(){return d}},__esModule:{value:!0}});var d=function(a){this.wot=a,this.instance=a};$traceurRuntime.createClass(d,{scrollViewport:function(a){if(this.wot.drawn){var b=this.wot.getSetting("totalRows"),c=this.wot.getSetting("totalColumns");if(a.row<0||a.row>b-1)throw new Error("row "+a.row+" does not exist");if(a.col<0||a.col>c-1)throw new Error("column "+a.col+" does not exist");a.row>this.instance.wtTable.getLastVisibleRow()?this.wot.wtOverlays.topOverlay.scrollTo(a.row,!0):a.row>=this.instance.getSetting("fixedRowsTop")&&a.row<this.instance.wtTable.getFirstVisibleRow()&&this.wot.wtOverlays.topOverlay.scrollTo(a.row),a.col>this.instance.wtTable.getLastVisibleColumn()?this.wot.wtOverlays.leftOverlay.scrollTo(a.col,!0):a.col>=this.instance.getSetting("fixedColumnsLeft")&&a.col<this.instance.wtTable.getFirstVisibleColumn()&&this.wot.wtOverlays.leftOverlay.scrollTo(a.col)}}},{}),window.WalkontableScroll=d},{}],18:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableSelection:{get:function(){return l}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./border.js"),e&&e.__esModule&&e||{"default":e}).WalkontableBorder,j=(f=a("./cell/coords.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellCoords,k=(g=a("./cell/range.js"),g&&g.__esModule&&g||{"default":g}).WalkontableCellRange,l=function(a,b){this.settings=a,this.cellRange=b||null,this.instanceBorders={}};$traceurRuntime.createClass(l,{getBorder:function(a){return this.instanceBorders[a.guid]?this.instanceBorders[a.guid]:void(this.instanceBorders[a.guid]=new i(a,this.settings))},isEmpty:function(){return null===this.cellRange},add:function(a){this.isEmpty()?this.cellRange=new k(a,a,a):this.cellRange.expand(a)},replace:function(a,b){if(!this.isEmpty()){if(this.cellRange.from.isEqual(a))return this.cellRange.from=b,!0;if(this.cellRange.to.isEqual(a))return this.cellRange.to=b,!0}return!1},clear:function(){this.cellRange=null},getCorners:function(){var a=this.cellRange.getTopLeftCorner(),b=this.cellRange.getBottomRightCorner();return[a.row,a.col,b.row,b.col]},addClassAtCoords:function(a,b,c,d){var e=a.wtTable.getCell(new j(b,c));"object"==typeof e&&h.addClass(e,d)},draw:function(a){if(this.isEmpty()){if(this.settings.border){var b=this.getBorder(a);b&&b.disappear()}}else{for(var c,d,e,f=a.wtTable.getRenderedRowsCount(),g=a.wtTable.getRenderedColumnsCount(),i=this.getCorners(),j=0;g>j;j++)d=a.wtTable.columnFilter.renderedToSource(j),d>=i[1]&&d<=i[3]&&(e=a.wtTable.getColumnHeader(d),e&&this.settings.highlightColumnClassName&&h.addClass(e,this.settings.highlightColumnClassName));for(var k=0;f>k;k++){c=a.wtTable.rowFilter.renderedToSource(k),c>=i[0]&&c<=i[2]&&(e=a.wtTable.getRowHeader(c),e&&this.settings.highlightRowClassName&&h.addClass(e,this.settings.highlightRowClassName));for(var l=0;g>l;l++)d=a.wtTable.columnFilter.renderedToSource(l),c>=i[0]&&c<=i[2]&&d>=i[1]&&d<=i[3]?this.settings.className&&this.addClassAtCoords(a,c,d,this.settings.className):c>=i[0]&&c<=i[2]?this.settings.highlightRowClassName&&this.addClassAtCoords(a,c,d,this.settings.highlightRowClassName):d>=i[1]&&d<=i[3]&&this.settings.highlightColumnClassName&&this.addClassAtCoords(a,c,d,this.settings.highlightColumnClassName)}if(a.getSetting("onBeforeDrawBorders",i,this.settings.className),this.settings.border){var m=this.getBorder(a);m&&m.appear(i)}}}},{}),window.WalkontableSelection=l},{"./../../../dom.js":27,"./border.js":2,"./cell/coords.js":5,"./cell/range.js":6}],19:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableSettings:{get:function(){return f}},__esModule:{value:!0}});var d,e=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),f=function(a,b){var c=this;this.wot=a,this.instance=a,this.defaults={table:void 0,debug:!1,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(a,b,d){var f=c.getSetting("data",a,b);e.fastInnerText(d,void 0===f||null===f?"":f)},columnWidth:function(a){},rowHeight:function(a){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1},this.settings={};for(var d in this.defaults)if(this.defaults.hasOwnProperty(d))if(void 0!==b[d])this.settings[d]=b[d];else{if(void 0===this.defaults[d])throw new Error('A required setting "'+d+'" was not provided');this.settings[d]=this.defaults[d]}};$traceurRuntime.createClass(f,{update:function(a,b){if(void 0===b)for(var c in a)a.hasOwnProperty(c)&&(this.settings[c]=a[c]);else this.settings[a]=b;return this.wot},getSetting:function(a,b,c,d,e){return"function"==typeof this.settings[a]?this.settings[a](b,c,d,e):void 0!==b&&Array.isArray(this.settings[a])?this.settings[a][b]:this.settings[a]},has:function(a){return!!this.settings[a]}},{}),window.WalkontableSettings=f},{"./../../../dom.js":27}],20:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableTable:{get:function(){return w}},__esModule:{value:!0}});var d,e,f,g,h,i,j,k,l,m,n=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),o=(e=a("./cell/coords.js"),e&&e.__esModule&&e||{"default":e}).WalkontableCellCoords,p=((f=a("./cell/range.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellRange,(g=a("./filter/column.js"),g&&g.__esModule&&g||{"default":g}).WalkontableColumnFilter),q=(h=a("./overlay/corner.js"),h&&h.__esModule&&h||{"default":h}).WalkontableCornerOverlay,r=(i=a("./overlay/debug.js"),i&&i.__esModule&&i||{"default":i}).WalkontableDebugOverlay,s=(j=a("./overlay/left.js"),j&&j.__esModule&&j||{"default":j}).WalkontableLeftOverlay,t=(k=a("./filter/row.js"),k&&k.__esModule&&k||{"default":k}).WalkontableRowFilter,u=(l=a("./tableRenderer.js"),l&&l.__esModule&&l||{"default":l}).WalkontableTableRenderer,v=(m=a("./overlay/top.js"),m&&m.__esModule&&m||{"default":m}).WalkontableTopOverlay,w=function(a,b){this.wot=a,this.instance=this.wot,this.TABLE=b,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,n.removeTextNodes(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null};$traceurRuntime.createClass(w,{fixTableDomTree:function(){this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=document.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=document.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=document.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length&&this.THEAD.appendChild(document.createElement("TR"))},createSpreader:function(a){var b,c=a.parentNode;return c&&1===c.nodeType&&n.hasClass(c,"wtHolder")||(b=document.createElement("div"),b.className="wtSpreader",c&&c.insertBefore(b,a),b.appendChild(a)),b.style.position="relative",b},createHider:function(a){var b,c=a.parentNode;return c&&1===c.nodeType&&n.hasClass(c,"wtHolder")||(b=document.createElement("div"),b.className="wtHider",c&&c.insertBefore(b,a),b.appendChild(a)),b},createHolder:function(a){var b,c=a.parentNode;return c&&1===c.nodeType&&n.hasClass(c,"wtHolder")||(b=document.createElement("div"),b.style.position="relative",b.className="wtHolder",c&&c.insertBefore(b,a),this.isWorkingOnClone()||(b.parentNode.className+="ht_master handsontable"),b.appendChild(a)),b},alignOverlaysWithTrimmingContainer:function(){var a=n.getTrimmingContainer(this.wtRootElement);this.isWorkingOnClone()||(this.holder.parentNode.style.position="relative",a!==window?(this.holder.style.width=n.getStyle(a,"width"),this.holder.style.height=n.getStyle(a,"height"),this.holder.style.overflow=""):(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible"))},isWorkingOnClone:function(){return!!this.wot.cloneSource},draw:function(a){if(this.isWorkingOnClone()||(this.holderOffset=n.offset(this.holder),a=this.wot.wtViewport.createRenderCalculators(a)),a)this.isWorkingOnClone()||this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays&&this.wot.wtOverlays.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.wot.cloneSource.wtTable.tableOffset:this.tableOffset=n.offset(this.TABLE);var b;b=this.wot.cloneOverlay instanceof r||this.wot.cloneOverlay instanceof v||this.wot.cloneOverlay instanceof q?0:this.wot.wtViewport.rowsRenderCalculator.startRow;var c;c=this.wot.cloneOverlay instanceof r||this.wot.cloneOverlay instanceof s||this.wot.cloneOverlay instanceof q?0:this.wot.wtViewport.columnsRenderCalculator.startColumn,this.rowFilter=new t(b,this.wot.getSetting("totalRows"),this.wot.getSetting("columnHeaders").length),this.columnFilter=new p(c,this.wot.getSetting("totalColumns"),this.wot.getSetting("rowHeaders").length),this._doDraw(),this.alignOverlaysWithTrimmingContainer()}return this.refreshSelections(a),this.isWorkingOnClone()||(this.wot.wtOverlays.topOverlay.resetFixedPosition(),this.wot.wtOverlays.leftOverlay.resetFixedPosition(),this.wot.wtOverlays.topLeftCornerOverlay&&this.wot.wtOverlays.topLeftCornerOverlay.resetFixedPosition()),this.wot.drawn=!0,this},_doDraw:function(){var a=new u(this);a.render()},removeClassFromCells:function(a){for(var b=this.TABLE.querySelectorAll("."+a),c=0,d=b.length;d>c;c++)n.removeClass(b[c],a)},refreshSelections:function(a){if(this.wot.selections){var b=this.wot.selections.length;if(a)for(var c=0;b>c;c++)this.wot.selections[c].settings.className&&this.removeClassFromCells(this.wot.selections[c].settings.className),this.wot.selections[c].settings.highlightRowClassName&&this.removeClassFromCells(this.wot.selections[c].settings.highlightRowClassName),this.wot.selections[c].settings.highlightColumnClassName&&this.removeClassFromCells(this.wot.selections[c].settings.highlightColumnClassName);for(var d=0;b>d;d++)this.wot.selections[d].draw(this.wot,a)}},getCell:function(a){if(this.isRowBeforeRenderedRows(a.row))return-1;if(this.isRowAfterRenderedRows(a.row))return-2;var b=this.TBODY.childNodes[this.rowFilter.sourceToRendered(a.row)];return b?b.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a.col)]:void 0},getColumnHeader:function(a){var b=void 0!==arguments[1]?arguments[1]:0,c=this.THEAD.childNodes[b];return c?c.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a)]:void 0},getRowHeader:function(a){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var b=this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)];return b?b.childNodes[0]:void 0},getCoords:function(a){var b=a.parentNode,c=n.index(b);return c=b.parentNode===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(c):this.rowFilter.renderedToSource(c),new o(c,this.columnFilter.visibleRowHeadedColumnToSourceColumn(a.cellIndex))},getTrForRow:function(a){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)]},getFirstRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow},getFirstVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow},getFirstRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn},getFirstVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn},getLastRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow},getLastVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow},getLastRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn},getLastVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn},isRowBeforeRenderedRows:function(a){return this.rowFilter.sourceToRendered(a)<0&&a>=0},isRowAfterViewport:function(a){return a>this.getLastVisibleRow()},isRowAfterRenderedRows:function(a){return a>this.getLastRenderedRow()},isColumnBeforeViewport:function(a){return this.columnFilter.sourceToRendered(a)<0&&a>=0},isColumnAfterViewport:function(a){return a>this.getLastVisibleColumn()},isLastRowFullyVisible:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()},isLastColumnFullyVisible:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()},getRenderedColumnsCount:function(){return this.wot.cloneOverlay instanceof r?this.wot.getSetting("totalColumns"):this.wot.cloneOverlay instanceof s||this.wot.cloneOverlay instanceof q?this.wot.getSetting("fixedColumnsLeft"):this.wot.wtViewport.columnsRenderCalculator.count},getRenderedRowsCount:function(){return this.wot.cloneOverlay instanceof r?this.wot.getSetting("totalRows"):this.wot.cloneOverlay instanceof v||this.wot.cloneOverlay instanceof q?this.wot.getSetting("fixedRowsTop"):this.wot.wtViewport.rowsRenderCalculator.count},getVisibleRowsCount:function(){return this.wot.wtViewport.rowsVisibleCalculator.count},allRowsInViewport:function(){return this.wot.getSetting("totalRows")==this.getVisibleRowsCount()},getRowHeight:function(a){var b=this.wot.wtSettings.settings.rowHeight(a),c=this.wot.wtViewport.oversizedRows[a];return void 0!==c&&(b=b?Math.max(b,c):c),b},getColumnHeaderHeight:function(a){var b=this.wot.wtSettings.settings.defaultRowHeight,c=this.wot.wtViewport.oversizedColumnHeaders[a];return void 0!==c&&(b=b?Math.max(b,c):c),b},getVisibleColumnsCount:function(){return this.wot.wtViewport.columnsVisibleCalculator.count},allColumnsInViewport:function(){return this.wot.getSetting("totalColumns")==this.getVisibleColumnsCount();
},getColumnWidth:function(a){var b=this.wot.wtSettings.settings.columnWidth;return"function"==typeof b?b=b(a):"object"==typeof b&&(b=b[a]),b||this.wot.wtSettings.settings.defaultColumnWidth},getStretchedColumnWidth:function(a){var b=this.getColumnWidth(a),c=this.wot.wtViewport.columnsRenderCalculator;if(c){var d=c.getStretchedColumnWidth(a,b);d&&(b=d)}return b}},{}),window.WalkontableTable=w},{"./../../../dom.js":27,"./cell/coords.js":5,"./cell/range.js":6,"./filter/column.js":9,"./filter/row.js":10,"./overlay/corner.js":12,"./overlay/debug.js":13,"./overlay/left.js":14,"./overlay/top.js":15,"./tableRenderer.js":21}],21:[function(a,b,c){"use strict";function d(a,b){var c=document.createElement("TH");return b.insertBefore(c,a),b.removeChild(a),c}function e(a,b){var c=document.createElement("TD");return b.insertBefore(c,a),b.removeChild(a),c}Object.defineProperties(c,{WalkontableTableRenderer:{get:function(){return i}},__esModule:{value:!0}});var f,g=(f=a("./../../../dom.js"),f&&f.__esModule&&f||{"default":f}),h={},i=function(a){this.wtTable=a,this.wot=a.instance,this.instance=a.instance,this.rowFilter=a.rowFilter,this.columnFilter=a.columnFilter,this.TABLE=a.TABLE,this.THEAD=a.THEAD,this.TBODY=a.TBODY,this.COLGROUP=a.COLGROUP,this.rowHeaders=[],this.rowHeaderCount=0,this.columnHeaders=[],this.columnHeaderCount=0,this.fixedRowsTop=0};$traceurRuntime.createClass(i,{render:function(){this.wtTable.isWorkingOnClone()||this.wot.getSetting("beforeDraw",!0),this.rowHeaders=this.wot.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.wot.getSetting("fixedRowsTop"),this.columnHeaders=this.wot.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var a,b=this.wtTable.getRenderedColumnsCount(),c=this.wtTable.getRenderedRowsCount(),d=this.wot.getSetting("totalColumns"),e=this.wot.getSetting("totalRows"),f=!1;if(d>0&&(this.adjustAvailableNodes(),f=!0,this.renderColumnHeaders(),this.renderRows(e,c,b),this.wtTable.isWorkingOnClone()||(a=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null),this.adjustColumnHeaderHeights(),this.adjustColumnWidths(b),this.markOversizedColumns()),f||this.adjustAvailableNodes(),this.removeRedundantRows(c),!this.wtTable.isWorkingOnClone()){if(this.markOversizedRows(),this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM(),a!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;for(var g=this.wtTable.getFirstRenderedColumn(),h=this.wtTable.getLastRenderedColumn(),i=g;h>i;i++){var j=this.wtTable.getStretchedColumnWidth(i),k=this.columnFilter.sourceToRendered(i);this.COLGROUP.childNodes[k+this.rowHeaderCount].style.width=j+"px"}}this.wot.getSetting("onDraw",!0)}},removeRedundantRows:function(a){for(;this.wtTable.tbodyChildrenLength>a;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},renderRows:function(a,b,c){for(var d,e,f=0,g=this.rowFilter.renderedToSource(f),h=this.wtTable.isWorkingOnClone();a>g&&g>=0;){if(f>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==b&&f===b)break;if(e=this.getOrCreateTrForRow(f,e),this.renderRowHeaders(g,e),this.adjustColumns(e,c+this.rowHeaderCount),d=this.renderCells(g,e,c),h||this.resetOversizedRow(g),e.firstChild){var i=this.wot.wtTable.getRowHeight(g);i?(i--,e.firstChild.style.height=i+"px"):e.firstChild.style.height=""}f++,g=this.rowFilter.renderedToSource(f)}},resetOversizedRow:function(a){this.wot.getSetting("externalRowCalculator")||this.wot.wtViewport.oversizedRows&&this.wot.wtViewport.oversizedRows[a]&&(this.wot.wtViewport.oversizedRows[a]=void 0)},markOversizedRows:function(){if(!this.wot.getSetting("externalRowCalculator")){var a,b,c,d,e,f=this.instance.wtTable.TBODY.childNodes.length,h=f*this.instance.wtSettings.settings.defaultRowHeight,i=g.innerHeight(this.instance.wtTable.TBODY)-1;if(h!==i)for(;f;)f--,c=this.instance.wtTable.rowFilter.renderedToSource(f),a=this.instance.wtTable.getRowHeight(c),d=this.instance.wtTable.getTrForRow(c),e=d.querySelector("th"),b=e?g.innerHeight(e):g.innerHeight(d)-1,(!a&&this.instance.wtSettings.settings.defaultRowHeight<b||b>a)&&(this.instance.wtViewport.oversizedRows[c]=++b)}},markOversizedColumns:function(){var a=this.wot.getOverlayName();if(this.columnHeaderCount&&!h[a]&&!this.wtTable.isWorkingOnClone()){for(var b=this.wtTable.getRenderedColumnsCount(),c=0;c<this.columnHeaderCount;c++)for(var d=-1*this.rowHeaderCount;b>d;d++)this.markIfOversizedColumnHeader(d);h[a]=!0}},adjustColumnHeaderHeights:function(){for(var a=this.wot.getSetting("columnHeaders"),b=this.wot.wtTable.THEAD.childNodes,c=this.wot.wtViewport.oversizedColumnHeaders,d=0,e=a.length;e>d;d++)if(c[d]){if(0===b[d].childNodes.length)return;b[d].childNodes[0].style.height=c[d]+"px"}},markIfOversizedColumnHeader:function(a){for(var b,c,d,e=this.wot.wtTable.columnFilter.renderedToSource(a),f=this.columnHeaderCount,h=this.wot.wtSettings.settings.defaultRowHeight;f;)f--,b=this.wot.wtTable.getColumnHeaderHeight(f),c=this.wot.wtTable.getColumnHeader(e,f),c&&(d=g.innerHeight(c),(!b&&d>h||d>b)&&(this.wot.wtViewport.oversizedColumnHeaders[f]=d))},renderCells:function(a,b,c){for(var d,f,h=0;c>h;h++)f=this.columnFilter.renderedToSource(h),d=0===h?b.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(f)]:d.nextSibling,"TH"==d.nodeName&&(d=e(d,b)),g.hasClass(d,"hide")||(d.className=""),d.removeAttribute("style"),this.wot.wtSettings.settings.cellRenderer(a,f,d);return d},adjustColumnWidths:function(a){var b=0,c=this.wot.cloneSource?this.wot.cloneSource:this.wot,d=c.wtTable.holder;d.offsetHeight<d.scrollHeight&&(b=g.getScrollbarWidth()),this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-b);for(var e=0;a>e;e++){var f=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(e));this.COLGROUP.childNodes[e+this.rowHeaderCount].style.width=f+"px"}},appendToTbody:function(a){this.TBODY.appendChild(a),this.wtTable.tbodyChildrenLength++},getOrCreateTrForRow:function(a,b){var c;return a>=this.wtTable.tbodyChildrenLength?(c=this.createRow(),this.appendToTbody(c)):c=0===a?this.TBODY.firstChild:b.nextSibling,c},createRow:function(){for(var a=document.createElement("TR"),b=0;b<this.rowHeaderCount;b++)a.appendChild(document.createElement("TH"));return a},renderRowHeader:function(a,b,c){c.className="",c.removeAttribute("style"),this.rowHeaders[b](a,c,b)},renderRowHeaders:function(a,b){for(var c=b.firstChild,e=0;e<this.rowHeaderCount;e++)c?"TD"==c.nodeName&&(c=d(c,b)):(c=document.createElement("TH"),b.appendChild(c)),this.renderRowHeader(a,e,c),c=c.nextSibling},adjustAvailableNodes:function(){this.adjustColGroups(),this.adjustThead()},renderColumnHeaders:function(){this.wot.getOverlayName();if(this.columnHeaderCount)for(var a=this.wtTable.getRenderedColumnsCount(),b=0;b<this.columnHeaderCount;b++)for(var c=this.getTrForColumnHeaders(b),d=-1*this.rowHeaderCount;a>d;d++){var e=this.columnFilter.renderedToSource(d);this.renderColumnHeader(b,e,c.childNodes[d+this.rowHeaderCount])}},adjustColGroups:function(){for(var a=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<a+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>a+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--;this.rowHeaderCount&&g.addClass(this.COLGROUP.childNodes[0],"rowHeader")},adjustThead:function(){var a=this.wtTable.getRenderedColumnsCount(),b=this.THEAD.firstChild;if(this.columnHeaders.length){for(var c=0,d=this.columnHeaders.length;d>c;c++){for(b=this.THEAD.childNodes[c],b||(b=document.createElement("TR"),this.THEAD.appendChild(b)),this.theadChildrenLength=b.childNodes.length;this.theadChildrenLength<a+this.rowHeaderCount;)b.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>a+this.rowHeaderCount;)b.removeChild(b.lastChild),this.theadChildrenLength--}var e=this.THEAD.childNodes.length;if(e>this.columnHeaders.length)for(var f=this.columnHeaders.length;e>f;f++)this.THEAD.removeChild(this.THEAD.lastChild)}else b&&g.empty(b)},getTrForColumnHeaders:function(a){return this.THEAD.childNodes[a]},renderColumnHeader:function(a,b,c){return c.className="",c.removeAttribute("style"),this.columnHeaders[a](b,c,a)},adjustColumns:function(a,b){for(var c=a.childNodes.length;b>c;){var d=document.createElement("TD");a.appendChild(d),c++}for(;c>b;)a.removeChild(a.lastChild),c--},removeRedundantColumns:function(a){for(;this.wtTable.tbodyChildrenLength>a;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}},{}),window.WalkontableTableRenderer=i},{"./../../../dom.js":27}],22:[function(a,b,c){"use strict";Object.defineProperties(c,{WalkontableViewport:{get:function(){return l}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../../../dom.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./../../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).EventManager,j=(f=a("./calculator/viewportColumns.js"),f&&f.__esModule&&f||{"default":f}).WalkontableViewportColumnsCalculator,k=(g=a("./calculator/viewportRows.js"),g&&g.__esModule&&g||{"default":g}).WalkontableViewportRowsCalculator,l=function(a){var b=this;this.wot=a,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new i(this.wot),this.eventManager.addEventListener(window,"resize",function(){b.clientHeight=b.getWorkspaceHeight()})};$traceurRuntime.createClass(l,{getWorkspaceHeight:function(){var a,b=this.instance.wtOverlays.topOverlay.trimmingContainer,c=0;return b===window?c=document.documentElement.clientHeight:(a=h.outerHeight(b),c=a>0&&b.clientHeight>0?b.clientHeight:1/0),c},getWorkspaceWidth:function(){var a,b,c=this.instance.getSetting("totalColumns"),d=this.instance.wtOverlays.leftOverlay.trimmingContainer,e=this.instance.getSetting("stretchH"),f=document.documentElement.offsetWidth;return a=Handsontable.freezeOverlays?Math.min(f-this.getWorkspaceOffset().left,f):Math.min(this.getContainerFillWidth(),f-this.getWorkspaceOffset().left,f),d===window&&c>0&&this.sumColumnWidths(0,c-1)>a?document.documentElement.clientWidth:d!==window&&(b=h.getStyle(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow"),"scroll"==b||"hidden"==b||"auto"==b)?Math.max(a,d.clientWidth):"none"!==e&&e?a:Math.max(a,h.outerWidth(this.instance.wtTable.TABLE))},hasVerticalScroll:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight()},hasHorizontalScroll:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth()},sumColumnWidths:function(a,b){for(var c=0;b>a;)c+=this.wot.wtTable.getColumnWidth(a),a++;return c},getContainerFillWidth:function(){if(this.containerWidth)return this.containerWidth;var a,b,c=this.instance.wtTable.holder;return b=document.createElement("DIV"),b.style.width="100%",b.style.height="1px",c.appendChild(b),a=b.offsetWidth,this.containerWidth=a,c.removeChild(b),a},getWorkspaceOffset:function(){return h.offset(this.wot.wtTable.TABLE)},getWorkspaceActualHeight:function(){return h.outerHeight(this.wot.wtTable.TABLE)},getWorkspaceActualWidth:function(){return h.outerWidth(this.wot.wtTable.TABLE)||h.outerWidth(this.wot.wtTable.TBODY)||h.outerWidth(this.wot.wtTable.THEAD)},getColumnHeaderHeight:function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=h.outerHeight(this.wot.wtTable.THEAD)),this.columnHeaderHeight},getViewportHeight:function(){var a,b=this.getWorkspaceHeight();return b===1/0?b:(a=this.getColumnHeaderHeight(),a>0&&(b-=a),b)},getRowHeaderWidth:function(){if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var a=this.instance.getSetting("rowHeaders");if(a.length){var b=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var c=0,d=a.length;d>c;c++)b?(this.rowHeaderWidth+=h.outerWidth(b),b=b.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},getViewportWidth:function(){var a,b=this.getWorkspaceWidth();return b===1/0?b:(a=this.getRowHeaderWidth(),a>0?b-a:b)},createRowsCalculator:function(){var a,b,c,d=void 0!==arguments[0]?arguments[0]:!1,e=this;if(this.rowHeaderWidth=NaN,a=this.wot.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight(),b=h.getScrollTop(this.wot.wtOverlays.mainTableScrollableElement)-this.wot.wtOverlays.topOverlay.getTableParentOffset(),0>b&&(b=0),c=this.wot.getSetting("fixedRowsTop")){var f=this.wot.wtOverlays.topOverlay.sumCellSizes(0,c);b+=f,a-=f}return new k(a,b,this.wot.getSetting("totalRows"),function(a){return e.wot.wtTable.getRowHeight(a)},d?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,d)},createColumnsCalculator:function(){var a,b,c=void 0!==arguments[0]?arguments[0]:!1,d=this,e=this.getViewportWidth();if(this.columnHeaderHeight=NaN,a=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.topOverlay.getTableParentOffset(),0>a&&(a=0),b=this.wot.getSetting("fixedColumnsLeft")){var f=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,b);a+=f,e-=f}return this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth&&(e-=h.getScrollbarWidth()),new j(e,a,this.wot.getSetting("totalColumns"),function(a){return d.wot.wtTable.getColumnWidth(a)},c?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,c,this.wot.getSetting("stretchH"))},createRenderCalculators:function(){var a=void 0!==arguments[0]?arguments[0]:!1;if(a){var b=this.createRowsCalculator(!0),c=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(b)&&this.areAllProposedVisibleColumnsAlreadyRendered(c)||(a=!1)}return a||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,a},createVisibleCalculators:function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)},areAllProposedVisibleRowsAlreadyRendered:function(a){return this.rowsVisibleCalculator?a.startRow<this.rowsRenderCalculator.startRow||a.startRow===this.rowsRenderCalculator.startRow&&a.startRow>0?!1:a.endRow>this.rowsRenderCalculator.endRow||a.endRow===this.rowsRenderCalculator.endRow&&a.endRow<this.wot.getSetting("totalRows")-1?!1:!0:!1},areAllProposedVisibleColumnsAlreadyRendered:function(a){return this.columnsVisibleCalculator?a.startColumn<this.columnsRenderCalculator.startColumn||a.startColumn===this.columnsRenderCalculator.startColumn&&a.startColumn>0?!1:a.endColumn>this.columnsRenderCalculator.endColumn||a.endColumn===this.columnsRenderCalculator.endColumn&&a.endColumn<this.wot.getSetting("totalColumns")-1?!1:!0:!1}},{}),window.WalkontableViewport=l},{"./../../../dom.js":27,"./../../../eventManager.js":41,"./calculator/viewportColumns.js":3,"./calculator/viewportRows.js":4}],23:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=Handsontable.version,l=Handsontable.buildDate;window.Handsontable=function n(a,b){var c=new n.Core(a,b||{});return c.init(),c},Handsontable.version=k,Handsontable.buildDate=l,d=a("./shims/classes.js"),d&&d.__esModule&&d||{"default":d},e=a("es6collections"),e&&e.__esModule&&e||{"default":e},Handsontable.plugins={};var m=(f=a("./pluginHooks.js"),f&&f.__esModule&&f||{"default":f}).Hooks;Handsontable.hooks||(Handsontable.hooks=new m),g=a("./core.js"),g&&g.__esModule&&g||{"default":g},h=a("./renderers/_cellDecorator.js"),h&&h.__esModule&&h||{"default":h},i=a("./cellTypes.js"),i&&i.__esModule&&i||{"default":i},j=a("./../plugins/jqueryHandsontable.js"),j&&j.__esModule&&j||{"default":j}},{"./../plugins/jqueryHandsontable.js":1,"./cellTypes.js":24,"./core.js":25,"./pluginHooks.js":44,"./renderers/_cellDecorator.js":72,"./shims/classes.js":79,es6collections:"es6collections"}],24:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=(d=a("./helpers.js"),d&&d.__esModule&&d||{"default":d}),A=(e=a("./editors.js"),e&&e.__esModule&&e||{"default":e}).getEditorConstructor,B=(f=a("./renderers.js"),f&&f.__esModule&&f||{"default":f}).getRenderer;(g=a("./editors/autocompleteEditor.js"),g&&g.__esModule&&g||{"default":g}).AutocompleteEditor,(h=a("./editors/checkboxEditor.js"),h&&h.__esModule&&h||{"default":h}).CheckboxEditor,(i=a("./editors/dateEditor.js"),i&&i.__esModule&&i||{"default":i}).DateEditor,(j=a("./editors/dropdownEditor.js"),j&&j.__esModule&&j||{"default":j}).DropdownEditor,(k=a("./editors/handsontableEditor.js"),k&&k.__esModule&&k||{"default":k}).HandsontableEditor,(l=a("./editors/mobileTextEditor.js"),l&&l.__esModule&&l||{"default":l}).MobileTextEditor,(m=a("./editors/numericEditor.js"),m&&m.__esModule&&m||{"default":m}).NumericEditor,(n=a("./editors/passwordEditor.js"),n&&n.__esModule&&n||{"default":n}).PasswordEditor,(o=a("./editors/selectEditor.js"),o&&o.__esModule&&o||{"default":o}).SelectEditor,(p=a("./editors/textEditor.js"),p&&p.__esModule&&p||{"default":p}).TextEditor,(q=a("./renderers/autocompleteRenderer.js"),q&&q.__esModule&&q||{"default":q}).AutocompleteRenderer,(r=a("./renderers/checkboxRenderer.js"),r&&r.__esModule&&r||{"default":r}).CheckboxRenderer,(s=a("./renderers/htmlRenderer.js"),s&&s.__esModule&&s||{"default":s}).HtmlRenderer,(t=a("./renderers/numericRenderer.js"),t&&t.__esModule&&t||{"default":t}).NumericRenderer,(u=a("./renderers/passwordRenderer.js"),u&&u.__esModule&&u||{"default":u}).PasswordRenderer,(v=a("./renderers/textRenderer.js"),v&&v.__esModule&&v||{"default":v}).TextRenderer,(w=a("./validators/autocompleteValidator.js"),w&&w.__esModule&&w||{"default":w}).AutocompleteValidator,(x=a("./validators/dateValidator.js"),x&&x.__esModule&&x||{"default":x}).DateValidator,(y=a("./validators/numericValidator.js"),y&&y.__esModule&&y||{"default":y}).NumericValidator;Handsontable.mobileBrowser=z.isMobileBrowser(),Handsontable.AutocompleteCell={editor:A("autocomplete"),renderer:B("autocomplete"),validator:Handsontable.AutocompleteValidator},Handsontable.CheckboxCell={editor:A("checkbox"),renderer:B("checkbox")},Handsontable.TextCell={editor:A(Handsontable.mobileBrowser?"mobile":"text"),renderer:B("text")},Handsontable.NumericCell={editor:A("numeric"),renderer:B("numeric"),validator:Handsontable.NumericValidator,dataType:"number"},Handsontable.DateCell={editor:A("date"),validator:Handsontable.DateValidator,renderer:B("autocomplete")},Handsontable.HandsontableCell={editor:A("handsontable"),renderer:B("autocomplete")},Handsontable.PasswordCell={editor:A("password"),renderer:B("password"),copyable:!1},Handsontable.DropdownCell={editor:A("dropdown"),renderer:B("autocomplete"),validator:Handsontable.AutocompleteValidator},Handsontable.cellTypes={text:Handsontable.TextCell,date:Handsontable.DateCell,numeric:Handsontable.NumericCell,checkbox:Handsontable.CheckboxCell,autocomplete:Handsontable.AutocompleteCell,handsontable:Handsontable.HandsontableCell,password:Handsontable.PasswordCell,dropdown:Handsontable.DropdownCell},Handsontable.cellLookup={validator:{numeric:Handsontable.NumericValidator,autocomplete:Handsontable.AutocompleteValidator}}},{"./editors.js":29,"./editors/autocompleteEditor.js":31,"./editors/checkboxEditor.js":32,"./editors/dateEditor.js":33,"./editors/dropdownEditor.js":34,"./editors/handsontableEditor.js":35,"./editors/mobileTextEditor.js":36,"./editors/numericEditor.js":37,"./editors/passwordEditor.js":38,"./editors/selectEditor.js":39,"./editors/textEditor.js":40,"./helpers.js":42,"./renderers.js":71,"./renderers/autocompleteRenderer.js":73,"./renderers/checkboxRenderer.js":74,"./renderers/htmlRenderer.js":75,"./renderers/numericRenderer.js":76,"./renderers/passwordRenderer.js":77,"./renderers/textRenderer.js":78,"./validators/autocompleteValidator.js":83,"./validators/dateValidator.js":84,"./validators/numericValidator.js":85}],25:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q=(d=a("./dom.js"),d&&d.__esModule&&d||{"default":d}),r=(e=a("./helpers.js"),e&&e.__esModule&&e||{"default":e}),s=(f=a("numeral"),f&&f.__esModule&&f||{"default":f})["default"],t=(g=a("./dataMap.js"),g&&g.__esModule&&g||{"default":g}).DataMap,u=(h=a("./editorManager.js"),h&&h.__esModule&&h||{"default":h}).EditorManager,v=(i=a("./eventManager.js"),i&&i.__esModule&&i||{"default":i}).eventManager,w=(j=a("./plugins.js"),j&&j.__esModule&&j||{"default":j}).getPlugin,x=(k=a("./renderers.js"),k&&k.__esModule&&k||{"default":k}).getRenderer,y=(l=a("./tableView.js"),l&&l.__esModule&&l||{"default":l}).TableView,z=(m=a("./3rdparty/walkontable/src/cell/coords.js"),m&&m.__esModule&&m||{"default":m}).WalkontableCellCoords,A=(n=a("./3rdparty/walkontable/src/cell/range.js"),n&&n.__esModule&&n||{"default":n}).WalkontableCellRange,B=((o=a("./3rdparty/walkontable/src/selection.js"),o&&o.__esModule&&o||{"default":o}).WalkontableSelection,(p=a("./3rdparty/walkontable/src/calculator/viewportColumns.js"),p&&p.__esModule&&p||{"default":p}).WalkontableViewportColumnsCalculator);Handsontable.activeGuid=null,Handsontable.Core=function(a,b){function c(){var a=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,a=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==a&&(a=!0,this.onQueueEmpty())}}}function d(a,b,d){function e(){var c;a.length&&(c=Handsontable.hooks.run(p,"beforeChange",a,b),"function"==typeof c?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):c===!1&&a.splice(0,a.length)),d()}var f=new c;f.onQueueEmpty=e;for(var g=a.length-1;g>=0;g--)if(null===a[g])a.splice(g,1);else{var h=a[g][0],i=l.propToCol(a[g][1]),j=p.runHooks("modifyCol",i),k=p.getCellMeta(h,j);if("numeric"===k.type&&"string"==typeof a[g][3]&&a[g][3].length>0&&(/^-?[\d\s]*(\.|\,)?\d*$/.test(a[g][3])||k.format)){var m=a[g][3].length;"undefined"==typeof k.language?s.language("en"):a[g][3].indexOf(".")===m-3&&-1===a[g][3].indexOf(",")?s.language("en"):s.language(k.language),s.validate(a[g][3])&&(a[g][3]=s().unformat(a[g][3]))}p.getCellValidator(k)&&(f.addValidatorToQueue(),p.validateCell(a[g][3],k,function(b,c){return function(d){if("boolean"!=typeof d)throw new Error("Validation error: result is not boolean");d===!1&&c.allowInvalid===!1&&(a.splice(b,1),c.valid=!0,--b),f.removeValidatorFormQueue()}}(g,k),b))}f.checkIfQueueIsEmpty()}function e(a,b){var c=a.length-1;if(!(0>c)){for(;c>=0;c--)if(null!==a[c]){if(null!=a[c][2]||null!=a[c][3]){if(k.settings.allowInsertRow)for(;a[c][0]>p.countRows()-1;)l.createRow();if("array"===p.dataType&&k.settings.allowInsertColumn)for(;l.propToCol(a[c][1])>p.countCols()-1;)l.createCol();l.set(a[c][0],a[c][1],a[c][3])}}else a.splice(c,1);p.forceFullRender=!0,m.adjustRowsAndCols(),Handsontable.hooks.run(p,"beforeChangeRender",a,b),n.refreshBorders(null,!0),p.view.wt.wtOverlays.adjustElementsSize(),Handsontable.hooks.run(p,"afterChange",a,b||"edit")}}function f(a,b,c){return"object"==typeof a?a:[[a,b,c]]}function g(a){if(a.hasOwnProperty("type")){var b,c={};if("object"==typeof a.type)b=a.type;else if("string"==typeof a.type&&(b=Handsontable.cellTypes[a.type],void 0===b))throw new Error('You declared cell type "'+a.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var d in b)b.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&(c[d]=b[d]);return c}}function h(a){return Handsontable.hooks.run(p,"modifyRow",a)}function i(a){return Handsontable.hooks.run(p,"modifyCol",a)}function j(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var k,l,m,n,o,p=this,D=function(){},E=v(p);r.extend(D.prototype,C.prototype),r.extend(D.prototype,b),r.extend(D.prototype,g(b)),this.rootElement=a,this.isHotTableEnv=q.isChildOfWebComponentTable(this.rootElement),Handsontable.eventManager.isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("DIV"),this.renderCall=!1,a.insertBefore(this.container,a.firstChild),this.guid="ht_"+r.randomString(),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),k={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new D,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},m={alter:function(a,b,c,d,e){var f;switch(c=c||1,a){case"insert_row":if(p.getSettings().maxRows===p.countRows())return;f=l.createRow(b,c),f&&(n.isSelected()&&k.selRange.from.row>=b?(k.selRange.from.row=k.selRange.from.row+f,n.transformEnd(f,0)):n.refreshBorders());break;case"insert_col":if(f=l.createCol(b,c)){if(Array.isArray(p.getSettings().colHeaders)){var g=[b,0];g.length+=f,Array.prototype.splice.apply(p.getSettings().colHeaders,g)}n.isSelected()&&k.selRange.from.col>=b?(k.selRange.from.col=k.selRange.from.col+f,n.transformEnd(0,f)):n.refreshBorders()}break;case"remove_row":b=p.runHooks("modifyCol",b),l.removeRow(b,c),k.cellSettings.splice(b,c);var h=p.getSettings().fixedRowsTop;h>=b+1&&(p.getSettings().fixedRowsTop-=Math.min(c,h-b)),m.adjustRowsAndCols(),n.refreshBorders();break;case"remove_col":l.removeCol(b,c);for(var i=0,j=l.getAll().length;j>i;i++)i in k.cellSettings&&k.cellSettings[i].splice(b,c);var o=p.getSettings().fixedColumnsLeft;o>=b+1&&(p.getSettings().fixedColumnsLeft-=Math.min(c,o-b)),Array.isArray(p.getSettings().colHeaders)&&("undefined"==typeof b&&(b=-1),p.getSettings().colHeaders.splice(b,c)),m.adjustRowsAndCols(),n.refreshBorders();break;default:throw new Error('There is no such action "'+a+'"')}e||m.adjustRowsAndCols()},adjustRowsAndCols:function(){if(k.settings.minRows){var a=p.countRows();if(a<k.settings.minRows)for(var b=0,c=k.settings.minRows;c-a>b;b++)l.createRow(p.countRows(),1,!0)}if(k.settings.minSpareRows){var d=p.countEmptyRows(!0);if(d<k.settings.minSpareRows)for(;d<k.settings.minSpareRows&&p.countRows()<k.settings.maxRows;d++)l.createRow(p.countRows(),1,!0)}var e;if((k.settings.minCols||k.settings.minSpareCols)&&(e=p.countEmptyCols(!0)),k.settings.minCols&&!k.settings.columns&&p.countCols()<k.settings.minCols)for(;p.countCols()<k.settings.minCols;e++)l.createCol(p.countCols(),1,!0);if(k.settings.minSpareCols&&!k.settings.columns&&"array"===p.dataType&&e<k.settings.minSpareCols)for(;e<k.settings.minSpareCols&&p.countCols()<k.settings.maxCols;e++)l.createCol(p.countCols(),1,!0);var f=p.countRows(),g=p.countCols();if((0===f||0===g)&&n.deselect(),n.isSelected()){var h=!1,i=k.selRange.from.row,j=k.selRange.from.col,m=k.selRange.to.row,o=k.selRange.to.col;i>f-1?(i=f-1,h=!0,m>i&&(m=i)):m>f-1&&(m=f-1,h=!0,i>m&&(i=m)),j>g-1?(j=g-1,h=!0,o>j&&(o=j)):o>g-1&&(o=g-1,h=!0,j>o&&(j=o)),h&&p.selectCell(i,j,m,o)}p.view&&p.view.wt.wtOverlays.adjustElementsSize()},populateFromArray:function(a,b,c,d,e,f,g){var h,i,j,l,m=[],n={};if(i=b.length,0===i)return!1;var o,q,s,t;switch(e){case"shift_down":for(o=c?c.col-a.col+1:0,q=c?c.row-a.row+1:0,b=r.translateRowsToColumns(b),j=0,l=b.length,s=Math.max(l,o);s>j;j++)if(l>j){for(h=0,i=b[j].length;q-i>h;h++)b[j].push(b[j][h%i]);b[j].unshift(a.col+j,a.row,0),p.spliceCol.apply(p,b[j])}else b[j%l][0]=a.col+j,p.spliceCol.apply(p,b[j%l]);break;case"shift_right":for(o=c?c.col-a.col+1:0,q=c?c.row-a.row+1:0,h=0,i=b.length,t=Math.max(i,q);t>h;h++)if(i>h){for(j=0,l=b[h].length;o-l>j;j++)b[h].push(b[h][j%l]);b[h].unshift(a.row+h,a.col,0),p.spliceRow.apply(p,b[h])}else b[h%i][0]=a.row+h,p.spliceRow.apply(p,b[h%i]);break;case"overwrite":default:n.row=a.row,n.col=a.col;var u={row:0,col:0},v={row:c&&a?c.row-a.row+1:1,col:c&&a?c.col-a.col+1:1},w=!0;for(-1!==["up","left"].indexOf(f)?u={row:Math.ceil(v.row/i)||1,col:Math.ceil(v.col/b[0].length)||1}:-1!==["down","right"].indexOf(f)&&(u={row:1,col:1}),h=0;i>h&&!(c&&n.row>c.row||!k.settings.allowInsertRow&&n.row>p.countRows()-1||n.row>=k.settings.maxRows);h++){for(n.col=a.col,l=b[h]?b[h].length:0,j=0;l>j&&!(c&&n.col>c.col||!k.settings.allowInsertColumn&&n.col>p.countCols()-1||n.col>=k.settings.maxCols);j++){if(!p.getCellMeta(n.row,n.col).readOnly){var x,y,z,A=b[h][j],B=p.getDataAtCell(n.row,n.col),C={row:h,col:j};"autofill"===d&&(x=p.runHooks("beforeAutofillInsidePopulate",C,f,b,g,u,v),x&&(u="undefined"!=typeof x.iterators?x.iterators:u,A="undefined"!=typeof x.value?x.value:A)),null!==A&&"object"==typeof A?null===B||"object"!=typeof B?w=!1:(z=Handsontable.helper.duckSchema(B[0]||B),y=Handsontable.helper.duckSchema(A[0]||A),Handsontable.helper.isObjectEquals(z,y)?A=Handsontable.helper.deepClone(A):w=!1):null!==B&&"object"==typeof B&&(w=!1),w&&m.push([n.row,n.col,A]),w=!0}n.col++,c&&j===l-1&&(j=-1,-1!==["down","right"].indexOf(f)?u.col++:-1!==["up","left"].indexOf(f)&&u.col>1&&u.col--)}n.row++,u.col=1,c&&h===i-1&&(h=-1,-1!==["down","right"].indexOf(f)?u.row++:-1!==["up","left"].indexOf(f)&&u.row>1&&u.row--)}p.setDataAtCell(m,null,null,d||"populateFromArray")}}},this.selection=n={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(a,b){p.selection.selectedHeader.rows=a,p.selection.selectedHeader.cols=b},begin:function(){p.selection.inProgress=!0},finish:function(){var a=p.getSelected();Handsontable.hooks.run(p,"afterSelectionEnd",a[0],a[1],a[2],a[3]),Handsontable.hooks.run(p,"afterSelectionEndByProp",a[0],p.colToProp(a[1]),a[2],p.colToProp(a[3])),p.selection.inProgress=!1},isInProgress:function(){return p.selection.inProgress},setRangeStart:function(a,b){Handsontable.hooks.run(p,"beforeSetRangeStart",a),k.selRange=new A(a,a,a),n.setRangeEnd(a,null,b)},setRangeEnd:function(a,b,c){if(null!==k.selRange){var d;Handsontable.hooks.run(p,"beforeSetRangeEnd",a),p.selection.begin(),k.selRange.to=new z(a.row,a.col),k.settings.multiSelect||(k.selRange.from=a),p.view.wt.selections.current.clear(),d=p.getCellMeta(k.selRange.highlight.row,k.selRange.highlight.col).disableVisualSelection,"string"==typeof d&&(d=[d]),(d===!1||Array.isArray(d)&&-1===d.indexOf("current"))&&p.view.wt.selections.current.add(k.selRange.highlight),p.view.wt.selections.area.clear(),(d===!1||Array.isArray(d)&&-1===d.indexOf("area"))&&n.isMultiple()&&(p.view.wt.selections.area.add(k.selRange.from),p.view.wt.selections.area.add(k.selRange.to)),(k.settings.currentRowClassName||k.settings.currentColClassName)&&(p.view.wt.selections.highlight.clear(),p.view.wt.selections.highlight.add(k.selRange.from),p.view.wt.selections.highlight.add(k.selRange.to)),Handsontable.hooks.run(p,"afterSelection",k.selRange.from.row,k.selRange.from.col,k.selRange.to.row,k.selRange.to.col),Handsontable.hooks.run(p,"afterSelectionByProp",k.selRange.from.row,l.colToProp(k.selRange.from.col),k.selRange.to.row,l.colToProp(k.selRange.to.col)),b!==!1&&p.view.mainViewIsActive()&&(k.selRange.from&&!n.isMultiple()?p.view.scrollViewport(k.selRange.from):p.view.scrollViewport(a)),n.refreshBorders(null,c)}},refreshBorders:function(a,b){b||o.destroyEditor(a),p.view.render(),n.isSelected()&&!b&&o.prepareEditor()},isMultiple:function(){var a=!(k.selRange.to.col===k.selRange.from.col&&k.selRange.to.row===k.selRange.from.row),b=Handsontable.hooks.run(p,"afterIsMultipleSelection",a);return a?b:void 0},transformStart:function(a,b,c,d){var e,f,g,h=new z(a,b),i=0,j=0;p.runHooks("modifyTransformStart",h),e=p.countRows(),f=p.countCols(),k.selRange.highlight.row+a>e-1?c&&k.settings.minSpareRows>0?(p.alter("insert_row",e),e=p.countRows()):k.settings.autoWrapCol&&(h.row=1-e,h.col=k.selRange.highlight.col+h.col==f-1?1-f:1):k.settings.autoWrapCol&&k.selRange.highlight.row+h.row<0&&k.selRange.highlight.col+h.col>=0&&(h.row=e-1,
h.col=k.selRange.highlight.col+h.col==0?f-1:-1),k.selRange.highlight.col+h.col>f-1?c&&k.settings.minSpareCols>0?(p.alter("insert_col",f),f=p.countCols()):k.settings.autoWrapRow&&(h.row=k.selRange.highlight.row+h.row==e-1?1-e:1,h.col=1-f):k.settings.autoWrapRow&&k.selRange.highlight.col+h.col<0&&k.selRange.highlight.row+h.row>=0&&(h.row=k.selRange.highlight.row+h.row==0?e-1:-1,h.col=f-1),g=new z(k.selRange.highlight.row+h.row,k.selRange.highlight.col+h.col),g.row<0?(i=-1,g.row=0):g.row>0&&g.row>=e&&(i=1,g.row=e-1),g.col<0?(j=-1,g.col=0):g.col>0&&g.col>=f&&(j=1,g.col=f-1),p.runHooks("afterModifyTransformStart",g,i,j),n.setRangeStart(g,d)},transformEnd:function(a,b){var c,d,e,f=new z(a,b),g=0,h=0;p.runHooks("modifyTransformEnd",f),c=p.countRows(),d=p.countCols(),e=new z(k.selRange.to.row+f.row,k.selRange.to.col+f.col),e.row<0?(g=-1,e.row=0):e.row>0&&e.row>=c&&(g=1,e.row=c-1),e.col<0?(h=-1,e.col=0):e.col>0&&e.col>=d&&(h=1,e.col=d-1),p.runHooks("afterModifyTransformEnd",e,g,h),n.setRangeEnd(e,!0)},isSelected:function(){return null!==k.selRange},inInSelection:function(a){return n.isSelected()?k.selRange.includes(a):!1},deselect:function(){n.isSelected()&&(p.selection.inProgress=!1,k.selRange=null,p.view.wt.selections.current.clear(),p.view.wt.selections.area.clear(),(k.settings.currentRowClassName||k.settings.currentColClassName)&&p.view.wt.selections.highlight.clear(),o.destroyEditor(),n.refreshBorders(),Handsontable.hooks.run(p,"afterDeselect"))},selectAll:function(){k.settings.multiSelect&&(n.setRangeStart(new z(0,0)),n.setRangeEnd(new z(p.countRows()-1,p.countCols()-1),!1))},empty:function(){if(n.isSelected()){var a,b,c=k.selRange.getTopLeftCorner(),d=k.selRange.getBottomRightCorner(),e=[];for(a=c.row;a<=d.row;a++)for(b=c.col;b<=d.col;b++)p.getCellMeta(a,b).readOnly||e.push([a,b,""]);p.setDataAtCell(e)}}},this.init=function(){Handsontable.hooks.run(p,"beforeInit"),Handsontable.mobileBrowser&&q.addClass(p.rootElement,"mobile"),this.updateSettings(k.settings,!0),this.view=new y(this),o=new u(p,k,n,l),this.forceFullRender=!0,Handsontable.hooks.run(p,"init"),this.view.render(),"object"==typeof k.firstRun&&(Handsontable.hooks.run(p,"afterChange",k.firstRun[0],k.firstRun[1]),k.firstRun=!1),Handsontable.hooks.run(p,"afterInit")},this.validateCell=function(a,b,c,d){function e(a){var d=b.col,e=b.row,f=p.getCell(e,d,!0);f&&p.view.wt.wtSettings.settings.cellRenderer(e,d,f),c(a)}var f=p.getCellValidator(b);"[object RegExp]"===Object.prototype.toString.call(f)&&(f=function(a){return function(b,c){c(a.test(b))}}(f)),"function"==typeof f?(a=Handsontable.hooks.run(p,"beforeValidate",a,b.row,b.prop,d),p._registerTimeout(setTimeout(function(){f.call(b,a,function(c){c=Handsontable.hooks.run(p,"afterValidate",c,a,b.row,b.prop,d),b.valid=c,e(c),Handsontable.hooks.run(p,"postAfterValidate",c,a,b.row,b.prop,d)})},0))):(b.valid=!0,e(b.valid))},this.setDataAtCell=function(a,b,c,g){var h,i,j,k=f(a,b,c),m=[];for(h=0,i=k.length;i>h;h++){if("object"!=typeof k[h])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof k[h][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");j=l.colToProp(k[h][1]),m.push([k[h][0],j,l.get(k[h][0],j),k[h][2]])}g||"object"!=typeof a||(g=b),d(m,g,function(){e(m,g)})},this.setDataAtRowProp=function(a,b,c,g){var h,i,j=f(a,b,c),k=[];for(h=0,i=j.length;i>h;h++)k.push([j[h][0],j[h][1],l.get(j[h][0],j[h][1]),j[h][2]]);g||"object"!=typeof a||(g=b),d(k,g,function(){e(k,g)})},this.listen=function(){Handsontable.activeGuid=p.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){Handsontable.activeGuid=null},this.isListening=function(){return Handsontable.activeGuid===p.guid},this.destroyEditor=function(a){n.refreshBorders(a)},this.populateFromArray=function(a,b,c,d,e,f,g,h,i){var j;if("object"!=typeof c||"object"!=typeof c[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return j="number"==typeof d?new z(d,e):null,m.populateFromArray(new z(a,b),c,j,f,g,h,i)},this.spliceCol=function(a,b,c){return l.spliceCol.apply(l,arguments)},this.spliceRow=function(a,b,c){return l.spliceRow.apply(l,arguments)},this.getSelected=function(){return n.isSelected()?[k.selRange.from.row,k.selRange.from.col,k.selRange.to.row,k.selRange.to.col]:void 0},this.getSelectedRange=function(){return n.isSelected()?k.selRange:void 0},this.render=function(){p.view&&(p.renderCall=!0,p.forceFullRender=!0,n.refreshBorders(null,!0))},this.loadData=function(a){function b(){k.cellSettings.length=0}if("object"==typeof a&&null!==a)a.push&&a.splice||(a=[a]);else{if(null!==a)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof a+" given)");a=[];for(var c,d=0,e=k.settings.startRows;e>d;d++){c=[];for(var f=0,g=k.settings.startCols;g>f;f++)c.push(null);a.push(c)}}k.isPopulated=!1,D.prototype.data=a,Array.isArray(k.settings.dataSchema)||Array.isArray(a[0])?p.dataType="array":"function"==typeof k.settings.dataSchema?p.dataType="function":p.dataType="object",l=new t(p,k,D),b(),m.adjustRowsAndCols(),Handsontable.hooks.run(p,"afterLoadData"),k.firstRun?k.firstRun=[null,"loadData"]:(Handsontable.hooks.run(p,"afterChange",null,"loadData"),p.render()),k.isPopulated=!0},this.getData=function(a,b,c,d){return"undefined"==typeof a?l.getAll():l.getRange(new z(a,b),new z(c,d),l.DESTINATION_RENDERER)},this.getCopyableData=function(a,b,c,d){return l.getCopyableText(new z(a,b),new z(c,d))},this.getSchema=function(){return l.getSchema()},this.updateSettings=function(a,b){var c,d;if("undefined"!=typeof a.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof a.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(c in a)"data"!==c&&(Handsontable.hooks.getRegistered().indexOf(c)>-1?("function"==typeof a[c]||Array.isArray(a[c]))&&p.addHook(c,a[c]):!b&&a.hasOwnProperty(c)&&(D.prototype[c]=a[c]));if(void 0===a.data&&void 0===k.settings.data?p.loadData(null):void 0!==a.data?p.loadData(a.data):void 0!==a.columns&&l.createMap(),d=p.countCols(),k.cellSettings.length=0,d>0){var e,f;for(c=0;d>c;c++)k.columnSettings[c]=r.columnFactory(D,k.columnsSettingConflicts),e=k.columnSettings[c].prototype,D.prototype.columns&&(f=D.prototype.columns[c],r.extend(e,f),r.extend(e,g(f)))}if("undefined"!=typeof a.cell)for(c in a.cell)if(a.cell.hasOwnProperty(c)){var h=a.cell[c];p.setCellMetaObject(h.row,h.col,h)}if(Handsontable.hooks.run(p,"afterCellMetaReset"),"undefined"!=typeof a.className&&(D.prototype.className&&q.removeClass(p.rootElement,D.prototype.className),a.className&&q.addClass(p.rootElement,a.className)),"undefined"!=typeof a.height){var i=a.height;"function"==typeof i&&(i=i()),p.rootElement.style.height=i+"px"}if("undefined"!=typeof a.width){var j=a.width;"function"==typeof j&&(j=j()),p.rootElement.style.width=j+"px"}i&&(p.rootElement.style.overflow="hidden"),b||Handsontable.hooks.run(p,"afterUpdateSettings"),m.adjustRowsAndCols(),p.view&&!k.firstRun&&(p.forceFullRender=!0,n.refreshBorders(null,!0))},this.getValue=function(){var a=p.getSelected();if(D.prototype.getValue){if("function"==typeof D.prototype.getValue)return D.prototype.getValue.call(p);if(a)return p.getData()[a[0]][D.prototype.getValue]}else if(a)return p.getDataAtCell(a[0],a[1])},this.getSettings=function(){return k.settings},this.clear=function(){n.selectAll(),n.empty()},this.alter=function(a,b,c,d,e){m.alter(a,b,c,d,e)},this.getCell=function(a,b,c){return p.view.getCellAtCoords(new z(a,b),c)},this.getCoords=function(a){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,a)},this.colToProp=function(a){return l.colToProp(a)},this.propToCol=function(a){return l.propToCol(a)},this.getDataAtCell=function(a,b){return l.get(a,l.colToProp(b))},this.getDataAtRowProp=function(a,b){return l.get(a,b)},this.getDataAtCol=function(a){var b=[];return b.concat.apply(b,l.getRange(new z(0,a),new z(k.settings.data.length-1,a),l.DESTINATION_RENDERER))},this.getDataAtProp=function(a){var b,c=[];return b=l.getRange(new z(0,l.propToCol(a)),new z(k.settings.data.length-1,l.propToCol(a)),l.DESTINATION_RENDERER),c.concat.apply(c,b)},this.getSourceDataAtCol=function(a){for(var b=[],c=k.settings.data,d=0;d<c.length;d++)b.push(c[d][a]);return b},this.getSourceDataAtRow=function(a){return k.settings.data[a]},this.getDataAtRow=function(a){var b=l.getRange(new z(a,0),new z(a,this.countCols()-1),l.DESTINATION_RENDERER);return b[0]},this.removeCellMeta=function(a,b,c){var d=p.getCellMeta(a,b);void 0!=d[c]&&delete k.cellSettings[a][b][c]},this.setCellMetaObject=function(a,b,c){if("object"==typeof c)for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];this.setCellMeta(a,b,d,e)}},this.setCellMeta=function(a,b,c,d){k.cellSettings[a]||(k.cellSettings[a]=[]),k.cellSettings[a][b]||(k.cellSettings[a][b]=new k.columnSettings[b]),k.cellSettings[a][b][c]=d,Handsontable.hooks.run(p,"afterSetCellMeta",a,b,c,d)},this.getCellMeta=function(a,b){var c,d=l.colToProp(b);if(a=h(a),b=i(b),k.columnSettings[b]||(k.columnSettings[b]=r.columnFactory(D,k.columnsSettingConflicts)),k.cellSettings[a]||(k.cellSettings[a]=[]),k.cellSettings[a][b]||(k.cellSettings[a][b]=new k.columnSettings[b]),c=k.cellSettings[a][b],c.row=a,c.col=b,c.prop=d,c.instance=p,Handsontable.hooks.run(p,"beforeGetCellMeta",a,b,c),r.extend(c,g(c)),c.cells){var e=c.cells.call(c,a,b,d);e&&(r.extend(c,e),r.extend(c,g(e)))}return Handsontable.hooks.run(p,"afterGetCellMeta",a,b,c),c},this.isColumnModificationAllowed=function(){return!("object"===p.dataType||p.getSettings().columns)};var F=r.cellMethodLookupFactory("renderer");this.getCellRenderer=function(a,b){var c=F.call(this,a,b);return x(c)},this.getCellEditor=r.cellMethodLookupFactory("editor"),this.getCellValidator=r.cellMethodLookupFactory("validator"),this.validateCells=function(a){var b=new c;b.onQueueEmpty=a;for(var d=p.countRows()-1;d>=0;){for(var e=p.countCols()-1;e>=0;)b.addValidatorToQueue(),p.validateCell(p.getDataAtCell(d,e),p.getCellMeta(d,e),function(){b.removeValidatorFormQueue()},"validateCells"),e--;d--}b.checkIfQueueIsEmpty()},this.getRowHeader=function(a){if(void 0===a){for(var b=[],c=0,d=p.countRows();d>c;c++)b.push(p.getRowHeader(c));return b}return Array.isArray(k.settings.rowHeaders)&&void 0!==k.settings.rowHeaders[a]?k.settings.rowHeaders[a]:"function"==typeof k.settings.rowHeaders?k.settings.rowHeaders(a):k.settings.rowHeaders&&"string"!=typeof k.settings.rowHeaders&&"number"!=typeof k.settings.rowHeaders?a+1:k.settings.rowHeaders},this.hasRowHeaders=function(){return!!k.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==k.settings.colHeaders&&null!==k.settings.colHeaders)return!!k.settings.colHeaders;for(var a=0,b=p.countCols();b>a;a++)if(p.getColHeader(a))return!0;return!1},this.getColHeader=function(a){if(void 0===a){for(var b=[],c=0,d=p.countCols();d>c;c++)b.push(p.getColHeader(c));return b}var e=a;return a=Handsontable.hooks.run(p,"modifyCol",a),k.settings.columns&&k.settings.columns[a]&&k.settings.columns[a].title?k.settings.columns[a].title:Array.isArray(k.settings.colHeaders)&&void 0!==k.settings.colHeaders[a]?k.settings.colHeaders[a]:"function"==typeof k.settings.colHeaders?k.settings.colHeaders(a):k.settings.colHeaders&&"string"!=typeof k.settings.colHeaders&&"number"!=typeof k.settings.colHeaders?r.spreadsheetColumnLabel(e):k.settings.colHeaders},this._getColWidthFromSettings=function(a){var b=p.getCellMeta(0,a),c=b.width;if((void 0===c||c===k.settings.width)&&(c=b.colWidths),void 0!==c&&null!==c){switch(typeof c){case"object":c=c[a];break;case"function":c=c(a)}"string"==typeof c&&(c=parseInt(c,10))}return c},this.getColWidth=function(a){var b=p._getColWidthFromSettings(a);return b=Handsontable.hooks.run(p,"modifyColWidth",b,a),void 0===b&&(b=B.DEFAULT_WIDTH),b},this._getRowHeightFromSettings=function(a){var b=k.settings.rowHeights;if(void 0!==b&&null!==b){switch(typeof b){case"object":b=b[a];break;case"function":b=b(a)}"string"==typeof b&&(b=parseInt(b,10))}return b},this.getRowHeight=function(a){var b=p._getRowHeightFromSettings(a);return b=Handsontable.hooks.run(p,"modifyRowHeight",b,a)},this.countRows=function(){return k.settings.data.length},this.countCols=function(){return"object"===p.dataType||"function"===p.dataType?k.settings.columns&&k.settings.columns.length?k.settings.columns.length:l.colToPropCache.length:"array"===p.dataType?k.settings.columns&&k.settings.columns.length?k.settings.columns.length:k.settings.data&&k.settings.data[0]&&k.settings.data[0].length?k.settings.data[0].length:0:void 0},this.rowOffset=function(){return p.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return p.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return p.view.wt.drawn?p.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return p.view.wt.drawn?p.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return p.view.wt.drawn?p.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return p.view.wt.drawn?p.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(a){for(var b,c=p.countRows()-1,d=0;c>=0;){if(b=Handsontable.hooks.run(this,"modifyRow",c),p.isEmptyRow(b))d++;else if(a)break;c--}return d},this.countEmptyCols=function(a){if(p.countRows()<1)return 0;for(var b=p.countCols()-1,c=0;b>=0;){if(p.isEmptyCol(b))c++;else if(a)break;b--}return c},this.isEmptyRow=function(a){return k.settings.isEmptyRow.call(p,a)},this.isEmptyCol=function(a){return k.settings.isEmptyCol.call(p,a)},this.selectCell=function(a,b,c,d,e,f){var g;if(f="undefined"==typeof f||f===!0,"number"!=typeof a||0>a||a>=p.countRows())return!1;if("number"!=typeof b||0>b||b>=p.countCols())return!1;if("undefined"!=typeof c){if("number"!=typeof c||0>c||c>=p.countRows())return!1;if("number"!=typeof d||0>d||d>=p.countCols())return!1}return g=new z(a,b),k.selRange=new A(g,g,g),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),f&&p.listen(),"undefined"==typeof c?n.setRangeEnd(k.selRange.from,e):n.setRangeEnd(new z(c,d),e),p.selection.finish(),!0},this.selectCellByProp=function(a,b,c,d,e){return arguments[1]=l.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=l.propToCol(arguments[3])),p.selectCell.apply(p,arguments)},this.deselectCell=function(){n.deselect()},this.destroy=function(){p._clearTimeouts(),p.view&&p.view.destroy(),q.empty(p.rootElement),E.destroy(),Handsontable.hooks.run(p,"afterDestroy"),Handsontable.hooks.destroy(p);for(var a in p)p.hasOwnProperty(a)&&("function"==typeof p[a]?p[a]=j:"guid"!==a&&(p[a]=null));k=null,l=null,m=null,n=null,o=null,p=null,D=null},this.getActiveEditor=function(){return o.getActiveEditor()},this.getPlugin=function(a){return w(this,a)},this.getInstance=function(){return p},this.addHook=function(a,b){Handsontable.hooks.add(a,b,p)},this.addHookOnce=function(a,b){Handsontable.hooks.once(a,b,p)},this.removeHook=function(a,b){Handsontable.hooks.remove(a,b,p)},this.runHooks=function(a,b,c,d,e,f,g){return Handsontable.hooks.run(p,a,b,c,d,e,f,g)},this.timeouts=[],this._registerTimeout=function(a){this.timeouts.push(a)},this._clearTimeouts=function(){for(var a=0,b=this.timeouts.length;b>a;a++)clearTimeout(this.timeouts[a])},this.version=Handsontable.version,Handsontable.hooks.run(p,"construct")};var C=function(){};C.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",persistentState:!1,currentRowClassName:void 0,currentColClassName:void 0,stretchH:"none",isEmptyRow:function(a){var b,c,d,e;for(b=0,c=this.countCols();c>b;b++)if(d=this.getDataAtCell(a,b),""!==d&&null!==d&&"undefined"!=typeof d)return"object"==typeof d?(e=this.getCellMeta(a,b),r.isObjectEquals(this.getSchema()[e.prop],d)):!1;return!0},isEmptyCol:function(a){var b,c,d;for(b=0,c=this.countRows();c>b;b++)if(d=this.getDataAtCell(b,a),""!==d&&null!==d&&"undefined"!=typeof d)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,search:!1,type:"text",copyable:!0,editor:void 0,autoComplete:void 0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",groups:void 0,validator:void 0,disableVisualSelection:!1,sortIndicator:!1,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,format:void 0,className:void 0,autoColumnSize:void 0,autoRowSize:void 0},Handsontable.DefaultSettings=C},{"./3rdparty/walkontable/src/calculator/viewportColumns.js":3,"./3rdparty/walkontable/src/cell/coords.js":5,"./3rdparty/walkontable/src/cell/range.js":6,"./3rdparty/walkontable/src/selection.js":18,"./dataMap.js":26,"./dom.js":27,"./editorManager.js":28,"./eventManager.js":41,"./helpers.js":42,"./plugins.js":45,"./renderers.js":71,"./tableView.js":80,numeral:"numeral"}],26:[function(a,b,c){"use strict";function d(a,b,c){this.instance=a,this.priv=b,this.GridSettings=c,this.dataSource=this.instance.getSettings().data,this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap()}Object.defineProperties(c,{DataMap:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h=(e=a("./helpers.js"),e&&e.__esModule&&e||{"default":e}),i=(f=a("./multiMap.js"),f&&f.__esModule&&f||{"default":f}).MultiMap,j=(g=a("SheetClip"),g&&g.__esModule&&g||{"default":g})["default"];Handsontable.DataMap=d,d.prototype.DESTINATION_RENDERER=1,d.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,d.prototype.recursiveDuckSchema=function(a){return Handsontable.helper.duckSchema(a)},d.prototype.recursiveDuckColumns=function(a,b,c){var d,e;if("undefined"==typeof b&&(b=0,c=""),"object"==typeof a&&!Array.isArray(a))for(e in a)a.hasOwnProperty(e)&&(null===a[e]?(d=c+e,this.colToPropCache.push(d),this.propToColCache.set(d,b),b++):b=this.recursiveDuckColumns(a[e],b,e+"."));return b},d.prototype.createMap=function(){var a,b,c=this.getSchema();if("undefined"==typeof c)throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new i;var d=this.instance.getSettings().columns;if(d)for(a=0,b=d.length;b>a;a++)"undefined"!=typeof d[a].data&&(this.colToPropCache[a]=d[a].data,this.propToColCache.set(d[a].data,a));else this.recursiveDuckColumns(c)},d.prototype.colToProp=function(a){return a=Handsontable.hooks.run(this.instance,"modifyCol",a),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[a]?this.colToPropCache[a]:a},d.prototype.propToCol=function(a){var b;return b="undefined"!=typeof this.propToColCache.get(a)?this.propToColCache.get(a):a,b=Handsontable.hooks.run(this.instance,"modifyCol",b)},d.prototype.getSchema=function(){var a=this.instance.getSettings().dataSchema;return a?"function"==typeof a?a():a:this.duckSchema},d.prototype.createRow=function(a,b,c){var d,e,f=this.instance.countCols(),g=0;b||(b=1),("number"!=typeof a||a>=this.instance.countRows())&&(a=this.instance.countRows()),e=a;for(var i=this.instance.getSettings().maxRows;b>g&&this.instance.countRows()<i;){if("array"===this.instance.dataType){d=[];for(var j=0;f>j;j++)d.push(null)}else"function"===this.instance.dataType?d=this.instance.getSettings().dataSchema(a):(d={},h.deepExtend(d,this.getSchema()));a===this.instance.countRows()?this.dataSource.push(d):this.dataSource.splice(a,0,d),g++,e++}return Handsontable.hooks.run(this.instance,"afterCreateRow",a,g,c),this.instance.forceFullRender=!0,g},d.prototype.createCol=function(a,b,c){if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var d,e,f=this.instance.countRows(),g=this.dataSource,i=0;b||(b=1),e=a;for(var j=this.instance.getSettings().maxCols;b>i&&this.instance.countCols()<j;){if(d=h.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof a||a>=this.instance.countCols()){for(var k=0;f>k;k++)"undefined"==typeof g[k]&&(g[k]=[]),g[k].push(null);this.priv.columnSettings.push(d)}else{for(var k=0;f>k;k++)g[k].splice(e,0,null);this.priv.columnSettings.splice(e,0,d)}i++,e++}return Handsontable.hooks.run(this.instance,"afterCreateCol",a,i,c),this.instance.forceFullRender=!0,i},d.prototype.removeRow=function(a,b){b||(b=1),"number"!=typeof a&&(a=-b),a=(this.instance.countRows()+a)%this.instance.countRows();var c=this.physicalRowsToLogical(a,b),d=Handsontable.hooks.run(this.instance,"beforeRemoveRow",a,b);if(d!==!1){var e=this.dataSource,f=e.filter(function(a,b){return-1==c.indexOf(b)});e.length=0,Array.prototype.push.apply(e,f),Handsontable.hooks.run(this.instance,"afterRemoveRow",a,b),this.instance.forceFullRender=!0}},d.prototype.removeCol=function(a,b){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");b||(b=1),"number"!=typeof a&&(a=-b),a=(this.instance.countCols()+a)%this.instance.countCols();var c=Handsontable.hooks.run(this.instance,"beforeRemoveCol",a,b);if(c!==!1){for(var d=this.dataSource,e=0,f=this.instance.countRows();f>e;e++)d[e].splice(a,b);this.priv.columnSettings.splice(a,b),Handsontable.hooks.run(this.instance,"afterRemoveCol",a,b),this.instance.forceFullRender=!0}},d.prototype.spliceCol=function(a,b,c){var d=4<=arguments.length?[].slice.call(arguments,3):[],e=this.instance.getDataAtCol(a),f=e.slice(b,b+c),g=e.slice(b+c);h.extendArray(d,g);for(var i=0;c>i;)d.push(null),i++;return h.to2dArray(d),this.instance.populateFromArray(b,a,d,null,null,"spliceCol"),f},d.prototype.spliceRow=function(a,b,c){var d=4<=arguments.length?[].slice.call(arguments,3):[],e=this.instance.getSourceDataAtRow(a),f=e.slice(b,b+c),g=e.slice(b+c);h.extendArray(d,g);for(var i=0;c>i;)d.push(null),i++;return this.instance.populateFromArray(a,b,[d],null,null,"spliceRow"),f},d.prototype.get=function(a,b){if(a=Handsontable.hooks.run(this.instance,"modifyRow",a),"string"==typeof b&&b.indexOf(".")>-1){var c=b.split("."),d=this.dataSource[a];if(!d)return null;for(var e=0,f=c.length;f>e;e++)if(d=d[c[e]],"undefined"==typeof d)return null;return d}return"function"==typeof b?b(this.dataSource.slice(a,a+1)[0]):this.dataSource[a]?this.dataSource[a][b]:null};var k=h.cellMethodLookupFactory("copyable",!1);d.prototype.getCopyable=function(a,b){return k.call(this.instance,a,this.propToCol(b))?this.get(a,b):""},d.prototype.set=function(a,b,c,d){if(a=Handsontable.hooks.run(this.instance,"modifyRow",a,d||"datamapGet"),"string"==typeof b&&b.indexOf(".")>-1){for(var e=b.split("."),f=this.dataSource[a],g=0,h=e.length-1;h>g;g++)"undefined"==typeof f[e[g]]&&(f[e[g]]={}),f=f[e[g]];f[e[g]]=c}else"function"==typeof b?b(this.dataSource.slice(a,a+1)[0],c):this.dataSource[a][b]=c},d.prototype.physicalRowsToLogical=function(a,b){for(var c,d=this.instance.countRows(),e=(d+a)%d,f=[],g=b;d>e&&g;)c=Handsontable.hooks.run(this.instance,"modifyRow",e),f.push(c),g--,e++;return f},d.prototype.clear=function(){for(var a=0;a<this.instance.countRows();a++)for(var b=0;b<this.instance.countCols();b++)this.set(a,this.colToProp(b),"")},d.prototype.getAll=function(){return this.dataSource},d.prototype.getRange=function(a,b,c){var d,e,f,g,h,i=[],j=c===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(e=Math.max(a.row,b.row),g=Math.max(a.col,b.col),d=Math.min(a.row,b.row);e>=d;d++){for(h=[],f=Math.min(a.col,b.col);g>=f;f++)h.push(j.call(this,d,this.colToProp(f)));i.push(h)}return i},d.prototype.getText=function(a,b){return j.stringify(this.getRange(a,b,this.DESTINATION_RENDERER))},d.prototype.getCopyableText=function(a,b){return j.stringify(this.getRange(a,b,this.DESTINATION_CLIPBOARD_GENERATOR))}},{"./helpers.js":42,"./multiMap.js":43,SheetClip:"SheetClip"}],27:[function(a,b,c){"use strict";function d(a){null!=a&&null==a.isImmediatePropagationEnabled&&(a.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},a.isImmediatePropagationEnabled=!0,a.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled})}function e(a,b,c){for(;null!=a&&a!==c;){if(a.nodeType===Node.ELEMENT_NODE&&(b.indexOf(a.nodeName)>-1||b.indexOf(a)>-1))return a;a=a.host&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:a.parentNode}return null}function f(a,b){var c=a.parentNode,d=[];for("string"==typeof b?d=Array.prototype.slice.call(document.querySelectorAll(b),0):d.push(b);null!=c;){if(d.indexOf(c)>-1)return!0;c=c.parentNode}return!1}function g(a){function b(a){return a.nodeType===Node.ELEMENT_NODE&&a.nodeName===d.toUpperCase()}var c,d="hot-table",e=!1;for(c=h(a);null!=c;){if(b(c)){e=!0;break}if(c.host&&c.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(e=b(c.host))break;c=c.host}c=c.parentNode}return e}function h(a){return"undefined"!=typeof Polymer&&"function"==typeof wrap?wrap(a):a}function i(a){return"undefined"!=typeof Polymer&&"function"==typeof unwrap?unwrap(a):a}function j(){var a=document.createElement("div");return a.createShadowRoot&&a.createShadowRoot.toString().match(/\[native code\]/)?!0:!1}function k(a){var b=0;if(a.previousSibling)for(;a=a.previousSibling;)++b;return b}function l(a){var b=0,c=[];if(!a||!a.length)return c;for(;a[b];)c.push(a[b]),b++;return c}function m(a,b){return X(a,b)}function n(a,b){return Y(a,b)}function o(a,b){return Z(a,b)}function p(a,b){if(3===a.nodeType)b.removeChild(a);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(a.nodeName)>-1)for(var c=a.childNodes,d=c.length-1;d>=0;d--)p(c[d],a)}function q(a){for(var b;b=a.lastChild;)a.removeChild(b)}function r(a,b){da.test(b)?a.innerHTML=b:s(a,b)}function s(a,b){var c=a.firstChild;c&&3===c.nodeType&&null===c.nextSibling?ea?c.textContent=b:c.data=b:(q(a),a.appendChild(document.createTextNode(b)))}function t(a){for(var b=a;i(b)!==document.documentElement;){if(null===b)return!1;if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(b.host){if(b.host.impl)return t(b.host.impl);if(b.host)return t(b.host);throw new Error("Lost in Web Components world")}return!1}if("none"===b.style.display)return!1;b=b.parentNode}return!0}function u(a){var b,c,d,e,f;if(e=document.documentElement,K()&&a.firstChild&&"CAPTION"===a.firstChild.nodeName)return f=a.getBoundingClientRect(),{top:f.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:f.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)};for(b=a.offsetLeft,c=a.offsetTop,d=a;(a=a.offsetParent)&&a!==document.body;)b+=a.offsetLeft,c+=a.offsetTop,d=a;return d&&"fixed"===d.style.position&&(b+=window.pageXOffset||e.scrollLeft,c+=window.pageYOffset||e.scrollTop),{left:b,top:c}}function v(){var a=window.scrollY;return void 0==a&&(a=document.documentElement.scrollTop),a}function w(){var a=window.scrollX;return void 0==a&&(a=document.documentElement.scrollLeft),a}function x(a){return a===window?v(a):a.scrollTop}function y(a){return a===window?w(a):a.scrollLeft}function z(a){for(var b,c,d,e=a.parentNode,f=["auto","scroll"],g="",h="",i="",j="";e&&e.style&&document.body!==e;){if(b=e.style.overflow,c=e.style.overflowX,d=e.style.overflowY,"scroll"==b||"scroll"==c||"scroll"==d)return e;if(window.getComputedStyle&&(g=window.getComputedStyle(e),h=g.getPropertyValue("overflow"),i=g.getPropertyValue("overflow-y"),j=g.getPropertyValue("overflow-x"),"scroll"===h||"scroll"===j||"scroll"===i))return e;if(e.clientHeight<=e.scrollHeight&&(-1!==f.indexOf(d)||-1!==f.indexOf(b)||-1!==f.indexOf(h)||-1!==f.indexOf(i)))return e;if(e.clientWidth<=e.scrollWidth&&(-1!==f.indexOf(c)||-1!==f.indexOf(b)||-1!==f.indexOf(h)||-1!==f.indexOf(j)))return e;e=e.parentNode}return window}function A(a){for(var b=a.parentNode;b&&b.style&&document.body!==b;){if("visible"!==b.style.overflow&&""!==b.style.overflow)return b;if(window.getComputedStyle){var c=window.getComputedStyle(b);if("visible"!==c.getPropertyValue("overflow")&&""!==c.getPropertyValue("overflow"))return b}b=b.parentNode}return window}function B(a,b){if(a){if(a!==window){var c,d=a.style[b];return""!==d&&void 0!==d?d:(c=C(a),""!==c[b]&&void 0!==c[b]?c[b]:void 0)}if("width"===b)return window.innerWidth+"px";if("height"===b)return window.innerHeight+"px"}}function C(a){return a.currentStyle||document.defaultView.getComputedStyle(a)}function D(a){return a.offsetWidth}function E(a){return K()&&a.firstChild&&"CAPTION"===a.firstChild.nodeName?a.offsetHeight+a.firstChild.offsetHeight:a.offsetHeight}function F(a){return a.clientHeight||a.innerHeight}function G(a){return a.clientWidth||a.innerWidth}function H(a,b,c){window.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function I(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function J(){var a=document.createElement("TABLE");a.style.borderSpacing=0,a.style.borderWidth=0,a.style.padding=0;var b=document.createElement("TBODY");a.appendChild(b),b.appendChild(document.createElement("TR")),b.firstChild.appendChild(document.createElement("TD")),b.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var c=document.createElement("CAPTION");c.innerHTML="c<br>c<br>c<br>c",c.style.padding=0,c.style.margin=0,a.insertBefore(c,b),document.body.appendChild(a),ba=a.offsetHeight<2*a.lastChild.offsetHeight,document.body.removeChild(a)}function K(){return void 0===ba&&J(),ba}function L(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length}return 0}function M(a){if(a.selectionEnd)return a.selectionEnd;if(document.selection){var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange();return c.text.indexOf(b.text)+b.text.length}}function N(a,b,c){if(void 0===c&&(c=b),a.setSelectionRange){a.focus();try{a.setSelectionRange(b,c)}catch(d){var e=a.parentNode,f=e.style.display;e.style.display="block",a.setSelectionRange(b,c),e.style.display=f}}else if(a.createTextRange){var g=a.createTextRange();g.collapse(!0),g.moveEnd("character",c),g.moveStart("character",b),g.select()}}function O(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),(document.body||document.documentElement).appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;return c==d&&(d=b.clientWidth),(document.body||document.documentElement).removeChild(b),
c-d}function P(){return void 0===ca&&(ca=O()),ca}function Q(){return Q}function R(){return ga}function S(){return ha}function T(){return ia}function U(a,b,c){fa||ga?(a.style.top=c,a.style.left=b):ha?a.style["-webkit-transform"]="translate3d("+b+","+c+",0)":a.style.transform="translate3d("+b+","+c+",0)"}function V(a){var b;return a.style.transform&&""!==(b=a.style.transform)?["transform",b]:a.style["-webkit-transform"]&&""!==(b=a.style["-webkit-transform"])?["-webkit-transform",b]:-1}function W(a){a.transform&&""!==a.transform?a.transform="":a["-webkit-transform"]&&""!==a["-webkit-transform"]&&(a["-webkit-transform"]="")}Object.defineProperties(c,{enableImmediatePropagation:{get:function(){return d}},closest:{get:function(){return e}},isChildOf:{get:function(){return f}},isChildOfWebComponentTable:{get:function(){return g}},polymerWrap:{get:function(){return h}},polymerUnwrap:{get:function(){return i}},isWebComponentSupportedNatively:{get:function(){return j}},index:{get:function(){return k}},hasClass:{get:function(){return m}},addClass:{get:function(){return n}},removeClass:{get:function(){return o}},removeTextNodes:{get:function(){return p}},empty:{get:function(){return q}},HTML_CHARACTERS:{get:function(){return da}},fastInnerHTML:{get:function(){return r}},fastInnerText:{get:function(){return s}},isVisible:{get:function(){return t}},offset:{get:function(){return u}},getWindowScrollTop:{get:function(){return v}},getWindowScrollLeft:{get:function(){return w}},getScrollTop:{get:function(){return x}},getScrollLeft:{get:function(){return y}},getScrollableElement:{get:function(){return z}},getTrimmingContainer:{get:function(){return A}},getStyle:{get:function(){return B}},getComputedStyle:{get:function(){return C}},outerWidth:{get:function(){return D}},outerHeight:{get:function(){return E}},innerHeight:{get:function(){return F}},innerWidth:{get:function(){return G}},addEvent:{get:function(){return H}},removeEvent:{get:function(){return I}},hasCaptionProblem:{get:function(){return K}},getCaretPosition:{get:function(){return L}},getSelectionEndPosition:{get:function(){return M}},setCaretPosition:{get:function(){return N}},getScrollbarWidth:{get:function(){return P}},isIE8:{get:function(){return Q}},isIE9:{get:function(){return R}},isSafari:{get:function(){return S}},isChrome:{get:function(){return T}},setOverlayPosition:{get:function(){return U}},getCssTransform:{get:function(){return V}},resetCssTransform:{get:function(){return W}},__esModule:{value:!0}});var X,Y,Z,$=document.documentElement.classList?!0:!1;if($){var _=function(){var a=document.createElement("div");return a.classList.add("test","test2"),a.classList.contains("test2")}();X=function(a,b){return""===b?!1:a.classList.contains(b)},Y=function(a,b){var c=0;if("string"==typeof b&&(b=b.split(" ")),b=l(b),_)a.classList.add.apply(a.classList,b);else for(;b&&b[c];)a.classList.add(b[c]),c++},Z=function(a,b){var c=0;if("string"==typeof b&&(b=b.split(" ")),b=l(b),_)a.classList.remove.apply(a.classList,b);else for(;b&&b[c];)a.classList.remove(b[c]),c++}}else{var aa=function(a){return new RegExp("(\\s|^)"+a+"(\\s|$)")};X=function(a,b){return a.className.match(aa(b))?!0:!1},Y=function(a,b){var c=0,d=a.className;if("string"==typeof b&&(b=b.split(" ")),""===d)d=b.join(" ");else for(;b&&b[c];)aa(b[c]).test(d)||(d+=" "+b[c]),c++;a.className=d},Z=function(a,b){var c=0,d=a.className;for("string"==typeof b&&(b=b.split(" "));b&&b[c];)d=d.replace(aa(b[c])," ").trim(),c++;a.className!==d&&(a.className=d)}}var ba,ca,da=/(<(.*)>|&(.*);)/,ea=document.createTextNode("test").textContent?!0:!1,fa=!document.createTextNode("test").textContent,ga=!!document.documentMode,ha=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),ia=/Chrome/.test(navigator.userAgent)&&/Google/.test(navigator.vendor);window.Handsontable=window.Handsontable||{},Handsontable.Dom={addClass:n,addEvent:H,closest:e,empty:q,enableImmediatePropagation:d,fastInnerHTML:r,fastInnerText:s,getCaretPosition:L,getComputedStyle:C,getCssTransform:V,getScrollableElement:z,getScrollbarWidth:P,getScrollLeft:y,getScrollTop:x,getStyle:B,getSelectionEndPosition:M,getTrimmingContainer:A,getWindowScrollLeft:w,getWindowScrollTop:v,hasCaptionProblem:K,hasClass:m,HTML_CHARACTERS:da,index:k,innerHeight:F,innerWidth:G,isChildOf:f,isChildOfWebComponentTable:g,isChrome:T,isIE8:Q,isIE9:R,isSafari:S,isVisible:t,isWebComponentSupportedNatively:j,offset:u,outerHeight:E,outerWidth:D,polymerUnwrap:i,polymerWrap:h,removeClass:o,removeEvent:I,removeTextNodes:p,resetCssTransform:W,setCaretPosition:N,setOverlayPosition:U}},{}],28:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var d="function"==typeof b.settings.enterMoves?b.settings.enterMoves(event):b.settings.enterMoves;a?c.transformStart(-d.row,-d.col):c.transformStart(d.row,d.col,!0)}function e(a){a?c.transformEnd(-1,0):c.transformStart(-1,0)}function f(a){a?c.transformEnd(1,0):c.transformStart(1,0)}function g(a){a?c.transformEnd(0,1):c.transformStart(0,1)}function h(a){a?c.transformEnd(0,-1):c.transformStart(0,-1)}function i(i){var m,n;if(a.isListening()&&(Handsontable.hooks.run(a,"beforeKeyDown",i),!s&&(l.enableImmediatePropagation(i),!i.isImmediatePropagationStopped()&&(b.lastKeyCode=i.keyCode,c.isSelected())))){if(m=(i.ctrlKey||i.metaKey)&&!i.altKey,p&&!p.isWaiting()&&!(k.isMetaKey(i.keyCode)||k.isCtrlKey(i.keyCode)||m||q.isEditorOpened()))return void q.openEditor("",i);switch(n=i.shiftKey?c.setRangeEnd:c.setRangeStart,i.keyCode){case r.A:!q.isEditorOpened()&&m&&(c.selectAll(),i.preventDefault(),k.stopPropagation(i));break;case r.ARROW_UP:q.isEditorOpened()&&!p.isWaiting()&&q.closeEditorAndSaveChanges(m),e(i.shiftKey),i.preventDefault(),k.stopPropagation(i);break;case r.ARROW_DOWN:q.isEditorOpened()&&!p.isWaiting()&&q.closeEditorAndSaveChanges(m),f(i.shiftKey),i.preventDefault(),k.stopPropagation(i);break;case r.ARROW_RIGHT:q.isEditorOpened()&&!p.isWaiting()&&q.closeEditorAndSaveChanges(m),g(i.shiftKey),i.preventDefault(),k.stopPropagation(i);break;case r.ARROW_LEFT:q.isEditorOpened()&&!p.isWaiting()&&q.closeEditorAndSaveChanges(m),h(i.shiftKey),i.preventDefault(),k.stopPropagation(i);break;case r.TAB:var o="function"==typeof b.settings.tabMoves?b.settings.tabMoves(i):b.settings.tabMoves;i.shiftKey?c.transformStart(-o.row,-o.col):c.transformStart(o.row,o.col,!0),i.preventDefault(),k.stopPropagation(i);break;case r.BACKSPACE:case r.DELETE:c.empty(i),q.prepareEditor(),i.preventDefault();break;case r.F2:q.openEditor(null,i),p&&p.enableFullEditMode(),i.preventDefault();break;case r.ENTER:q.isEditorOpened()?(p&&p.state!==Handsontable.EditorState.WAITING&&q.closeEditorAndSaveChanges(m),d(i.shiftKey)):a.getSettings().enterBeginsEditing?(q.openEditor(null,i),p&&p.enableFullEditMode()):d(i.shiftKey),i.preventDefault(),i.stopImmediatePropagation();break;case r.ESCAPE:q.isEditorOpened()&&q.closeEditorAndRestoreOriginalValue(m),i.preventDefault();break;case r.HOME:n(i.ctrlKey||i.metaKey?new j(0,b.selRange.from.col):new j(b.selRange.from.row,0)),i.preventDefault(),k.stopPropagation(i);break;case r.END:n(i.ctrlKey||i.metaKey?new j(a.countRows()-1,b.selRange.from.col):new j(b.selRange.from.row,a.countCols()-1)),i.preventDefault(),k.stopPropagation(i);break;case r.PAGE_UP:c.transformStart(-a.countVisibleRows(),0),i.preventDefault(),k.stopPropagation(i);break;case r.PAGE_DOWN:c.transformStart(a.countVisibleRows(),0),i.preventDefault(),k.stopPropagation(i)}}}function n(){function b(a,b,c){"TD"==c.nodeName&&(q.openEditor(),p&&p.enableFullEditMode())}a.addHook("afterDocumentKeyDown",i),o.addEventListener(document.documentElement,"keydown",function(b){a.runHooks("afterDocumentKeyDown",b)}),a.view.wt.update("onCellDblClick",b),a.addHook("afterDestroy",function(){s=!0})}var o,p,q=this,r=k.keyCode,s=!1;o=m(a),this.destroyEditor=function(a){this.closeEditor(a)},this.getActiveEditor=function(){return p},this.prepareEditor=function(){var c,d,e,f,g,h,i;return p&&p.isWaiting()?void this.closeEditor(!1,!1,function(a){a&&q.prepareEditor()}):(c=b.selRange.highlight.row,d=b.selRange.highlight.col,e=a.colToProp(d),f=a.getCell(c,d),g=a.getDataAtCell(c,d),h=a.getCellMeta(c,d),i=a.getCellEditor(h),void(i?(p=Handsontable.editors.getEditor(i,a),p.prepare(c,d,e,f,g,h)):p=void 0))},this.isEditorOpened=function(){return p&&p.isOpened()},this.openEditor=function(a,b){p&&!p.cellProperties.readOnly?p.beginEditing(a,b):p&&p.cellProperties.readOnly&&b&&b.keyCode===k.keyCode.ENTER&&d()},this.closeEditor=function(a,b,c){p?p.finishEditing(a,b,c):c&&c(!1)},this.closeEditorAndSaveChanges=function(a){return this.closeEditor(!1,a)},this.closeEditorAndRestoreOriginalValue=function(a){return this.closeEditor(!0,a)},n()}Object.defineProperties(c,{EditorManager:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i,j=(e=a("./3rdparty/walkontable/src/cell/coords.js"),e&&e.__esModule&&e||{"default":e}).WalkontableCellCoords,k=(f=a("./helpers.js"),f&&f.__esModule&&f||{"default":f}),l=(g=a("./dom.js"),g&&g.__esModule&&g||{"default":g}),m=((h=a("./editors.js"),h&&h.__esModule&&h||{"default":h}).getEditor,(i=a("./eventManager.js"),i&&i.__esModule&&i||{"default":i}).eventManager);Handsontable.EditorManager=d},{"./3rdparty/walkontable/src/cell/coords.js":5,"./dom.js":27,"./editors.js":29,"./eventManager.js":41,"./helpers.js":42}],29:[function(a,b,c){"use strict";function d(a){var b,c;c={},b=a,this.getConstructor=function(){return a},this.getInstance=function(a){return a.guid in c||(c[a.guid]=new b(a)),c[a.guid]}}function e(a,b){var c=new d(b);"string"==typeof a&&(k[a]=c,Handsontable.editors[j.toUpperCaseFirst(a)+"Editor"]=b),l.set(b,c)}function f(a,b){var c;if("function"==typeof a)l.get(a)||e(null,a),c=l.get(a);else{if("string"!=typeof a)throw Error('Only strings and functions can be passed as "editor" parameter ');c=k[a]}if(!c)throw Error('No editor registered under name "'+a+'"');return c.getInstance(b)}function g(a){var b;if("string"!=typeof a)throw Error('Only strings and functions can be passed as "editor" parameter ');if(b=k[a],!b)throw Error('No editor registered under name "'+a+'"');return b.getConstructor()}function h(a){return k[a]?!0:!1}Object.defineProperties(c,{registerEditor:{get:function(){return e}},getEditor:{get:function(){return f}},hasEditor:{get:function(){return h}},getEditorConstructor:{get:function(){return g}},__esModule:{value:!0}});var i,j=(i=a("./helpers.js"),i&&i.__esModule&&i||{"default":i}),k={},l=new WeakMap;Handsontable.editors=Handsontable.editors||{},Handsontable.editors.registerEditor=e,Handsontable.editors.getEditor=f},{"./helpers.js":42}],30:[function(a,b,c){"use strict";function d(a){this.instance=a,this.state=Handsontable.EditorState.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.init()}Object.defineProperties(c,{BaseEditor:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../helpers.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../3rdparty/walkontable/src/cell/coords.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellCoords;Handsontable.editors=Handsontable.editors||{},Handsontable.editors.BaseEditor=d,Handsontable.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},d.prototype._fireCallbacks=function(a){this._closeCallback&&(this._closeCallback(a),this._closeCallback=null)},d.prototype.init=function(){},d.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},d.prototype.setValue=function(a){throw Error("Editor setValue() method unimplemented")},d.prototype.open=function(){throw Error("Editor open() method unimplemented")},d.prototype.close=function(){throw Error("Editor close() method unimplemented")},d.prototype.prepare=function(a,b,c,d,e,f){this.TD=d,this.row=a,this.col=b,this.prop=c,this.originalValue=e,this.cellProperties=f,this.state=Handsontable.EditorState.VIRGIN},d.prototype.extend=function(){function a(){c.apply(this,arguments)}function b(a,b){function c(){}return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a}var c=this.constructor;return b(a,c)},d.prototype.saveValue=function(a,b){var c,d;b?(c=this.instance.getSelected(),c[0]>c[2]&&(d=c[0],c[0]=c[2],c[2]=d),c[1]>c[3]&&(d=c[1],c[1]=c[3],c[3]=d),this.instance.populateFromArray(c[0],c[1],a,c[2],c[3],"edit")):this.instance.populateFromArray(this.row,this.col,a,null,null,"edit")},d.prototype.beginEditing=function(a,b){this.state==Handsontable.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new h(this.row,this.col)),this.instance.view.render(),this.state=Handsontable.EditorState.EDITING,a="string"==typeof a?a:this.originalValue,this.setValue(g.stringify(a)),this.open(b),this._opened=!0,this.focus(),this.instance.view.render())},d.prototype.finishEditing=function(a,b,c){var d,e=this;if(c){var f=this._closeCallback;this._closeCallback=function(a){f&&f(a),c(a)}}if(!this.isWaiting()){if(this.state==Handsontable.EditorState.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){e._fireCallbacks(!0)},0));if(this.state==Handsontable.EditorState.EDITING){if(a)return this.cancelChanges(),void this.instance.view.render();d=this.instance.getSettings().trimWhitespace?[["string"==typeof this.getValue()?String.prototype.trim.call(this.getValue()||""):this.getValue()]]:[[this.getValue()]],this.state=Handsontable.EditorState.WAITING,this.saveValue(d,b),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(a){e.state=Handsontable.EditorState.FINISHED,e.discardEditor(a)}):(this.state=Handsontable.EditorState.FINISHED,this.discardEditor(!0))}}},d.prototype.cancelChanges=function(){this.state=Handsontable.EditorState.FINISHED,this.discardEditor()},d.prototype.discardEditor=function(a){this.state===Handsontable.EditorState.FINISHED&&(a===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=Handsontable.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=Handsontable.EditorState.VIRGIN,this._fireCallbacks(!0)))},d.prototype.enableFullEditMode=function(){this._fullEditMode=!0},d.prototype.isInFullEditMode=function(){return this._fullEditMode},d.prototype.isOpened=function(){return this._opened},d.prototype.isWaiting=function(){return this.state===Handsontable.EditorState.WAITING}},{"./../3rdparty/walkontable/src/cell/coords.js":5,"./../helpers.js":42}],31:[function(a,b,c){"use strict";function d(a){o=!1;var b=this.getActiveEditor(),c=i.keyCode;if(i.isPrintableChar(a.keyCode)||a.keyCode===c.BACKSPACE||a.keyCode===c.DELETE||a.keyCode===c.INSERT){var d=0;if(a.keyCode===c.C&&(a.ctrlKey||a.metaKey))return;b.isOpened()||(d+=10),b.instance._registerTimeout(setTimeout(function(){b.queryChoices(b.TEXTAREA.value),o=!0},d))}}Object.defineProperties(c,{AutocompleteEditor:{get:function(){return n}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../editors.js"),g&&g.__esModule&&g||{"default":g}),l=(k.getEditorConstructor,k.registerEditor),m=(h=a("./handsontableEditor.js"),h&&h.__esModule&&h||{"default":h}).HandsontableEditor,n=m.prototype.extend();n.prototype.init=function(){m.prototype.init.apply(this,arguments),this.query=null,this.choices=[]},n.prototype.createElements=function(){m.prototype.createElements.apply(this,arguments),j.addClass(this.htContainer,"autocompleteEditor"),j.addClass(this.htContainer,-1!==window.navigator.platform.indexOf("Mac")?"htMacScroll":"")};var o=!1;n.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",d),m.prototype.prepare.apply(this,arguments)},n.prototype.open=function(){m.prototype.open.apply(this,arguments);var a=this.htEditor.getInstance(),b=this,c=void 0===this.cellProperties.trimDropdown?!0:this.cellProperties.trimDropdown;this.TEXTAREA.style.visibility="visible",this.focus(),a.updateSettings({colWidths:c?[j.outerWidth(this.TEXTAREA)-2]:void 0,width:c?j.outerWidth(this.TEXTAREA)+j.getScrollbarWidth()+2:void 0,afterRenderer:function(a,c,d,e,f){var g,h,i=this.getCellMeta(c,d).filteringCaseSensitive===!0,f=Handsontable.helper.stringify(f);f&&(g=i?f.indexOf(this.query):f.toLowerCase().indexOf(b.query.toLowerCase()),-1!=g&&(h=f.substr(g,b.query.length),a.innerHTML=f.replace(h,"<strong>"+h+"</strong>")))},modifyColWidth:function(a,b){return c?a:a+15}}),this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"]=j.getScrollbarWidth()+2+"px",o&&(o=!1),b.instance._registerTimeout(setTimeout(function(){b.queryChoices(b.TEXTAREA.value)},0))},n.prototype.close=function(){m.prototype.close.apply(this,arguments)},n.prototype.queryChoices=function(a){if(this.query=a,"function"==typeof this.cellProperties.source){var b=this;this.cellProperties.source(a,function(a){b.updateChoicesList(a)})}else if(Array.isArray(this.cellProperties.source)){var c;if(a&&this.cellProperties.filter!==!1){var d=this.cellProperties.filteringCaseSensitive===!0,e=a.toLowerCase();c=this.cellProperties.source.filter(function(b){return d?-1!=b.indexOf(a):-1!=b.toLowerCase().indexOf(e)})}else c=this.cellProperties.source;this.updateChoicesList(c)}else this.updateChoicesList([])},n.prototype.updateChoicesList=function(a){var b,c=j.getCaretPosition(this.TEXTAREA),d=j.getSelectionEndPosition(this.TEXTAREA),e=n.sortByRelevance(this.getValue(),a,this.cellProperties.filteringCaseSensitive);if(0!=this.cellProperties.filter){for(var f=[],g=0,h=e.length;h>g;g++)f.push(a[e[g]]);b=0,a=f}else b=e[0];this.choices=a,this.htEditor.loadData(i.pivot([a])),this.updateDropdownHeight(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(b),this.instance.listen(),this.TEXTAREA.focus(),j.setCaretPosition(this.TEXTAREA,c,c!=d?d:void 0)},n.prototype.updateDropdownHeight=function(){var a=this.htEditor.getColWidth(0)+j.getScrollbarWidth()+2,b=void 0===this.cellProperties.trimDropdown?!0:this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:b?void 0:a}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()},n.prototype.finishEditing=function(a){a||this.instance.removeHook("beforeKeyDown",d),m.prototype.finishEditing.apply(this,arguments)},n.prototype.highlightBestMatchingChoice=function(a){"number"==typeof a?this.htEditor.selectCell(a,0):this.htEditor.deselectCell()},n.sortByRelevance=function(a,b,c){var d,e,f,g,h,i=[],j=a.length,k=[];if(0===j){for(g=0,h=b.length;h>g;g++)k.push(g);return k}for(g=0,h=b.length;h>g;g++)d=Handsontable.helper.stringify(b[g]),e=c?d.indexOf(a):d.toLowerCase().indexOf(a.toLowerCase()),-1!=e&&(f=d.length-e-j,i.push({baseIndex:g,index:e,charsLeft:f,value:d}));for(i.sort(function(a,b){return-1===b.index?-1:-1===a.index?1:a.index<b.index?-1:b.index<a.index?1:a.index===b.index?a.charsLeft<b.charsLeft?-1:a.charsLeft>b.charsLeft?1:0:void 0}),g=0,h=i.length;h>g;g++)k.push(i[g].baseIndex);return k},n.prototype.getDropdownHeight=function(){var a=this.htEditor.getInstance().getRowHeight(0)||23;return this.choices.length>=10?10*a:this.choices.length*a+8},n.prototype.allowKeyEventPropagation=function(a){var b={row:this.htEditor.getSelectedRange()?this.htEditor.getSelectedRange().from.row:-1},c=!1;return a===i.keyCode.ARROW_DOWN&&b.row<this.htEditor.countRows()-1&&(c=!0),a===i.keyCode.ARROW_UP&&b.row>-1&&(c=!0),c},l("autocomplete",n)},{"./../dom.js":27,"./../editors.js":29,"./../helpers.js":42,"./handsontableEditor.js":35}],32:[function(a,b,c){"use strict";Object.defineProperties(c,{CheckboxEditor:{get:function(){return j}},__esModule:{value:!0}});var d,e,f,g=(d=a("./../editors.js"),d&&d.__esModule&&d||{"default":d}).registerEditor,h=(e=a("./_baseEditor.js"),e&&e.__esModule&&e||{"default":e}).BaseEditor,i=(f=a("./../dom.js"),f&&f.__esModule&&f||{"default":f}),j=function(){$traceurRuntime.superConstructor(k).apply(this,arguments)},k=j;$traceurRuntime.createClass(j,{beginEditing:function(){var a=this.TD.querySelector('input[type="checkbox"]');i.hasClass(a,"htBadValue")||a.click()},finishEditing:function(){},init:function(){},open:function(){},close:function(){},getValue:function(){},setValue:function(){},focus:function(){}},{},h),g("checkbox",j)},{"./../dom.js":27,"./../editors.js":29,"./_baseEditor.js":30}],33:[function(a,b,c){"use strict";Object.defineProperties(c,{DateEditor:{get:function(){return x}},__esModule:{value:!0}});var d,e,f,g,h,i,j,k=(d=a("./../helpers.js"),d&&d.__esModule&&d||{"default":d}),l=k.deepExtend,m=k.stopPropagation,n=k.isMetaKey,o=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),p=o.addClass,q=o.outerHeight,r=(f=a("./../editors.js"),f&&f.__esModule&&f||{"default":f}),s=(r.getEditor,r.registerEditor),t=(g=a("./textEditor.js"),g&&g.__esModule&&g||{"default":g}).TextEditor,u=(h=a("./../eventManager.js"),h&&h.__esModule&&h||{"default":h}).EventManager,v=(i=a("moment"),i&&i.__esModule&&i||{"default":i})["default"],w=(j=a("pikaday"),j&&j.__esModule&&j||{"default":j})["default"];Handsontable.editors=Handsontable.editors||{},Handsontable.editors.DateEditor=x;var x=function(a){this.$datePicker=null,this.datePicker=null,this.datePickerStyle=null,this.defaultDateFormat="DD/MM/YYYY",this.isCellEdited=!1,this.parentDestroyed=!1,$traceurRuntime.superConstructor(y).call(this,a)},y=x;$traceurRuntime.createClass(x,{init:function(){var a=this;if("function"!=typeof v)throw new Error("You need to include moment.js to your project.");if("function"!=typeof w)throw new Error("You need to include Pikaday to your project.");$traceurRuntime.superGet(this,y.prototype,"init").call(this),this.instance.addHook("afterDestroy",function(){a.parentDestroyed=!0,a.destroyElements()})},createElements:function(){$traceurRuntime.superGet(this,y.prototype,"createElements").call(this),this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,p(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker),this.$datePicker=new w(this.getDatePickerConfig());var a=new u(this);a.addEventListener(this.datePicker,"mousedown",function(a){return m(a)}),this.hideDatepicker()},destroyElements:function(){this.$datePicker.destroy()},prepare:function(a,b,c,d,e,f){this._opened=!1,$traceurRuntime.superGet(this,y.prototype,"prepare").call(this,a,b,c,d,e,f)},open:function(){var a=void 0!==arguments[0]?arguments[0]:null;$traceurRuntime.superGet(this,y.prototype,"open").call(this),this.showDatepicker(a)},close:function(){var a=this;this._opened=!1,this.instance._registerTimeout(setTimeout(function(){a.instance.selection.refreshBorders()},0)),$traceurRuntime.superGet(this,y.prototype,"close").call(this)},finishEditing:function(){var a=void 0!==arguments[0]?arguments[0]:!1,b=void 0!==arguments[1]?arguments[1]:!1;if(a){var c=this.originalValue;void 0!==c&&this.setValue(c)}this.hideDatepicker(),$traceurRuntime.superGet(this,y.prototype,"finishEditing").call(this,a,b)},showDatepicker:function(a){this.$datePicker.config(this.getDatePickerConfig());var b,c=this.TD.getBoundingClientRect(),d=this.cellProperties.dateFormat||this.defaultDateFormat,e=this.$datePicker.config(),f=this.instance.view.isMouseDown(),g=a?n(a.keyCode):!1;this.datePickerStyle.top=window.pageYOffset+c.top+q(this.TD)+"px",this.datePickerStyle.left=window.pageXOffset+c.left+"px",this.$datePicker._onInputFocus=function(){},e.format=d,this.originalValue?(b=this.originalValue,v(b,d,!0).isValid()&&this.$datePicker.setMoment(v(b,d),!0),g||f||this.setValue("")):this.cellProperties.defaultDate?(b=this.cellProperties.defaultDate,e.defaultDate=b,v(b,d,!0).isValid()&&this.$datePicker.setMoment(v(b,d),!0),g||f||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()},hideDatepicker:function(){this.datePickerStyle.display="none",this.$datePicker.hide()},getDatePickerConfig:function(){var a=this,b=this.TEXTAREA,c={};this.cellProperties&&this.cellProperties.datePickerConfig&&l(c,this.cellProperties.datePickerConfig);var d=c.onSelect,e=c.onClose;return c.field=b,c.trigger=b,c.container=this.datePicker,c.bound=!1,c.format=c.format||this.defaultDateFormat,c.reposition=c.reposition||!1,c.onSelect=function(b){isNaN(b.getTime())||(b=v(b).format(a.cellProperties.dateFormat||a.defaultDateFormat)),a.setValue(b),a.hideDatepicker(),d&&d()},c.onClose=function(){a.parentDestroyed||a.finishEditing(!1),e&&e()},c}},{},t),s("date",x)},{"./../dom.js":27,"./../editors.js":29,"./../eventManager.js":41,"./../helpers.js":42,"./textEditor.js":40,moment:void 0,pikaday:void 0}],34:[function(a,b,c){"use strict";Object.defineProperties(c,{DropdownEditor:{get:function(){return i}},__esModule:{value:!0}});var d,e,f=(d=a("./../editors.js"),d&&d.__esModule&&d||{"default":d}),g=(f.getEditor,f.registerEditor),h=(e=a("./autocompleteEditor.js"),e&&e.__esModule&&e||{"default":e}).AutocompleteEditor,i=function(){$traceurRuntime.superConstructor(j).apply(this,arguments)},j=i;$traceurRuntime.createClass(i,{prepare:function(a,b,c,d,e,f){$traceurRuntime.superGet(this,j.prototype,"prepare").call(this,a,b,c,d,e,f),this.cellProperties.filter=!1,this.cellProperties.strict=!0}},{},h),g("dropdown",i)},{"./../editors.js":29,"./autocompleteEditor.js":31}],35:[function(a,b,c){"use strict";Object.defineProperties(c,{HandsontableEditor:{get:function(){return m}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../helpers.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../editors.js"),f&&f.__esModule&&f||{"default":f}),k=(j.getEditor,j.registerEditor),l=(g=a("./textEditor.js"),g&&g.__esModule&&g||{"default":g}).TextEditor,m=l.prototype.extend();m.prototype.createElements=function(){l.prototype.createElements.apply(this,arguments);var a=document.createElement("DIV");a.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(a),this.htContainer=a,this.htEditor=new Handsontable(a,{autoColumnSize:!1,autoRowSize:!1}),this.assignHooks()},m.prototype.prepare=function(a,b,c,d,e,f){l.prototype.prepare.apply(this,arguments);var g=this,i={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var a=this.getValue();void 0!==a&&g.setValue(a),g.instance.destroyEditor()}};this.cellProperties.handsontable&&h.extend(i,f.handsontable),this.htEditor&&this.htEditor.destroy(),this.htEditor=new Handsontable(this.htContainer,i)};var n=function(a){if(null!=a&&null==a.isImmediatePropagationEnabled&&(a.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},a.isImmediatePropagationEnabled=!0,a.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled}),!a.isImmediatePropagationStopped()){var b,c=this.getActiveEditor(),d=c.htEditor.getInstance();if(a.keyCode==h.keyCode.ARROW_DOWN)if(d.getSelected()){var e=d.getSelected()[0],f=d.countRows()-1;b=Math.min(f,e+1)}else b=0;else if(a.keyCode==h.keyCode.ARROW_UP&&d.getSelected()){var e=d.getSelected()[0];b=e-1}void 0!==b&&(0>b?d.deselectCell():d.selectCell(b,0),d.getData().length&&(a.preventDefault(),a.stopImmediatePropagation(),c.instance.listen(),c.TEXTAREA.focus()))}};m.prototype.open=function(){this.instance.addHook("beforeKeyDown",n),l.prototype.open.apply(this,arguments),this.htEditor.render(),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),i.setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},m.prototype.close=function(){this.instance.removeHook("beforeKeyDown",n),this.instance.listen(),l.prototype.close.apply(this,arguments)},m.prototype.focus=function(){this.instance.listen(),l.prototype.focus.apply(this,arguments)},m.prototype.beginEditing=function(a){var b=this.instance.getSettings().onBeginEditing;b&&b()===!1||l.prototype.beginEditing.apply(this,arguments)},m.prototype.finishEditing=function(a,b){if(this.htEditor.isListening()&&this.instance.listen(),this.htEditor.getSelected()){var c=this.htEditor.getInstance().getValue();void 0!==c&&this.setValue(c)}return l.prototype.finishEditing.apply(this,arguments)},m.prototype.assignHooks=function(){var a=this;this.instance.addHook("afterDestroy",function(){a.htEditor&&a.htEditor.destroy()})},k("handsontable",m)},{"./../dom.js":27,"./../editors.js":29,"./../helpers.js":42,"./textEditor.js":40}],36:[function(a,b,c){"use strict";Object.defineProperties(c,{MobileTextEditor:{get:function(){return o}},__esModule:{value:!0}});var d,e,f,g,h,i=(d=a("./../helpers.js"),d&&d.__esModule&&d||{"default":d}),j=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),k=(f=a("./../editors.js"),f&&f.__esModule&&f||{"default":f}),l=(k.getEditor,k.registerEditor),m=(g=a("./_baseEditor.js"),g&&g.__esModule&&g||{"default":g}).BaseEditor,n=(h=a("./../eventManager.js"),h&&h.__esModule&&h||{"default":h}).eventManager,o=m.prototype.extend(),p={},q=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var a in this.controls)this.controls.hasOwnProperty(a)&&this.positionControls.appendChild(this.controls[a])};o.prototype.valueChanged=function(){return this.initValue!=this.getValue()},o.prototype.init=function(){var a=this;this.eventManager=n(this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){a.destroy()})},o.prototype.getValue=function(){return this.TEXTAREA.value},o.prototype.setValue=function(a){this.initValue=a,this.TEXTAREA.value=a},o.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),j.addClass(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),q.call(this),document.body.appendChild(this.editorContainer)},o.prototype.onBeforeKeyDown=function(a){var b=this,c=b.getActiveEditor();if(j.enableImmediatePropagation(a),a.target===c.TEXTAREA&&!a.isImmediatePropagationStopped()){var d=i.keyCode;switch(a.keyCode){case d.ENTER:c.close(),a.preventDefault();break;case d.BACKSPACE:a.stopImmediatePropagation()}}},o.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),j.addClass(this.editorContainer,"active"),j.removeClass(this.cellPointer,"hidden"),this.updateEditorPosition()},o.prototype.focus=function(){this.TEXTAREA.focus(),j.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},o.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),j.removeClass(this.editorContainer,"active")},o.prototype.scrollToView=function(){var a=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(a)},o.prototype.hideCellPointer=function(){j.hasClass(this.cellPointer,"hidden")||j.addClass(this.cellPointer,"hidden")},o.prototype.updateEditorPosition=function(a,b){
if(a&&b)a=parseInt(a,10),b=parseInt(b,10),this.editorContainer.style.top=b+"px",this.editorContainer.style.left=a+"px";else{var c=this.instance.getSelected(),d=this.instance.getCell(c[0],c[1]);if(p.cellPointer||(p.cellPointer={height:j.outerHeight(this.cellPointer),width:j.outerWidth(this.cellPointer)}),p.editorContainer||(p.editorContainer={width:j.outerWidth(this.editorContainer)}),void 0!==d){var e=this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer==window?0:j.getScrollLeft(this.instance.view.wt.wtOverlays.leftOverlay.holder),f=this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer==window?0:j.getScrollTop(this.instance.view.wt.wtOverlays.topOverlay.holder),g=j.offset(d),h=j.outerWidth(d),i={x:e,y:f};this.editorContainer.style.top=parseInt(g.top+j.outerHeight(d)-i.y+p.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(window.innerWidth/2-p.editorContainer.width/2,10)+"px",g.left+h/2>parseInt(this.editorContainer.style.left,10)+p.editorContainer.width?this.editorContainer.style.left=window.innerWidth-p.editorContainer.width+"px":g.left+h/2<parseInt(this.editorContainer.style.left,10)+20&&(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(g.left-p.cellPointer.width/2-j.offset(this.editorContainer).left+h/2-i.x,10)+"px"}}},o.prototype.updateEditorData=function(){var a=this.instance.getSelected(),b=this.instance.getDataAtCell(a[0],a[1]);this.row=a[0],this.col=a[1],this.setValue(b),this.updateEditorPosition()},o.prototype.prepareAndSave=function(){var a;return this.valueChanged()?(a=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],void this.saveValue(a)):!0},o.prototype.bindEvents=function(){var a=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(b){a.prepareAndSave(),a.instance.selection.transformStart(0,-1,null,!0),a.updateEditorData(),b.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(b){a.prepareAndSave(),a.instance.selection.transformStart(0,1,null,!0),a.updateEditorData(),b.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(b){a.prepareAndSave(),a.instance.selection.transformStart(-1,0,null,!0),a.updateEditorData(),b.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(b){a.prepareAndSave(),a.instance.selection.transformStart(1,0,null,!0),a.updateEditorData(),b.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(b){if(1==b.touches.length){var c=b.touches[0],d={x:a.editorContainer.offsetLeft,y:a.editorContainer.offsetTop},e={x:c.pageX-d.x,y:c.pageY-d.y};a.eventManager.addEventListener(this,"touchmove",function(b){var c=b.touches[0];a.updateEditorPosition(c.pageX-e.x,c.pageY-e.y),a.hideCellPointer(),b.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(b){j.isChildOf(b.target,a.editorContainer)||j.isChildOf(b.target,a.instance.rootElement)||a.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder,"scroll",function(b){a.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer!=window&&a.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder,"scroll",function(b){a.instance.view.wt.wtOverlays.topOverlay.trimmingContainer!=window&&a.hideCellPointer()})},o.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},l("mobile",o)},{"./../dom.js":27,"./../editors.js":29,"./../eventManager.js":41,"./../helpers.js":42,"./_baseEditor.js":30}],37:[function(a,b,c){"use strict";Object.defineProperties(c,{NumericEditor:{get:function(){return k}},__esModule:{value:!0}});var d,e,f,g=(d=a("numeral"),d&&d.__esModule&&d||{"default":d})["default"],h=(e=a("./../editors.js"),e&&e.__esModule&&e||{"default":e}),i=(h.getEditor,h.registerEditor),j=(f=a("./textEditor.js"),f&&f.__esModule&&f||{"default":f}).TextEditor,k=function(){$traceurRuntime.superConstructor(l).apply(this,arguments)},l=k;$traceurRuntime.createClass(k,{beginEditing:function(a){if("undefined"==typeof a&&this.originalValue){"undefined"!=typeof this.cellProperties.language&&g.language(this.cellProperties.language);var b=g.languageData().delimiters.decimal;a=(""+this.originalValue).replace(".",b)}$traceurRuntime.superGet(this,l.prototype,"beginEditing").call(this,a)}},{},j),i("numeric",k)},{"./../editors.js":29,"./textEditor.js":40,numeral:"numeral"}],38:[function(a,b,c){"use strict";Object.defineProperties(c,{PasswordEditor:{get:function(){return k}},__esModule:{value:!0}});var d,e,f,g=(d=a("./../dom.js"),d&&d.__esModule&&d||{"default":d}),h=(e=a("./../editors.js"),e&&e.__esModule&&e||{"default":e}),i=(h.getEditor,h.registerEditor),j=(f=a("./textEditor.js"),f&&f.__esModule&&f||{"default":f}).TextEditor,k=function(){$traceurRuntime.superConstructor(l).apply(this,arguments)},l=k;$traceurRuntime.createClass(k,{createElements:function(){$traceurRuntime.superGet(this,l.prototype,"createElements").call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,g.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}},{},j),i("password",k)},{"./../dom.js":27,"./../editors.js":29,"./textEditor.js":40}],39:[function(a,b,c){"use strict";Object.defineProperties(c,{SelectEditor:{get:function(){return m}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../dom.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../editors.js"),f&&f.__esModule&&f||{"default":f}),k=(j.getEditor,j.registerEditor),l=(g=a("./_baseEditor.js"),g&&g.__esModule&&g||{"default":g}).BaseEditor,m=l.prototype.extend();m.prototype.init=function(){this.select=document.createElement("SELECT"),h.addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select),this.registerHooks()},m.prototype.registerHooks=function(){var a=this;this.instance.addHook("afterScrollVertically",function(){return a.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){return a.refreshDimensions()}),this.instance.addHook("afterRowResize",function(){return a.refreshDimensions()})},m.prototype.prepare=function(){l.prototype.prepare.apply(this,arguments);var a,b=this.cellProperties.selectOptions;a="function"==typeof b?this.prepareOptions(b(this.row,this.col,this.prop)):this.prepareOptions(b),h.empty(this.select);for(var c in a)if(a.hasOwnProperty(c)){var d=document.createElement("OPTION");d.value=c,h.fastInnerHTML(d,a[c]),this.select.appendChild(d)}},m.prototype.prepareOptions=function(a){var b={};if(Array.isArray(a))for(var c=0,d=a.length;d>c;c++)b[a[c]]=a[c];else"object"==typeof a&&(b=a);return b},m.prototype.getValue=function(){return this.select.value},m.prototype.setValue=function(a){this.select.value=a};var n=function(a){var b=this,c=b.getActiveEditor();switch(null!=a&&null==a.isImmediatePropagationEnabled&&(a.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1},a.isImmediatePropagationEnabled=!0,a.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled}),a.keyCode){case i.keyCode.ARROW_UP:var d=c.select.selectedIndex-1;d>=0&&(c.select[d].selected=!0),a.stopImmediatePropagation(),a.preventDefault();break;case i.keyCode.ARROW_DOWN:var e=c.select.selectedIndex+1;e<=c.select.length-1&&(c.select[e].selected=!0),a.stopImmediatePropagation(),a.preventDefault()}};m.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},m.prototype.open=function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.instance.addHook("beforeKeyDown",n)},m.prototype.close=function(){this._opened=!1,this.select.style.display="none",this.instance.removeHook("beforeKeyDown",n)},m.prototype.focus=function(){this.select.focus()},m.prototype.refreshDimensions=function(){if(this.state===Handsontable.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close();var a,b=h.outerWidth(this.TD)+1,c=h.outerHeight(this.TD)+1,d=h.offset(this.TD),e=h.offset(this.instance.rootElement),f=h.getScrollableElement(this.TD),g=d.top-e.top-1-(f.scrollTop||0),i=d.left-e.left-1-(f.scrollLeft||0),j=this.checkEditorSection(),k=this.instance.getSettings();k.rowHeaders?1:0,k.colHeaders?1:0;switch(j){case"top":a=h.getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":a=h.getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"corner":a=h.getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelected()[0]&&(g+=1),0===this.instance.getSelected()[1]&&(i+=1);var l=this.select.style;a&&-1!=a?l[a[0]]=a[1]:h.resetCssTransform(this.select);var m=h.getComputedStyle(this.TD);parseInt(m.borderTopWidth,10)>0&&(c-=1),parseInt(m.borderLeftWidth,10)>0&&(b-=1),l.height=c+"px",l.minWidth=b+"px",l.top=g+"px",l.left=i+"px",l.margin="0px"}},m.prototype.getEditedCell=function(){var a,b=this.checkEditorSection();switch(b){case"top":a=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=101;break;case"corner":a=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=103;break;case"left":a=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=102;break;default:a=this.instance.getCell(this.row,this.col),this.select.style.zIndex=""}return-1!=a&&-2!=a?a:void 0},k("select",m)},{"./../dom.js":27,"./../editors.js":29,"./../helpers.js":42,"./_baseEditor.js":30}],40:[function(a,b,c){"use strict";Object.defineProperties(c,{TextEditor:{get:function(){return q}},__esModule:{value:!0}});var d,e,f,g,h,i,j=(d=a("./../dom.js"),d&&d.__esModule&&d||{"default":d}),k=(e=a("./../helpers.js"),e&&e.__esModule&&e||{"default":e}),l=(f=a("autoResize"),f&&f.__esModule&&f||{"default":f})["default"],m=(g=a("./_baseEditor.js"),g&&g.__esModule&&g||{"default":g}).BaseEditor,n=(h=a("./../eventManager.js"),h&&h.__esModule&&h||{"default":h}).eventManager,o=(i=a("./../editors.js"),i&&i.__esModule&&i||{"default":i}),p=(o.getEditor,o.registerEditor),q=m.prototype.extend();q.prototype.init=function(){var a=this;this.createElements(),this.eventManager=n(this),this.bindEvents(),this.autoResize=l(),this.instance.addHook("afterDestroy",function(){a.destroy()})},q.prototype.getValue=function(){return this.TEXTAREA.value},q.prototype.setValue=function(a){this.TEXTAREA.value=a};var r=function(a){var b,c,d=this,e=d.getActiveEditor();if(b=k.keyCode,c=(a.ctrlKey||a.metaKey)&&!a.altKey,j.enableImmediatePropagation(a),a.target===e.TEXTAREA&&!a.isImmediatePropagationStopped()){if(17===a.keyCode||224===a.keyCode||91===a.keyCode||93===a.keyCode)return void a.stopImmediatePropagation();switch(a.keyCode){case b.ARROW_RIGHT:e.isInFullEditMode()&&(!e.isWaiting()&&!e.allowKeyEventPropagation||!e.isWaiting()&&e.allowKeyEventPropagation&&!e.allowKeyEventPropagation(a.keyCode))&&a.stopImmediatePropagation();break;case b.ARROW_LEFT:e.isInFullEditMode()&&(!e.isWaiting()&&!e.allowKeyEventPropagation||!e.isWaiting()&&e.allowKeyEventPropagation&&!e.allowKeyEventPropagation(a.keyCode))&&a.stopImmediatePropagation();break;case b.ARROW_UP:case b.ARROW_DOWN:e.isInFullEditMode()&&(!e.isWaiting()&&!e.allowKeyEventPropagation||!e.isWaiting()&&e.allowKeyEventPropagation&&!e.allowKeyEventPropagation(a.keyCode))&&a.stopImmediatePropagation();break;case b.ENTER:var f=e.instance.getSelected(),g=!(f[0]===f[2]&&f[1]===f[3]);if(c&&!g||a.altKey){if(e.isOpened()){var h=j.getCaretPosition(e.TEXTAREA),i=e.getValue(),l=i.slice(0,h)+"\n"+i.slice(h);e.setValue(l),j.setCaretPosition(e.TEXTAREA,h+1)}else e.beginEditing(e.originalValue+"\n");a.stopImmediatePropagation()}a.preventDefault();break;case b.A:case b.X:case b.C:case b.V:c&&a.stopImmediatePropagation();break;case b.BACKSPACE:case b.DELETE:case b.HOME:case b.END:a.stopImmediatePropagation()}-1===[b.ARROW_UP,b.ARROW_RIGHT,b.ARROW_DOWN,b.ARROW_LEFT].indexOf(a.keyCode)&&e.autoResize.resize(String.fromCharCode(a.keyCode))}};q.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",r)},q.prototype.close=function(){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",r)},q.prototype.focus=function(){this.TEXTAREA.focus(),j.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},q.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),j.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),j.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var a=this;this.instance._registerTimeout(setTimeout(function(){a.refreshDimensions()},0))},q.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},q.prototype.getEditedCell=function(){var a,b=this.checkEditorSection();switch(b){case"top":a=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"corner":a=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":a=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:a=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return-1!=a&&-2!=a?a:void 0},q.prototype.refreshDimensions=function(){if(this.state===Handsontable.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close();var a,b=j.offset(this.TD),c=j.offset(this.instance.rootElement),d=j.getScrollableElement(this.TD),e=b.top-c.top-1-(d.scrollTop||0),f=b.left-c.left-1-(d.scrollLeft||0),g=this.instance.getSettings(),h=(g.rowHeaders?1:0,g.colHeaders?1:0,this.checkEditorSection()),i=this.TD.style.backgroundColor;switch(h){case"top":a=j.getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":a=j.getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"corner":a=j.getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelected()[0]&&(e+=1),0===this.instance.getSelected()[1]&&(f+=1),a&&-1!=a?this.textareaParentStyle[a[0]]=a[1]:j.resetCssTransform(this.textareaParentStyle),this.textareaParentStyle.top=e+"px",this.textareaParentStyle.left=f+"px";var k=this.TD.offsetTop-this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),l=this.TD.offsetLeft-this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(),m=j.innerWidth(this.TD)-8,n=this.instance.view.maximumVisibleElementWidth(l)-9,o=this.TD.scrollHeight+1,p=Math.max(this.instance.view.maximumVisibleElementHeight(k)-2,23),q=j.getComputedStyle(this.TD);this.TEXTAREA.style.fontSize=q.fontSize,this.TEXTAREA.style.fontFamily=q.fontFamily,this.TEXTAREA.style.backgroundColor="",this.TEXTAREA.style.backgroundColor=i?i:j.getComputedStyle(this.TEXTAREA).backgroundColor,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(o,p),maxHeight:p,minWidth:Math.min(m,n),maxWidth:n},!0),this.textareaParentStyle.display="block"}},q.prototype.bindEvents=function(){var a=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(a){k.stopPropagation(a)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(a){k.stopPropagation(a)}),this.instance.addHook("afterScrollVertically",function(){a.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){a.refreshDimensions(),a.focus()}),this.instance.addHook("afterRowResize",function(){a.refreshDimensions(),a.focus()}),this.instance.addHook("afterDestroy",function(){a.eventManager.destroy()})},q.prototype.destroy=function(){this.eventManager.destroy()},p("text",q)},{"./../dom.js":27,"./../editors.js":29,"./../eventManager.js":41,"./../helpers.js":42,"./_baseEditor.js":30,autoResize:"autoResize"}],41:[function(a,b,c){"use strict";function d(a,b){var c,d,e,f,h,i="HOT-TABLE";if(b.isTargetWebComponent=!1,b.realTarget=b.target,!Handsontable.eventManager.isHotTableEnv)return b;for(b=g.polymerWrap(b),h=b.path?b.path.length:0;h--;){if(b.path[h].nodeName===i)c=!0;else if(c&&b.path[h].shadowRoot){f=b.path[h];break}0!==h||f||(f=b.path[h])}return f||(f=b.target),b.isTargetWebComponent=!0,g.isWebComponentSupportedNatively()?b.realTarget=b.srcElement||b.toElement:(a instanceof Handsontable.Core||a instanceof Walkontable)&&(a instanceof Handsontable.Core?d=a.view.wt.wtTable.TABLE:a instanceof Walkontable&&(d=a.wtTable.TABLE.parentNode.parentNode),e=g.closest(b.target,[i],d),e?b.realTarget=d.querySelector(i)||b.target:b.realTarget=b.target),Object.defineProperty(b,"target",{get:function(){return g.polymerWrap(f)},enumerable:!0,configurable:!0}),b}function e(a){return new h(a)}Object.defineProperties(c,{EventManager:{get:function(){return h}},eventManager:{get:function(){return e}},__esModule:{value:!0}});var f,g=(f=a("./dom.js"),f&&f.__esModule&&f||{"default":f}),h=function(){var a=void 0!==arguments[0]?arguments[0]:null;this.context=a||this,this.context.eventListeners||(this.context.eventListeners=[])};$traceurRuntime.createClass(h,{addEventListener:function(a,b,c){function e(a){void 0==a.target&&void 0!=a.srcElement&&(a.definePoperty?a.definePoperty("target",{value:a.srcElement}):a.target=a.srcElement),void 0==a.preventDefault&&(a.definePoperty?a.definePoperty("preventDefault",{value:function(){this.returnValue=!1}}):a.preventDefault=function(){this.returnValue=!1}),a=d(g,a),c.call(this,a)}var f=this,g=this.context;return this.context.eventListeners.push({element:a,event:b,callback:c,callbackProxy:e}),window.addEventListener?a.addEventListener(b,e,!1):a.attachEvent("on"+b,e),Handsontable.countEventManagerListeners++,function(){f.removeEventListener(a,b,c)}},removeEventListener:function(a,b,c){for(var d,e=this.context.eventListeners.length;e--;)if(d=this.context.eventListeners[e],d.event==b&&d.element==a){if(c&&c!=d.callback)continue;this.context.eventListeners.splice(e,1),d.element.removeEventListener?d.element.removeEventListener(d.event,d.callbackProxy,!1):d.element.detachEvent("on"+d.event,d.callbackProxy),Handsontable.countEventManagerListeners--}},clearEvents:function(){if(this.context)for(var a=this.context.eventListeners.length;a--;){var b=this.context.eventListeners[a];b&&this.removeEventListener(b.element,b.event,b.callback)}},clear:function(){this.clearEvents()},destroy:function(){this.clearEvents(),this.context=null},fireEvent:function(a,b){var c,d={bubbles:!0,cancelable:"mousemove"!==b,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};document.createEvent?(c=document.createEvent("MouseEvents"),c.initMouseEvent(b,d.bubbles,d.cancelable,d.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget||document.body.parentNode)):c=document.createEventObject(),a.dispatchEvent?a.dispatchEvent(c):a.fireEvent("on"+b,c)}},{}),window.Handsontable=window.Handsontable||{},Handsontable.countEventManagerListeners=0,Handsontable.eventManager=e},{"./dom.js":27}],42:[function(a,b,c){"use strict";function d(a){return 32==a||a>=48&&57>=a||a>=96&&111>=a||a>=186&&192>=a||a>=219&&222>=a||a>=226||a>=65&&90>=a}function e(a){var b=[$.ARROW_DOWN,$.ARROW_UP,$.ARROW_LEFT,$.ARROW_RIGHT,$.HOME,$.END,$.DELETE,$.BACKSPACE,$.F1,$.F2,$.F3,$.F4,$.F5,$.F6,$.F7,$.F8,$.F9,$.F10,$.F11,$.F12,$.TAB,$.PAGE_DOWN,$.PAGE_UP,$.ENTER,$.ESCAPE,$.SHIFT,$.CAPS_LOCK,$.ALT];return-1!=b.indexOf(a)}function f(a){return-1!=[$.CONTROL_LEFT,224,$.COMMAND_LEFT,$.COMMAND_RIGHT].indexOf(a)}function g(a){switch(typeof a){case"string":case"number":return a+"";case"object":return null===a?"":a.toString();case"undefined":return"";default:return a.toString()}}function h(a){return a[0].toUpperCase()+a.substr(1)}function i(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=[],d=a.length;d--;){var e=g(a[d]).toLowerCase();-1===c.indexOf(e)&&c.push(e)}return 1===c.length}function j(a){var b;if(Array.isArray(a))b=[];else{b={};for(var c in a)a.hasOwnProperty(c)&&(a[c]&&"object"==typeof a[c]&&!Array.isArray(a[c])?b[c]=j(a[c]):Array.isArray(a[c])?a[c].length&&"object"==typeof a[c][0]&&!Array.isArray(a[c][0])?b[c]=[j(a[c][0])]:b[c]=[]:b[c]=null)}return b}function k(a){for(var b,c=a+1,d="";c>0;)b=(c-1)%26,d=String.fromCharCode(65+b)+d,c=parseInt((c-b)/26,10);return d}function l(a,b){a="number"==typeof a?a:100,b="number"==typeof b?b:4;var c,d,e=[];for(c=0;a>c;c++){var f=[];for(d=0;b>d;d++)f.push(k(d)+(c+1));e.push(f)}return e}function m(a,b){a="number"==typeof a?a:100,b="number"==typeof b?b:4;var c,d,e=[];for(c=0;a>c;c++){var f={};for(d=0;b>d;d++)f["prop"+d]=k(d)+(c+1);e.push(f)}return e}function n(a){var b=typeof a;return"number"==b?!isNaN(a)&&isFinite(a):"string"==b?a.length?1==a.length?/\d/.test(a):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(a):!1:"object"==b?!(!a||"number"!=typeof a.valueOf()||a instanceof Date):!1}function o(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+a()+a()}function p(a,b){return b.prototype.constructor=b,a.prototype=new b,a.prototype.constructor=a,a}function q(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function r(a,b){for(var c in b)b.hasOwnProperty(c)&&(b[c]&&"object"==typeof b[c]?(a[c]||(Array.isArray(b[c])?a[c]=[]:a[c]={}),r(a[c],b[c])):a[c]=b[c])}function s(a){return"object"==typeof a?JSON.parse(JSON.stringify(a)):a}function t(a,b){return JSON.stringify(a)===JSON.stringify(b)}function u(a){var b;if("object"==typeof a.__proto__)b=a.__proto__;else{var c,d=a.constructor;"function"==typeof a.constructor&&(c=d,delete a.constructor&&(d=a.constructor,a.constructor=c)),b=d?d.prototype:null}return b}function v(a,b){function c(){}p(c,a);for(var d=0,e=b.length;e>d;d++)c.prototype[b[d]]=void 0;return c}function w(a){var b,c,d,e,f=[],g=0;for(b=0,c=a.length;c>b;b++)for(d=0,e=a[b].length;e>d;d++)d==g&&(f.push([]),g++),f[d].push(a[b][d]);return f}function x(a){for(var b=0,c=a.length;c>b;)a[b]=[a[b]],b++}function y(a,b){for(var c=0,d=b.length;d>c;)a.push(b[c]),c++}function z(a){var b=["INPUT","SELECT","TEXTAREA"];return b.indexOf(a.nodeName)>-1||"true"===a.contentEditable}function A(a){return z(a)&&-1==a.className.indexOf("handsontableInput")&&-1==a.className.indexOf("copyPaste")}function B(a){return"[object Object]"==Object.prototype.toString.call(a)}function C(a){var b=[];if(!a||0===a.length||!a[0]||0===a[0].length)return b;for(var c=a.length,d=a[0].length,e=0;c>e;e++)for(var f=0;d>f;f++)b[f]||(b[f]=[]),b[f][e]=a[e][f];return b}function D(a,b){return function(){return a.apply(b,arguments)}}function E(a,b){function c(a){var b=Handsontable.cellTypes[a];if("undefined"==typeof b)throw new Error('You declared cell type "'+a+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return b}return b="undefined"==typeof b?!0:b,function(d,e){return function f(d){if(d){if(d.hasOwnProperty(a)&&void 0!==d[a])return d[a];if(d.hasOwnProperty("type")&&d.type){var e;if("string"!=typeof d.type)throw new Error("Cell type must be a string ");if(e=c(d.type),e.hasOwnProperty(a))return e[a];if(b)return}return f(u(d))}}("number"==typeof d?this.getCellMeta(d,e):d)}}function F(a){return a||(a=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)}function G(){return"ontouchstart"in window}function H(a){"function"==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function I(a){if(a.pageX)return a.pageX;var b=Z.getWindowScrollLeft(),c=a.clientX+b;return c}function J(a){if(a.pageY)return a.pageY;var b=Z.getWindowScrollTop(),c=a.clientY+b;return c}function K(a,b,c,d){d.value=c,d.writable=d.writable===!1?!1:!0,d.enumerable=d.enumerable===!1?!1:!0,d.configurable=d.configurable===!1?!1:!0,Object.defineProperty(a,b,d)}function L(a){return ba.call(window,a)}function M(a){ca.call(window,a)}function N(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function O(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function P(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function Q(a,b){for(var c in a)if((!a.hasOwnProperty||a.hasOwnProperty&&a.hasOwnProperty(c))&&b(a[c],c,a)===!1)break;return a}function R(a,b,c){var d=-1;for("function"==typeof b?(c=b,b=a):d=a-1;++d<=b&&c(d)!==!1;);}function S(a){return N(a,function(a,b){return a+b},0)}function T(a){return a.length?S(a)/a.length:0}function U(a){return/^([0-9][0-9]?\%$)|(^100\%$)/.test(a)}function V(a,b){return b=parseInt(b.toString().replace("%",""),10),b=parseInt(a*b/100)}function W(a){function b(){var b=this,g=arguments,h=Date.now(),i=!1;e.lastCallThrottled=!0,d||(d=h,i=!0);var j=c-(h-d);return i?(e.lastCallThrottled=!1,a.apply(this,g)):(f&&clearTimeout(f),f=setTimeout(function(){e.lastCallThrottled=!1,a.apply(b,g),d=0,f=void 0},j)),e}var c=void 0!==arguments[1]?arguments[1]:200,d=0,e={lastCallThrottled:!0},f=null;return b}function X(a){function b(){g=e}function c(){return g?(g--,a.apply(this,arguments)):f.apply(this,arguments)}var d=void 0!==arguments[1]?arguments[1]:200,e=void 0!==arguments[2]?arguments[2]:10,f=W(a,d),g=e;return c.clearHits=b,c}Object.defineProperties(c,{isPrintableChar:{get:function(){return d}},isMetaKey:{get:function(){return e}},isCtrlKey:{get:function(){return f}},stringify:{get:function(){return g}},toUpperCaseFirst:{get:function(){return h}},equalsIgnoreCase:{get:function(){return i}},duckSchema:{get:function(){return j}},spreadsheetColumnLabel:{get:function(){return k}},createSpreadsheetData:{get:function(){return l}},createSpreadsheetObjectData:{get:function(){return m}},isNumeric:{get:function(){return n}},randomString:{get:function(){return o}},inherit:{get:function(){return p}},extend:{get:function(){return q}},deepExtend:{get:function(){return r}},deepClone:{get:function(){return s}},isObjectEquals:{get:function(){return t}},getPrototypeOf:{get:function(){return u}},columnFactory:{get:function(){return v}},translateRowsToColumns:{get:function(){return w}},to2dArray:{get:function(){return x}},extendArray:{get:function(){return y}},isInput:{get:function(){return z}},isOutsideInput:{get:function(){return A}},keyCode:{get:function(){return $}},isObject:{get:function(){return B}},pivot:{get:function(){return C}},proxy:{get:function(){return D}},cellMethodLookupFactory:{get:function(){return E}},isMobileBrowser:{get:function(){return F}},isTouchSupported:{get:function(){return G}},stopPropagation:{get:function(){return H}},pageX:{get:function(){return I}},pageY:{get:function(){return J}},defineGetter:{get:function(){return K}},requestAnimationFrame:{get:function(){return L}},cancelAnimationFrame:{get:function(){return M}},arrayFilter:{get:function(){return O}},arrayEach:{get:function(){return P}},objectEach:{get:function(){return Q}},rangeEach:{get:function(){return R}},arraySum:{get:function(){return S}},arrayAvg:{get:function(){return T}},isPercentValue:{get:function(){return U}},valueAccordingPercent:{get:function(){return V}},throttle:{get:function(){return W}},throttleAfterHits:{get:function(){return X}},__esModule:{value:!0}});for(var Y,Z=(Y=a("./dom.js"),Y&&Y.__esModule&&Y||{"default":Y}),$={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},_=0,aa=["ms","moz","webkit","o"],ba=window.requestAnimationFrame,ca=window.cancelAnimationFrame,da=0;da<aa.length&&!ba;++da)ba=window[aa[da]+"RequestAnimationFrame"],ca=window[aa[da]+"CancelAnimationFrame"]||window[aa[da]+"CancelRequestAnimationFrame"];ba||(ba=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-_)),d=window.setTimeout(function(){a(b+c)},c);return _=b+c,d}),ca||(ca=function(a){clearTimeout(a)}),window.Handsontable=window.Handsontable||{},Handsontable.helper={arrayAvg:T,arrayEach:P,arrayFilter:O,arrayReduce:N,arraySum:S,cancelAnimationFrame:M,cellMethodLookupFactory:E,columnFactory:v,createSpreadsheetData:l,createSpreadsheetObjectData:m,deepClone:s,deepExtend:r,defineGetter:K,duckSchema:j,equalsIgnoreCase:i,extend:q,extendArray:y,getPrototypeOf:u,inherit:p,isCtrlKey:f,isInput:z,isMetaKey:e,isMobileBrowser:F,isNumeric:n,isObject:B,isObjectEquals:t,isOutsideInput:A,isPercentValue:U,isPrintableChar:d,isTouchSupported:G,keyCode:$,objectEach:Q,pageX:I,pageY:J,pivot:C,proxy:D,randomString:o,rangeEach:R,requestAnimationFrame:L,spreadsheetColumnLabel:k,stopPropagation:H,stringify:g,throttle:W,throttleAfterHits:X,to2dArray:x,toUpperCaseFirst:h,translateRowsToColumns:w,valueAccordingPercent:V}},{"./dom.js":27}],43:[function(a,b,c){"use strict";function d(){function a(a){return null!==a&&!c(a)&&("string"==typeof a||"number"==typeof a)}function b(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function c(a){return a!==a}var d={arrayMap:[],weakMap:new WeakMap};return{get:function(c){return a(c)?d.arrayMap[c]:b(c)?d.weakMap.get(c):void 0},set:function(c,e){if(a(c))d.arrayMap[c]=e;else{if(!b(c))throw new Error("Invalid key type");d.weakMap.set(c,e)}},"delete":function(c){a(c)?delete d.arrayMap[c]:b(c)&&d.weakMap["delete"](c)}}}Object.defineProperties(c,{MultiMap:{get:function(){return d}},__esModule:{value:!0}}),window.MultiMap=d},{}],44:[function(a,b,c){"use strict";Object.defineProperties(c,{Hooks:{get:function(){return j}},__esModule:{value:!0}});var d,e,f=["afterCellMetaReset","afterChange","afterChangesObserved","afterColumnMove","afterColumnResize","afterContextMenuDefaultOptions","afterContextMenuHide","afterContextMenuShow","afterCopyLimit","afterCreateCol","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterIsMultipleSelectionCheck","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellMouseDown","afterOnCellMouseOver","afterRemoveCol","afterRemoveRow","afterRender","afterRenderer","afterRowMove","afterRowResize","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterUpdateSettings","afterValidate","beforeAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeInit","beforeInitWalkontable","beforeKeyDown","beforeOnCellMouseDown","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","construct","init","modifyCol","modifyColWidth","modifyRow","modifyRowHeight","persistentStateLoad","persistentStateReset","persistentStateSave"],g=((d=a("./eventManager.js"),
d&&d.__esModule&&d||{"default":d}).EventManager,e=a("./helpers.js"),e&&e.__esModule&&e||{"default":e}),h=g.arrayEach,i=g.objectEach,j=function(){this.globalBucket=this.createEmptyBucket()};$traceurRuntime.createClass(j,{createEmptyBucket:function(){var a=Object.create(null);return h(f,function(b){return a[b]=[]}),a},getBucket:function(){var a=void 0!==arguments[0]?arguments[0]:null;return a?(a.pluginHookBucket||(a.pluginHookBucket=this.createEmptyBucket()),a.pluginHookBucket):this.globalBucket},add:function(a,b){var c=void 0!==arguments[2]?arguments[2]:null,d=this;if(Array.isArray(b))h(b,function(b){return d.add(a,b,c)});else{var e=this.getBucket(c);"undefined"==typeof e[a]&&(this.register(a),e[a]=[]),b.skip=!1,-1===e[a].indexOf(b)&&e[a].push(b)}return this},once:function(a,b){var c=void 0!==arguments[2]?arguments[2]:null,d=this;Array.isArray(b)?h(b,function(b){return d.once(a,b,c)}):(b.runOnce=!0,this.add(a,b,c))},remove:function(a,b){var c=void 0!==arguments[2]?arguments[2]:null,d=this.getBucket(c);return"undefined"!=typeof d[a]&&d[a].indexOf(b)>=0?(b.skip=!0,!0):!1},run:function(a,b,c,d,e,f,g,i){var j=this,k=this.globalBucket[b];k&&k.length&&h(k,function(h){if(h&&!h.skip){var k=h.call(a,c,d,e,f,g,i);void 0!==k&&(c=k),h.runOnce&&j.remove(b,h)}});var l=this.getBucket(a)[b];return l&&l.length&&h(l,function(h){if(h&&!h.skip){var k=h.call(a,c,d,e,f,g,i);void 0!==k&&(c=k),h.runOnce&&j.remove(b,h,a)}}),c},destroy:function(){var a=void 0!==arguments[0]?arguments[0]:null;i(this.getBucket(a),function(a,b,c){return c[b].length=0})},register:function(a){this.isRegistered(a)||f.push(a)},deregister:function(a){this.isRegistered(a)&&f.splice(f.indexOf(a),1)},isRegistered:function(a){return f.indexOf(a)>=0},getRegistered:function(){return f}},{}),Handsontable.utils=Handsontable.utils||{},Handsontable.utils.Hooks=j},{"./eventManager.js":41,"./helpers.js":42}],45:[function(a,b,c){"use strict";function d(a,b){Handsontable.hooks.add("construct",function(){var c;a=a.toLowerCase(),f.has(this)||f.set(this,{}),c=f.get(this),c[a]||(c[a]=new b(this))}),Handsontable.hooks.add("afterDestroy",function(){var a,b;if(f.has(this)){b=f.get(this);for(a in b)b.hasOwnProperty(a)&&b[a].destroy();f["delete"](this)}})}function e(a,b){if("string"!=typeof b)throw Error('Only strings can be passed as "plugin" parameter');var c=b.toLowerCase();return f.has(a)&&f.get(a)[c]?f.get(a)[c]:void 0}Object.defineProperties(c,{registerPlugin:{get:function(){return d}},getPlugin:{get:function(){return e}},__esModule:{value:!0}});var f=new WeakMap},{}],46:[function(a,b,c){"use strict";Object.defineProperties(c,{"default":{get:function(){return k}},__esModule:{value:!0}});var d,e=(d=a("./../helpers.js"),d&&d.__esModule&&d||{"default":d}),f=e.defineGetter,g=e.objectEach,h=e.arrayEach,i=new WeakMap,j=function(a){var b=this;f(this,"hot",a,{writable:!1}),i.set(this,{hooks:{}}),this.enabled=!1,this.hot.addHook("afterUpdateSettings",function(){return b.onUpdateSettings()}),this.hot.addHook("beforeInit",function(){return b.init()})};$traceurRuntime.createClass(j,{init:function(){this.isEnabled&&(this[(this.isEnabled()?"enable":"disable")+"Plugin"](),this.enabled=this.isEnabled())},enablePlugin:function(){this.enabled=!0},disablePlugin:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1},addHook:function(a,b){var c=i.get(this).hooks[a]=i.get(this).hooks[a]||[];this.hot.addHook(a,b),c.push(b),i.get(this).hooks[a]=c},removeHooks:function(a){var b=this;h(i.get(this).hooks[a]||[],function(c){b.hot.removeHook(a,c)})},clearHooks:function(){var a=this,b=i.get(this).hooks;g(b,function(b,c){return a.removeHooks(c)}),b.length=0},onUpdateSettings:function(){this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin())},destroy:function(){this.eventManager&&this.eventManager.destroy(),this.clearHooks(),delete this.hot}},{});var k=j},{"./../helpers.js":42}],47:[function(a,b,c){"use strict";Object.defineProperties(c,{AutoColumnSize:{get:function(){return x}},__esModule:{value:!0}});var d,e,f,g,h,i,j=(d=a("./../_base.js"),d&&d.__esModule&&d||{"default":d})["default"],k=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),l=k.arrayEach,m=k.arrayFilter,n=(k.objectEach,k.rangeEach),o=k.requestAnimationFrame,p=k.cancelAnimationFrame,q=k.isObject,r=k.isPercentValue,s=k.valueAccordingPercent,t=(f=a("./../../utils/ghostTable.js"),f&&f.__esModule&&f||{"default":f}).GhostTable,u=(g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}).registerPlugin,v=(h=a("./../../utils/samplesGenerator.js"),h&&h.__esModule&&h||{"default":h}).SamplesGenerator,w=(i=a("./../../3rdparty/walkontable/src/calculator/viewportColumns.js"),i&&i.__esModule&&i||{"default":i}).WalkontableViewportColumnsCalculator,x=function(a){var b=this;$traceurRuntime.superConstructor(y).call(this,a),this.widths=[],this.ghostTable=new t(this.hot),this.samplesGenerator=new v(function(a,c){return b.hot.getDataAtCell(a,c)}),this.firstCalculation=!0,this.inProgress=!1},y=x;$traceurRuntime.createClass(x,{isEnabled:function(){return this.hot.getSettings().autoColumnSize!==!1&&!this.hot.getSettings().colWidths},enablePlugin:function(){var a=this;this.enabled||(this.addHook("afterLoadData",function(){return a.onAfterLoadData()}),this.addHook("beforeChange",function(b){return a.onBeforeChange(b)}),this.addHook("beforeColumnResize",function(b,c,d){return a.onBeforeColumnResize(b,c,d)}),this.addHook("beforeRender",function(b){return a.onBeforeRender(b)}),this.addHook("modifyColWidth",function(b,c){return a.getColumnWidth(c,b)}),$traceurRuntime.superGet(this,y.prototype,"enablePlugin").call(this))},calculateColumnsWidth:function(){var a=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},b=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},c=void 0!==arguments[2]?arguments[2]:!1,d=this;"number"==typeof a&&(a={from:a,to:a}),"number"==typeof b&&(b={from:b,to:b}),n(a.from,a.to,function(a){if(c||void 0===d.widths[a]&&!d.hot._getColWidthFromSettings(a)){var e=d.samplesGenerator.generateColumnSamples(a,b);e.forEach(function(a,b){return d.ghostTable.addColumn(b,a)})}}),this.ghostTable.columns.length&&(this.ghostTable.getWidths(function(a,b){return d.widths[a]=b}),this.ghostTable.clean())},calculateAllColumnsWidth:function(){var a=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},b=this,c=0,d=this.hot.countCols()-1,e=null;this.inProgress=!0;var f=function(){return b.hot?(b.calculateColumnsWidth({from:c,to:Math.min(c+y.CALCULATION_STEP,d)},a),c=c+y.CALCULATION_STEP+1,void(d>c?e=o(f):(p(e),b.inProgress=!1,b.hot.view.wt.wtOverlays.adjustElementsSize(!0),b.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&b.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(p(e),void(b.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},a),this.firstCalculation=!1,c=this.getSyncCalculationLimit()+1),d>c?f():this.inProgress=!1},recalculateAllColumnsWidth:function(){this.clearCache(),this.calculateAllColumnsWidth()},getSyncCalculationLimit:function(){var a=y.SYNC_CALCULATION_LIMIT,b=this.hot.countCols()-1;return q(this.hot.getSettings().autoColumnSize)&&(a=this.hot.getSettings().autoColumnSize.syncLimit,r(a)?a=s(b,a):a>>=0),Math.min(a,b)},getColumnWidth:function(a){var b=arguments[1],c=void 0!==arguments[2]?arguments[2]:!0,d=b;return void 0===d&&(d=this.widths[a],c&&"number"==typeof d&&(d=Math.max(d,w.DEFAULT_WIDTH))),d},getFirstVisibleColumn:function(){var a=this.hot.view.wt;return a.wtViewport.columnsVisibleCalculator?a.wtTable.getFirstVisibleColumn():a.wtViewport.columnsRenderCalculator?a.wtTable.getFirstRenderedColumn():-1},getLastVisibleColumn:function(){var a=this.hot.view.wt;return a.wtViewport.columnsVisibleCalculator?a.wtTable.getLastVisibleColumn():a.wtViewport.columnsRenderCalculator?a.wtTable.getLastRenderedColumn():-1},clearCache:function(){this.widths.length=0},isNeedRecalculate:function(){return m(this.widths,function(a){return void 0===a}).length?!0:!1},onBeforeRender:function(){var a=this.hot.renderCall;this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,a),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()},onAfterLoadData:function(){var a=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){a.hot&&a.recalculateAllColumnsWidth()},0)},onBeforeChange:function(a){var b=this;l(a,function(a){return b.widths[a[1]]=void 0})},onBeforeColumnResize:function(a,b,c){return c&&(this.calculateColumnsWidth(a,void 0,!0),b=this.getColumnWidth(a,void 0,!1)),b},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,y.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 50}},j),u("autoColumnSize",x)},{"./../../3rdparty/walkontable/src/calculator/viewportColumns.js":3,"./../../helpers.js":42,"./../../plugins.js":45,"./../../utils/ghostTable.js":81,"./../../utils/samplesGenerator.js":82,"./../_base.js":46}],48:[function(a,b,c){"use strict";Object.defineProperties(c,{AutoRowSize:{get:function(){return u}},__esModule:{value:!0}});var d,e,f,g,h,i=(d=a("./../_base.js"),d&&d.__esModule&&d||{"default":d})["default"],j=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),k=(j.arrayEach,j.arrayFilter),l=(j.objectEach,j.rangeEach),m=j.requestAnimationFrame,n=j.cancelAnimationFrame,o=j.isObject,p=j.isPercentValue,q=j.valueAccordingPercent,r=(f=a("./../../utils/ghostTable.js"),f&&f.__esModule&&f||{"default":f}).GhostTable,s=(g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}).registerPlugin,t=(h=a("./../../utils/samplesGenerator.js"),h&&h.__esModule&&h||{"default":h}).SamplesGenerator,u=function(a){var b=this;$traceurRuntime.superConstructor(v).call(this,a),this.heights=[],this.ghostTable=new r(this.hot),this.samplesGenerator=new t(function(a,c){return b.hot.getDataAtCell(a,c)}),this.firstCalculation=!0,this.inProgress=!1},v=u;$traceurRuntime.createClass(u,{isEnabled:function(){return this.hot.getSettings().autoRowSize===!0||o(this.hot.getSettings().autoRowSize)},enablePlugin:function(){var a=this;this.enabled||(this.addHook("afterLoadData",function(){return a.onAfterLoadData()}),this.addHook("beforeChange",function(b){return a.onBeforeChange(b)}),this.addHook("beforeColumnMove",function(){return a.recalculateAllRowsHeight()}),this.addHook("beforeColumnResize",function(){return a.recalculateAllRowsHeight()}),this.addHook("beforeColumnSort",function(){return a.clearCache()}),this.addHook("beforeRender",function(b){return a.onBeforeRender(b)}),this.addHook("beforeRowMove",function(b,c){return a.onBeforeRowMove(b,c)}),this.addHook("beforeRowResize",function(b,c,d){return a.onBeforeRowResize(b,c,d)}),this.addHook("modifyRowHeight",function(b,c){return a.getRowHeight(c,b)}),$traceurRuntime.superGet(this,v.prototype,"enablePlugin").call(this))},disablePlugin:function(){$traceurRuntime.superGet(this,v.prototype,"disablePlugin").call(this)},calculateRowsHeight:function(){var a=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},b=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},c=void 0!==arguments[2]?arguments[2]:!1,d=this;"number"==typeof a&&(a={from:a,to:a}),"number"==typeof b&&(b={from:b,to:b}),l(a.from,a.to,function(a){if(c||void 0===d.heights[a]){var e=d.samplesGenerator.generateRowSamples(a,b);e.forEach(function(a,b){return d.ghostTable.addRow(b,a)})}}),this.ghostTable.rows.length&&(this.ghostTable.getHeights(function(a,b){return d.heights[a]=b}),this.ghostTable.clean())},calculateAllRowsHeight:function(){var a=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},b=this,c=0,d=this.hot.countRows()-1,e=null;this.inProgress=!0;var f=function(){return b.hot?(b.calculateRowsHeight({from:c,to:Math.min(c+v.CALCULATION_STEP,d)},a),c=c+v.CALCULATION_STEP+1,void(d>c?e=m(f):(n(e),b.inProgress=!1,b.hot.view.wt.wtOverlays.adjustElementsSize(!0),b.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&b.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(n(e),void(b.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},a),this.firstCalculation=!1,c=this.getSyncCalculationLimit()+1),d>c?f():this.inProgress=!1},recalculateAllRowsHeight:function(){this.clearCache(),this.calculateAllRowsHeight()},getSyncCalculationLimit:function(){var a=v.SYNC_CALCULATION_LIMIT,b=this.hot.countRows()-1;return o(this.hot.getSettings().autoRowSize)&&(a=this.hot.getSettings().autoRowSize.syncLimit,p(a)?a=q(b,a):a>>=0),Math.min(a,b)},getRowHeight:function(a){var b=arguments[1],c=b;return void 0!==this.heights[a]&&this.heights[a]>(b||0)&&(c=this.heights[a]),c},getFirstVisibleRow:function(){var a=this.hot.view.wt;return a.wtViewport.rowsVisibleCalculator?a.wtTable.getFirstVisibleRow():a.wtViewport.rowsRenderCalculator?a.wtTable.getFirstRenderedRow():-1},getLastVisibleRow:function(){var a=this.hot.view.wt;return a.wtViewport.rowsVisibleCalculator?a.wtTable.getLastVisibleRow():a.wtViewport.rowsRenderCalculator?a.wtTable.getLastRenderedRow():-1},clearCache:function(){this.heights.length=0},clearCacheByRange:function(a){var b=this;"number"==typeof a&&(a={from:a,to:a}),l(Math.min(a.from,a.to),Math.max(a.from,a.to),function(a){return b.heights[a]=void 0})},isNeedRecalculate:function(){return k(this.heights,function(a){return void 0===a}).length?!0:!1},onBeforeRender:function(){var a=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,a),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()},onBeforeRowMove:function(a,b){this.clearCacheByRange({from:a,to:b}),this.calculateAllRowsHeight()},onBeforeRowResize:function(a,b,c){return c&&(this.calculateRowsHeight(a,void 0,!0),b=this.getRowHeight(a)),b},onAfterLoadData:function(){var a=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){a.hot&&a.recalculateAllRowsHeight()},0)},onBeforeChange:function(a){var b=null;1===a.length?b=a[0][0]:a.length>1&&(b={from:a[0][0],to:a[a.length-1][0]}),null!==b&&this.clearCacheByRange(b)},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,v.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 500}},i),s("autoRowSize",u)},{"./../../helpers.js":42,"./../../plugins.js":45,"./../../utils/ghostTable.js":81,"./../../utils/samplesGenerator.js":82,"./../_base.js":46}],49:[function(a,b,c){"use strict";function d(a,b,c,d){var e,f,g,h,i,j=c.length,k=c?c[0].length:0,l=[],m=[];if(e=b.row-a.row,f=b.col-a.col,-1!==["down","up"].indexOf(d)){for(var n=0;f>=n;n++)g=parseInt(c[0][n],10),h=parseInt(c[j-1][n],10),i=("down"===d?h-g:g-h)/(j-1)||0,m.push(i);l.push(m)}if(-1!==["right","left"].indexOf(d))for(var o=0;e>=o;o++)g=parseInt(c[o][0],10),h=parseInt(c[o][k-1],10),i=("right"===d?h-g:g-h)/(k-1)||0,m=[],m.push(i),l.push(m);return l}function e(a){function b(b){return a.autofill?void(a.autofill.handle&&a.autofill.handle.isDragged&&(a.autofill.handle.isDragged>1&&a.autofill.apply(),a.autofill.handle.isDragged=0,h=!1)):!0}function c(a){var b,c;return g.instance.autofill?(b=j.offset(g.instance.table).top-(window.pageYOffset||document.documentElement.scrollTop)+j.outerHeight(g.instance.table),c=j.offset(g.instance.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+j.outerWidth(g.instance.table),g.addingStarted===!1&&g.instance.autofill.handle.isDragged>0&&a.clientY>b&&a.clientX<=c?(g.instance.mouseDragOutside=!0,g.addingStarted=!0):g.instance.mouseDragOutside=!1,void(g.instance.mouseDragOutside&&setTimeout(function(){g.addingStarted=!1,g.instance.alter("insert_row")},200))):!1}var d,e,f,g=this,h=!1;this.instance=a,this.addingStarted=!1,f=k(a),f.addEventListener(document,"mouseup",b),f.addEventListener(document,"mousemove",c),d=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(b){a.autofill.handle.isDragged=1,h=!0,d(b)},e=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(b,c,d,f){a.autofill&&h&&!a.view.isMouseDown()&&a.autofill.handle&&a.autofill.handle.isDragged&&(a.autofill.handle.isDragged++,a.autofill.showBorder(c),a.autofill.checkIfNewRowNeeded()),e(b,c,d,f)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){a.autofill.selectAdjacent()}}Object.defineProperties(c,{Autofill:{get:function(){return e}},__esModule:{value:!0}});var f,g,h,i,j=(f=a("./../../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../../eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,l=((h=a("./../../plugins.js"),h&&h.__esModule&&h||{"default":h}).registerPlugin,(i=a("./../../3rdparty/walkontable/src/cell/coords.js"),i&&i.__esModule&&i||{"default":i}).WalkontableCellCoords);e.prototype.init=function(){this.handle={}},e.prototype.disable=function(){this.handle.disabled=!0},e.prototype.selectAdjacent=function(){var a,b,c,d,e;a=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),b=this.instance.getData();a:for(c=a[2]+1;c<this.instance.countRows();c++){for(e=a[1];e<=a[3];e++)if(b[c][e])break a;(b[c][a[1]-1]||b[c][a[3]+1])&&(d=c)}d&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new l(a[0],a[1])),this.instance.view.wt.selections.fill.add(new l(d,a[3])),this.apply())},e.prototype.apply=function(){var a,b,c,e,f,g,h,i;this.handle.isDragged=0,a=this.instance.view.wt.selections.fill.getCorners(),a&&(this.instance.view.wt.selections.fill.clear(),b=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),Handsontable.hooks.run(this.instance,"afterAutofillApplyValues",b,a),a[0]===b[0]&&a[1]<b[1]?(g="left",c=new l(a[0],a[1]),e=new l(a[2],b[1]-1)):a[0]===b[0]&&a[3]>b[3]?(g="right",c=new l(a[0],b[3]+1),e=new l(a[2],a[3])):a[0]<b[0]&&a[1]===b[1]?(g="up",c=new l(a[0],a[1]),e=new l(b[0]-1,a[3])):a[2]>b[2]&&a[1]===b[1]&&(g="down",c=new l(b[2]+1,a[1]),e=new l(a[2],a[3])),c&&c.row>-1&&c.col>-1?(i={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to},f=this.instance.getData(i.from.row,i.from.col,i.to.row,i.to.col),h=d(c,e,f,g),Handsontable.hooks.run(this.instance,"beforeAutofill",c,e,f),this.instance.populateFromArray(c.row,c.col,f,e.row,e.col,"autofill",null,g,h),this.instance.selection.setRangeStart(new l(a[0],a[1])),this.instance.selection.setRangeEnd(new l(a[2],a[3]))):this.instance.selection.refreshBorders())},e.prototype.showBorder=function(a){var b=this.instance.getSelectedRange().getTopLeftCorner(),c=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==this.instance.getSettings().fillHandle&&(c.row<a.row||b.row>a.row))a=new l(a.row,c.col);else{if("vertical"===this.instance.getSettings().fillHandle)return;a=new l(c.row,a.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(a),this.instance.view.render()},e.prototype.checkIfNewRowNeeded=function(){var a,b,c=this.instance.countRows(),d=this;this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&(b=this.instance.getSelected(),a=this.instance.view.wt.selections.fill.getCorners(),b[2]<c-1&&a[2]===c-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout(function(){d.instance.alter("insert_row"),d.addingStarted=!1},200))))},Handsontable.hooks.add("afterInit",function(){var a=new e(this);"undefined"!=typeof this.getSettings().fillHandle&&(a.handle&&this.getSettings().fillHandle===!1?a.disable():a.handle||this.getSettings().fillHandle===!1||(this.autofill=a,this.autofill.init()))}),Handsontable.Autofill=e},{"./../../3rdparty/walkontable/src/cell/coords.js":5,"./../../dom.js":27,"./../../eventManager.js":41,"./../../plugins.js":45}],50:[function(a,b,c){"use strict";Object.defineProperties(c,{"default":{get:function(){return n}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).eventManager,j=(f=a("./../_base.js"),f&&f.__esModule&&f||{"default":f})["default"],k=(g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}).registerPlugin;Handsontable.hooks.register("beforeColumnSort"),Handsontable.hooks.register("afterColumnSort");var l=function(a){$traceurRuntime.superConstructor(m).call(this,a),this.sortIndicators=[]},m=l;$traceurRuntime.createClass(l,{isEnabled:function(){return!!this.hot.getSettings().columnSorting},enablePlugin:function(){var a=this;if(!this.enabled){var b=this;this.hot.sortIndex=[],this.hot.sort=function(){var a=Array.prototype.slice.call(arguments);return b.sortByColumn.apply(b,a)},"undefined"==typeof this.hot.getSettings().observeChanges&&this.enableObserveChangesPlugin(),this.bindColumnSortingAfterClick(),this.addHook("modifyRow",function(b){return a.translateRow(b)}),this.addHook("afterUpdateSettings",function(){return a.onAfterUpdateSettings()}),this.addHook("afterGetColHeader",function(b,c){return a.getColHeader(b,c)}),this.addHook("afterCreateRow",function(){b.afterCreateRow.apply(b,arguments)}),this.addHook("afterRemoveRow",function(){b.afterRemoveRow.apply(b,arguments)}),this.addHook("afterInit",function(){return a.sortBySettings()}),this.addHook("afterLoadData",function(){a.hot.sortIndex=[],a.hot.view&&a.sortBySettings()}),this.hot.view&&this.sortBySettings(),$traceurRuntime.superGet(this,m.prototype,"enablePlugin").call(this)}},disablePlugin:function(){this.hot.sort=void 0,$traceurRuntime.superGet(this,m.prototype,"disablePlugin").call(this)},onAfterUpdateSettings:function(){this.sortBySettings()},sortBySettings:function(){var a,b,c=this.hot.getSettings().columnSorting,d=this.loadSortingState();"undefined"!=typeof d?(a=d.sortColumn,b=d.sortOrder):(a=c.column,b=c.sortOrder),this.sortByColumn(a,b)},setSortingColumn:function(a,b){return"undefined"==typeof a?(this.hot.sortColumn=void 0,void(this.hot.sortOrder=void 0)):(this.hot.sortColumn===a&&"undefined"==typeof b?this.hot.sortOrder===!1?this.hot.sortOrder=void 0:this.hot.sortOrder=!this.hot.sortOrder:this.hot.sortOrder="undefined"!=typeof b?b:!0,void(this.hot.sortColumn=a))},sortByColumn:function(a,b){this.setSortingColumn(a,b),"undefined"!=typeof this.hot.sortColumn&&(Handsontable.hooks.run(this.hot,"beforeColumnSort",this.hot.sortColumn,this.hot.sortOrder),this.sort(),this.hot.render(),this.saveSortingState(),Handsontable.hooks.run(this.hot,"afterColumnSort",this.hot.sortColumn,this.hot.sortOrder))},saveSortingState:function(){var a={};"undefined"!=typeof this.hot.sortColumn&&(a.sortColumn=this.hot.sortColumn),"undefined"!=typeof this.hot.sortOrder&&(a.sortOrder=this.hot.sortOrder),(a.hasOwnProperty("sortColumn")||a.hasOwnProperty("sortOrder"))&&Handsontable.hooks.run(this.hot,"persistentStateSave","columnSorting",a)},loadSortingState:function(){var a={};return Handsontable.hooks.run(this.hot,"persistentStateLoad","columnSorting",a),a.value},bindColumnSortingAfterClick:function(){function a(){var a=d.hot.view.TBODY.querySelector("tr").querySelectorAll("th");return a.length}function b(b){var c=h.closest(b,"TH");return h.index(c)-a()}if(!this.bindedSortEvent){var c=i(this.hot),d=this;this.bindedSortEvent=!0,c.addEventListener(this.hot.rootElement,"click",function(a){if(h.hasClass(a.target,"columnSorting")){var c=b(a.target);if(c!==this.lastSortedColumn)d.sortOrderClass="ascending";else switch(d.hot.sortOrder){case void 0:d.sortOrderClass="ascending";break;case!0:d.sortOrderClass="descending";break;case!1:d.sortOrderClass=void 0}this.lastSortedColumn=c,d.sortByColumn(c)}})}},enableObserveChangesPlugin:function(){var a=this;this.hot._registerTimeout(setTimeout(function(){a.hot.updateSettings({observeChanges:!0})},0))},defaultSort:function(a){return function(b,c){return"string"==typeof b[1]&&(b[1]=b[1].toLowerCase()),"string"==typeof c[1]&&(c[1]=c[1].toLowerCase()),b[1]===c[1]?0:null===b[1]||""===b[1]?1:null===c[1]||""===c[1]?-1:b[1]<c[1]?a?-1:1:b[1]>c[1]?a?1:-1:0}},dateSort:function(a){return function(b,c){if(b[1]===c[1])return 0;if(null===b[1])return 1;if(null===c[1])return-1;var d=new Date(b[1]),e=new Date(c[1]);return e>d?a?-1:1:d>e?a?1:-1:0}},sort:function(){if("undefined"!=typeof this.hot.sortOrder){var a,b;this.hot.sortingEnabled=!1,this.hot.sortIndex.length=0;for(var c=this.hot.colOffset(),d=0,e=this.hot.countRows()-this.hot.getSettings().minSpareRows;e>d;d++)this.hot.sortIndex.push([d,this.hot.getDataAtCell(d,this.hot.sortColumn+c)]);switch(a=this.hot.getCellMeta(0,this.hot.sortColumn),this.sortIndicators[this.hot.sortColumn]=a.sortIndicator,a.type){case"date":b=this.dateSort;break;default:b=this.defaultSort}this.hot.sortIndex.sort(b(this.hot.sortOrder));for(var d=this.hot.sortIndex.length;d<this.hot.countRows();d++)this.hot.sortIndex.push([d,this.hot.getDataAtCell(d,this.hot.sortColumn+c)]);this.hot.sortingEnabled=!0}},translateRow:function(a){return this.hot.sortingEnabled&&"undefined"!=typeof this.hot.sortOrder&&this.hot.sortIndex&&this.hot.sortIndex.length&&this.hot.sortIndex[a]?this.hot.sortIndex[a][0]:a},untranslateRow:function(a){if(this.hot.sortingEnabled&&this.hot.sortIndex&&this.hot.sortIndex.length)for(var b=0;b<this.hot.sortIndex.length;b++)if(this.hot.sortIndex[b][0]==a)return b},getColHeader:function(a,b){var c=b.querySelector(".colHeader");this.hot.getSettings().columnSorting&&a>=0&&h.addClass(c,"columnSorting"),h.removeClass(c,"descending"),h.removeClass(c,"ascending"),this.sortIndicators[a]&&a===this.hot.sortColumn&&("ascending"===this.sortOrderClass?h.addClass(c,"ascending"):"descending"===this.sortOrderClass&&h.addClass(c,"descending"))},isSorted:function(){return"undefined"!=typeof this.hot.sortColumn},afterCreateRow:function(a,b){if(this.isSorted()){for(var c=0;c<this.hot.sortIndex.length;c++)this.hot.sortIndex[c][0]>=a&&(this.hot.sortIndex[c][0]+=b);for(var c=0;b>c;c++)this.hot.sortIndex.splice(a+c,0,[a+c,this.hot.getData()[a+c][this.hot.sortColumn+this.hot.colOffset()]]);this.saveSortingState()}},afterRemoveRow:function(a,b){if(this.isSorted()){var c=this.translateRow(a);this.hot.sortIndex.splice(a,b);for(var d=0;d<this.hot.sortIndex.length;d++)this.hot.sortIndex[d][0]>c&&(this.hot.sortIndex[d][0]-=b);this.saveSortingState()}}},{},j);var n=l;k("columnSorting",l)},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../plugins.js":45,"./../_base.js":46}],51:[function(a,b,c){"use strict";Object.defineProperties(c,{CommentEditor:{get:function(){return f}},__esModule:{value:!0}});var d,e=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),f=function(){this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.editorStyle.position="absolute",this.editorStyle.zIndex=100,this.hide()},g=f;$traceurRuntime.createClass(f,{setPosition:function(a,b){this.editorStyle.left=a+"px",this.editorStyle.top=b+"px"},show:function(){this.editorStyle.display="block"},hide:function(){this.editorStyle.display="none"},isVisible:function(){return"block"===this.editorStyle.display},setValue:function(){var a=void 0!==arguments[0]?arguments[0]:"";a=a||"",this.getInputElement().value=a},getValue:function(){return this.getInputElement().value},isFocused:function(){return document.activeElement===this.getInputElement()},focus:function(){this.getInputElement().focus()},createEditor:function(){var a,b,c=document.querySelector("."+g.CLASS_EDITOR_CONTAINER);return c||(c=document.createElement("div"),e.addClass(c,g.CLASS_EDITOR_CONTAINER),document.body.appendChild(c)),a=document.createElement("div"),e.addClass(a,g.CLASS_EDITOR),b=document.createElement("textarea"),e.addClass(b,g.CLASS_INPUT),a.appendChild(b),c.appendChild(a),a},getInputElement:function(){return this.editor.querySelector("."+g.CLASS_INPUT)},destroy:function(){this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null}},{get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"},get CLASS_EDITOR(){return"htComments"},get CLASS_INPUT(){return"htCommentTextArea"},get CLASS_CELL(){return"htCommentCell"}})},{"./../../dom.js":27}],52:[function(a,b,c){"use strict";Object.defineProperties(c,{Comments:{get:function(){return q}},__esModule:{value:!0}});var d,e,f,g,h,i,j=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),k=(e=a("./../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).EventManager,l=(f=a("./../../3rdparty/walkontable/src/cell/coords.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellCoords,m=(g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}),n=m.registerPlugin,o=(m.getPlugin,(h=a("./../_base.js"),h&&h.__esModule&&h||{"default":h})["default"]),p=(i=a("./commentEditor.js"),i&&i.__esModule&&i||{"default":i}).CommentEditor,q=function(a){$traceurRuntime.superConstructor(r).call(this,a),this.editor=null,this.eventManager=null,this.range={},this.mouseDown=!1,this.contextMenuEvent=!1,this.timer=null},r=q;$traceurRuntime.createClass(q,{isEnabled:function(){return this.hot.getSettings().comments},enablePlugin:function(){var a=this;this.enabled||(this.editor||(this.editor=new p),this.eventManager||(this.eventManager=new k(this)),this.addHook("afterContextMenuDefaultOptions",function(b){return a.addToContextMenu(b)}),this.addHook("afterRenderer",function(b,c,d,e,f,g){return a.onAfterRenderer(b,g)}),this.addHook("afterScrollVertically",function(){return a.refreshEditorPosition()}),this.addHook("afterColumnResize",function(){return a.refreshEditorPosition()}),this.addHook("afterRowResize",function(){return a.refreshEditorPosition()}),this.registerListeners(),$traceurRuntime.superGet(this,r.prototype,"enablePlugin").call(this))},registerListeners:function(){var a=this;this.eventManager.addEventListener(document,"mouseover",function(b){return a.onMouseOver(b)}),this.eventManager.addEventListener(document,"mousedown",function(b){return a.onMouseDown(b)}),this.eventManager.addEventListener(document,"mousemove",function(b){return a.onMouseMove(b)}),this.eventManager.addEventListener(document,"mouseup",function(b){return a.onMouseUp(b)}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(b){return a.onEditorBlur(b)})},setRange:function(a){this.range=a},clearRange:function(){this.range={}},targetIsCellWithComment:function(a){return j.hasClass(a.target,"htCommentCell")&&j.closest(a.target,[this.hot.rootElement])?!0:!1},targetIsCommentTextArea:function(a){return this.editor.getInputElement()===a.target},saveComment:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var a=this.editor.getValue(),b=this.range.from.row,c=this.range.from.col;this.hot.setCellMeta(b,c,"comment",a),this.hot.render()},saveCommentAtCell:function(a,b){this.setRange({from:new l(a,b)}),this.saveComment()},removeComment:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.removeCellMeta(this.range.from.row,this.range.from.col,"comment"),this.hot.render(),this.hide()},removeCommentAtCell:function(a,b){this.setRange({from:new l(a,b)}),this.removeComment()},show:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var a=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditorPosition(!0),this.editor.setValue(a.comment||""),this.editor.show(),!0},showAtCell:function(a,b){return this.setRange({from:new l(a,b)}),this.show();
},hide:function(){this.editor.hide()},refreshEditorPosition:function(){var a=void 0!==arguments[0]?arguments[0]:!1;if(a||this.range.from&&this.editor.isVisible()){var b=this.hot.view.wt.wtTable.getCell(this.range.from),c=j.offset(b),d=this.hot.getColWidth(this.range.from.col),e=c.top,f=c.left,g=0,h=0;this.hot.view.wt.wtViewport.hasVerticalScroll()&&(e-=this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition(),g=20),this.hot.view.wt.wtViewport.hasHorizontalScroll()&&(f-=this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition(),h=20);var i=f+d,k=e,l=this.hot.view.wt.wtTable.holder.getBoundingClientRect(),m={left:l.left+j.getWindowScrollLeft()+h,right:l.right+j.getWindowScrollLeft()-15,top:l.top+j.getWindowScrollTop()+g,bottom:l.bottom+j.getWindowScrollTop()};i<=m.left||i>m.right||k<=m.top||k>m.bottom?this.hide():this.editor.setPosition(i,k)}},onMouseDown:function(a){this.mouseDown=!0,this.hot.view&&this.hot.view.wt&&(this.contextMenuEvent||this.targetIsCommentTextArea(a)||this.targetIsCellWithComment(a)||this.hide(),this.contextMenuEvent=!1)},onMouseOver:function(a){if(!this.mouseDown&&!this.editor.isFocused())if(this.targetIsCellWithComment(a)){var b=this.hot.view.wt.wtTable.getCoords(a.target),c={from:new l(b.row,b.col)};this.setRange(c),this.show()}else this.targetIsCommentTextArea(a)||this.editor.isFocused()||this.hide()},onMouseMove:function(a){var b=this;this.targetIsCommentTextArea(a)&&(this.mouseDown=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){b.mouseDown=!1},200))},onMouseUp:function(a){this.mouseDown=!1},onAfterRenderer:function(a,b){b.comment&&j.addClass(a,b.commentedCellClassName)},onEditorBlur:function(a){this.saveComment()},checkSelectionCommentsConsistency:function(){var a=!1,b=this.hot.getSelectedRange().from;return this.hot.getCellMeta(b.row,b.col).comment&&(a=!0),a},onContextMenuAddComment:function(){var a=this,b=this.hot.getSelectedRange();this.contextMenuEvent=!0,this.setRange({from:b.from}),this.show(),setTimeout(function(){a.hot&&(a.hot.deselectCell(),a.editor.focus())},10)},onContextMenuRemoveComment:function(a,b){this.contextMenuEvent=!0,this.removeCommentAtCell(b.start.row,b.start.col)},addToContextMenu:function(a){var b=this;a.items.push(Handsontable.ContextMenu.SEPARATOR,{key:"commentsAddEdit",name:function(){return b.checkSelectionCommentsConsistency()?"Edit Comment":"Add Comment"},callback:function(){return b.onContextMenuAddComment()},disabled:function(){return!1}},{key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(a,c){return b.onContextMenuRemoveComment(a,c)},disabled:function(){return!b.checkSelectionCommentsConsistency()}})},destroy:function(){this.editor&&this.editor.destroy(),$traceurRuntime.superGet(this,r.prototype,"destroy").call(this)}},{},o),n("comments",q)},{"./../../3rdparty/walkontable/src/cell/coords.js":5,"./../../dom.js":27,"./../../eventManager.js":41,"./../../plugins.js":45,"./../_base.js":46,"./commentEditor.js":51}],53:[function(a,b,c){"use strict";function d(a,b){function c(){var b=a.getSelected();return b?b[0]<0?null:a.countRows()>=a.getSettings().maxRows?null:b:null}this.instance=a;var e=this;if(e.menus=[],e.htMenus={},e.triggerRows=[],e.eventManager=t(e),this.enabled=!0,this.instance.addHook("afterDestroy",function(){e.destroy()}),this.defaultOptions={items:[{key:"row_above",name:"Insert row above",callback:function(a,b){this.alter("insert_row",b.start.row)},disabled:function(){var a=c();if(!a)return!0;var b=[0,a[1],this.countRows()-1,a[1]];return b.join(",")===a.join(",")}},{key:"row_below",name:"Insert row below",callback:function(a,b){this.alter("insert_row",b.end.row+1)},disabled:function(){var a=c();if(!a)return!0;var b=[0,a[1],this.countRows()-1,a[1]];return b.join(",")===a.join(",")}},d.SEPARATOR,{key:"col_left",name:"Insert column on the left",callback:function(a,b){this.alter("insert_col",b.start.col)},disabled:function(){if(!this.isColumnModificationAllowed())return!0;var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return this.getSelected()[1]<0||this.countCols()>=this.getSettings().maxCols||c}},{key:"col_right",name:"Insert column on the right",callback:function(a,b){this.alter("insert_col",b.end.col+1)},disabled:function(){if(!this.isColumnModificationAllowed())return!0;var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return a[1]<0||this.countCols()>=this.getSettings().maxCols||c}},d.SEPARATOR,{key:"remove_row",name:"Remove row",callback:function(a,b){var c=b.end.row-b.start.row+1;this.alter("remove_row",b.start.row,c)},disabled:function(){var a=c();if(!a)return!0;var b=[0,a[1],this.countRows()-1,a[1]];return b.join(",")===a.join(",")}},{key:"remove_col",name:"Remove column",callback:function(a,b){var c=b.end.col-b.start.col+1;this.alter("remove_col",b.start.col,c)},disabled:function(){if(!this.isColumnModificationAllowed())return!0;var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return a[1]<0||c}},d.SEPARATOR,{key:"undo",name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},{key:"redo",name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}},d.SEPARATOR,{key:"make_read_only",name:function(){var a="Read only",b=e.checkSelectionReadOnlyConsistency(this);return b&&(a=e.markSelected(a)),a},callback:function(){var a=e.checkSelectionReadOnlyConsistency(this),b=this;this.getSelectedRange().forAll(function(c,d){b.getCellMeta(c,d).readOnly=a?!1:!0}),this.render()}},d.SEPARATOR,{key:"alignment",name:"Alignment",submenu:{items:[{name:function(){var a="Left",b=e.checkSelectionAlignment(this,"htLeft");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"horizontal","htLeft")},disabled:!1},{name:function(){var a="Center",b=e.checkSelectionAlignment(this,"htCenter");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"horizontal","htCenter")},disabled:!1},{name:function(){var a="Right",b=e.checkSelectionAlignment(this,"htRight");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"horizontal","htRight")},disabled:!1},{name:function(){var a="Justify",b=e.checkSelectionAlignment(this,"htJustify");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"horizontal","htJustify")},disabled:!1},d.SEPARATOR,{name:function(){var a="Top",b=e.checkSelectionAlignment(this,"htTop");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"vertical","htTop")},disabled:!1},{name:function(){var a="Middle",b=e.checkSelectionAlignment(this,"htMiddle");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"vertical","htMiddle")},disabled:!1},{name:function(){var a="Bottom",b=e.checkSelectionAlignment(this,"htBottom");return b&&(a=e.markSelected(a)),a},callback:function(){l.call(this,this.getSelectedRange(),"vertical","htBottom")},disabled:!1}]}}]},e.options={},r.extend(e.options,this.options),this.bindMouseEvents(),this.markSelected=function(a){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+a},this.checkSelectionAlignment=function(a,b){var c=!1;return a.getSelectedRange()&&a.getSelectedRange().forAll(function(d,e){var f=a.getCellMeta(d,e).className;return f&&-1!=f.indexOf(b)?(c=!0,!1):void 0}),c},!this.instance.getSettings().allowInsertRow){var g=f(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(g,1);var h=f(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(h,1),this.defaultOptions.items.splice(h,1)}if(!this.instance.getSettings().allowInsertColumn){var i=f(this.defaultOptions.items,"col_left");this.defaultOptions.items.splice(i,1);var j=f(this.defaultOptions.items,"col_right");this.defaultOptions.items.splice(j,1),this.defaultOptions.items.splice(j,1)}var k,m,n=!1,o=!1;this.instance.getSettings().allowRemoveRow||(k=f(this.defaultOptions.items,"remove_row"),this.defaultOptions.items.splice(k,1),n=!0),this.instance.getSettings().allowRemoveColumn||(m=f(this.defaultOptions.items,"remove_col"),this.defaultOptions.items.splice(m,1),o=!0),n&&o&&this.defaultOptions.items.splice(m,1),this.checkSelectionReadOnlyConsistency=function(a){var b=!1;return a.getSelectedRange()&&a.getSelectedRange().forAll(function(c,d){return a.getCellMeta(c,d).readOnly?(b=!0,!1):void 0}),b},Handsontable.hooks.run(a,"afterContextMenuDefaultOptions",this.defaultOptions)}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].key===b)return a[c]}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].key===b)return c}function g(){if(!this.rootElement.className.indexOf("htContextMenu")){for(var a=0,b=0,c=this.getSettings().data.length,e=parseInt(this.view.wt.wtTable.hider.style.width,10),f=0;c>f;f++)this.getSettings().data[f].name==d.SEPARATOR.name?a+=1:b+=26;this.view.wt.wtTable.holder.style.width=e+22+"px",this.view.wt.wtTable.holder.style.height=b+a+4+"px"}}function h(a,b){return-1!=a.indexOf(b)?a:(a=a.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),a+=" "+b)}function i(a,b){return-1!=a.indexOf(b)?a:(a=a.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),a+=" "+b)}function j(a){for(var b={},c=a.from.row;c<=a.to.row;c++)for(var d=a.from.col;d<=a.to.col;d++)b[c]||(b[c]=[]),b[c][d]=this.getCellMeta(c,d).className;return b}function k(a,b,c,d){var e=this.getCellMeta(a,b),f=d;e.className&&(f="vertical"===c?h(e.className,d):i(e.className,d)),this.setCellMeta(a,b,"className",f)}function l(a,b,c){var d=j.call(this,a);if(this.runHooks("beforeCellAlignment",d,a,b,c),a.from.row==a.to.row&&a.from.col==a.to.col)k.call(this,a.from.row,a.from.col,b,c);else for(var e=a.from.row;e<=a.to.row;e++)for(var f=a.from.col;f<=a.to.col;f++)k.call(this,e,f,b,c);this.render()}function m(){var a=this,b=a.getSettings().contextMenu,c=r.isObject(b)?b:{};b?(a.contextMenu||(a.contextMenu=new d(a,c)),a.contextMenu.enable()):a.contextMenu&&(a.contextMenu.destroy(),delete a.contextMenu)}Object.defineProperties(c,{ContextMenu:{get:function(){return d}},__esModule:{value:!0}});var n,o,p,q,r=(n=a("./../../helpers.js"),n&&n.__esModule&&n||{"default":n}),s=(o=a("./../../dom.js"),o&&o.__esModule&&o||{"default":o}),t=(p=a("./../../eventManager.js"),p&&p.__esModule&&p||{"default":p}).eventManager;(q=a("./../../plugins.js"),q&&q.__esModule&&q||{"default":q}).registerPlugin;d.prototype.createMenu=function(a,b){a&&(a=a.replace(/ /g,"_"),a="htContextSubMenu_"+a);var c;return c=a?document.querySelector(".htContextMenu."+a):document.querySelector(".htContextMenu"),c||(c=document.createElement("DIV"),s.addClass(c,"htContextMenu"),a&&s.addClass(c,a),document.getElementsByTagName("body")[0].appendChild(c)),this.menus.indexOf(c)<0&&(this.menus.push(c),b=b||0,this.triggerRows.push(b)),c},d.prototype.bindMouseEvents=function(){function a(a){function b(a){return"TD"===a.nodeName||"TD"===a.parentNode.nodeName}var c,e,f,g,h=this.instance.getSettings(),i=this.instance.getSettings().rowHeaders,j=this.instance.getSettings().colHeaders;if(e=a.realTarget,this.closeAll(),a.preventDefault(),r.stopPropagation(a),i||j){if(i&&j&&(c=e.parentNode.querySelectorAll(".cornerHeader").length>0))return}else if(!(b(e)||s.hasClass(e,"current")&&s.hasClass(e,"wtBorder")))return;g=this.createMenu(),f=this.getItems(h.contextMenu),this.show(g,f),this.setMenuPosition(a,g),this.eventManager.addEventListener(document.documentElement,"mousedown",r.proxy(d.prototype.closeAll,this))}var b=t(this.instance);b.addEventListener(this.instance.rootElement,"contextmenu",r.proxy(a,this))},d.prototype.bindTableEvents=function(){this._afterScrollCallback=function(){},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},d.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},d.prototype.performAction=function(a,b){var c=this,e=b.getSelected()[0],f=b.getData()[e];if(f.disabled!==!0&&("function"!=typeof f.disabled||f.disabled.call(this.instance)!==!0)&&!f.hasOwnProperty("submenu")){if("function"!=typeof f.callback)return;var g=this.instance.getSelectedRange();if(g){var h=d.utils.normalizeSelection(g);f.callback.call(this.instance,f.key,h,a),c.closeAll()}}},d.prototype.unbindMouseEvents=function(){this.eventManager.clear();var a=t(this.instance);a.removeEventListener(this.instance.rootElement,"contextmenu")},d.prototype.show=function(a,b){var c=this;a.removeAttribute("style"),a.style.display="block";var d={data:b,colHeaders:!1,colWidths:[200],autoRowSize:!1,readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:r.proxy(this.renderer,this)}],renderAllRows:!0,beforeKeyDown:function(a){c.onBeforeKeyDown(a,e)},afterOnCellMouseOver:function(a,b,d){c.onCellMouseOver(a,b,d,e)}},e=new Handsontable(a,d);e.isHotTableEnv=this.instance.isHotTableEnv,Handsontable.eventManager.isHotTableEnv=this.instance.isHotTableEnv,this.eventManager.removeEventListener(a,"mousedown"),this.eventManager.addEventListener(a,"mousedown",function(a){c.performAction(a,e)}),this.bindTableEvents(),e.listen(),this.htMenus[e.guid]=e,Handsontable.hooks.run(this.instance,"afterContextMenuShow",e)},d.prototype.close=function(a){this.hide(a),this.eventManager.clear(),this.unbindTableEvents(),this.instance.listen()},d.prototype.closeAll=function(){for(;this.menus.length>0;){var a=this.menus.pop();a&&this.close(a)}this.triggerRows=[]},d.prototype.closeLastOpenedSubMenu=function(){var a=this.menus.pop();a&&this.hide(a)},d.prototype.hide=function(a){a.style.display="none";var b=this.htMenus[a.id];Handsontable.hooks.run(this.instance,"afterContextMenuHide",b),b.destroy(),delete this.htMenus[a.id]},d.prototype.renderer=function(a,b,c,e,f,g){function h(a){return a.hasOwnProperty("submenu")}function i(a){return new RegExp(d.SEPARATOR.name,"i").test(a.name)}function j(a){return a.disabled===!0||"function"==typeof a.disabled&&a.disabled.call(k.instance)===!0}var k=this,l=a.getData()[c],m=document.createElement("DIV");"function"==typeof g&&(g=g.call(this.instance)),s.empty(b),b.appendChild(m),i(l)?s.addClass(b,"htSeparator"):s.fastInnerHTML(m,g),j(l)?(s.addClass(b,"htDisabled"),this.eventManager.addEventListener(m,"mouseenter",function(){a.deselectCell()})):h(l)?(s.addClass(b,"htSubmenu"),this.eventManager.addEventListener(m,"mouseenter",function(){a.selectCell(c,e)})):(s.removeClass(b,"htSubmenu"),s.removeClass(b,"htDisabled"),this.eventManager.addEventListener(m,"mouseenter",function(){a.selectCell(c,e)}))},d.prototype.onCellMouseOver=function(a,b,c,d){var e=this.menus.length;if(e>0){var f=this.menus[e-1];f.id!=d.guid&&this.closeLastOpenedSubMenu()}else this.closeLastOpenedSubMenu();if(-1!=c.className.indexOf("htSubmenu")){var g=d.getData()[b.row],h=this.getItems(g.submenu),i=this.createMenu(g.name,b.row),j=c.getBoundingClientRect();this.show(i,h),this.setSubMenuPosition(j,i)}},d.prototype.onBeforeKeyDown=function(a,b){function c(a){var b=a.getCell(0,0);d.utils.isSeparator(b)||d.utils.isDisabled(b)?f(0,0,a):a.selectCell(0,0)}function e(a){var b=a.countRows()-1,c=a.getCell(b,0);d.utils.isSeparator(c)||d.utils.isDisabled(c)?g(b,0,a):a.selectCell(b,0)}function f(a,b,c){var e=a+1,g=e<c.countRows()?c.getCell(e,b):null;g&&(d.utils.isSeparator(g)||d.utils.isDisabled(g)?f(e,b,c):c.selectCell(e,b))}function g(a,b,c){var e=a-1,f=e>=0?c.getCell(e,b):null;f&&(d.utils.isSeparator(f)||d.utils.isDisabled(f)?g(e,b,c):c.selectCell(e,b))}function h(a,b,c,d){var e=a.getData()[d],f=b.getItems(e.submenu),g=b.createMenu(e.name,d),h=c.getBoundingClientRect(),i=b.show(g,f);b.setSubMenuPosition(h,g),i.selectCell(0,0)}s.enableImmediatePropagation(a);var i=this,j=b.getSelected();switch(a.keyCode){case r.keyCode.ESCAPE:i.closeAll(),a.preventDefault(),a.stopImmediatePropagation();break;case r.keyCode.ENTER:j&&i.performAction(a,b);break;case r.keyCode.ARROW_DOWN:j?f(j[0],j[1],b,i):c(b,i),a.preventDefault(),a.stopImmediatePropagation();break;case r.keyCode.ARROW_UP:j?g(j[0],j[1],b,i):e(b,i),a.preventDefault(),a.stopImmediatePropagation();break;case r.keyCode.ARROW_RIGHT:if(j){var k=j[0],l=b.getCell(j[0],0);d.utils.hasSubMenu(l)&&h(b,i,l,k)}a.preventDefault(),a.stopImmediatePropagation();break;case r.keyCode.ARROW_LEFT:if(j){if(-1!=b.rootElement.className.indexOf("htContextSubMenu_")){i.closeLastOpenedSubMenu();var m=i.menus.length;if(m>0){var n=i.menus[m-1],o=i.triggerRows.pop();b=this.htMenus[n.id],b.selectCell(o,0)}}a.preventDefault(),a.stopImmediatePropagation()}}},d.prototype.getItems=function(a){function b(a){"string"==typeof a?this.name=a:r.extend(this,a)}var c,d;b.prototype=a,a&&a.items&&(a=a.items),a===!0&&(a=this.defaultOptions.items),c=[];for(var f in a)a.hasOwnProperty(f)&&(d="string"==typeof a[f]?e(this.defaultOptions.items,a[f]):e(this.defaultOptions.items,f),d||(d=a[f]),d=new b(d),"object"==typeof a[f]&&r.extend(d,a[f]),d.key||(d.key=f),c.push(d));return c},d.prototype.setSubMenuPosition=function(a,b){var c=s.getWindowScrollTop(),d=s.getWindowScrollLeft(),e={top:c+a.top,topRelative:a.top,left:a.left,leftRelative:a.left-d,scrollTop:c,scrollLeft:d,cellHeight:a.height,cellWidth:a.width};this.menuFitsBelowCursor(e,b,document.body.clientWidth)?this.positionMenuBelowCursor(e,b,!0):this.menuFitsAboveCursor(e,b)?this.positionMenuAboveCursor(e,b,!0):this.positionMenuBelowCursor(e,b,!0),this.menuFitsOnRightOfCursor(e,b,document.body.clientWidth)?this.positionMenuOnRightOfCursor(e,b,!0):this.positionMenuOnLeftOfCursor(e,b,!0)},d.prototype.setMenuPosition=function(a,b){var c=s.getWindowScrollTop(),d=s.getWindowScrollLeft(),e=a.pageY||a.clientY+c,f=a.pageX||a.clientX+d,g={top:e,topRelative:e-c,left:f,leftRelative:f-d,scrollTop:c,scrollLeft:d,cellHeight:a.target.clientHeight,cellWidth:a.target.clientWidth};this.menuFitsBelowCursor(g,b,document.body.clientHeight)?this.positionMenuBelowCursor(g,b):this.menuFitsAboveCursor(g,b)?this.positionMenuAboveCursor(g,b):this.positionMenuBelowCursor(g,b),this.menuFitsOnRightOfCursor(g,b,document.body.clientWidth)?this.positionMenuOnRightOfCursor(g,b):this.positionMenuOnLeftOfCursor(g,b)},d.prototype.menuFitsAboveCursor=function(a,b){return a.topRelative>=b.offsetHeight},d.prototype.menuFitsBelowCursor=function(a,b,c){return a.topRelative+b.offsetHeight<=c},d.prototype.menuFitsOnRightOfCursor=function(a,b,c){return a.leftRelative+b.offsetWidth<=c},d.prototype.positionMenuBelowCursor=function(a,b){b.style.top=a.top+"px"},d.prototype.positionMenuAboveCursor=function(a,b,c){c?b.style.top=a.top+a.cellHeight-b.offsetHeight+"px":b.style.top=a.top-b.offsetHeight+"px"},d.prototype.positionMenuOnRightOfCursor=function(a,b,c){c?b.style.left=1+a.left+a.cellWidth+"px":b.style.left=1+a.left+"px"},d.prototype.positionMenuOnLeftOfCursor=function(a,b,c){c?b.style.left=a.left-b.offsetWidth+"px":b.style.left=a.left-b.offsetWidth+"px"},d.utils={},d.utils.normalizeSelection=function(a){return{start:a.getTopLeftCorner(),end:a.getBottomRightCorner()}},d.utils.isSeparator=function(a){return s.hasClass(a,"htSeparator")},d.utils.hasSubMenu=function(a){return s.hasClass(a,"htSubmenu")},d.utils.isDisabled=function(a){return s.hasClass(a,"htDisabled")},d.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},d.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.closeAll(),this.unbindMouseEvents(),this.unbindTableEvents())},d.prototype.destroy=function(){for(this.closeAll();this.menus.length>0;){var a=this.menus.pop();this.triggerRows.pop(),a&&(this.close(a),this.isMenuEnabledByOtherHotInstance()||this.removeMenu(a))}this.unbindMouseEvents(),this.unbindTableEvents()},d.prototype.isMenuEnabledByOtherHotInstance=function(){for(var a=document.querySelectorAll(".handsontable"),b=!1,c=0,d=a.length;d>c;c++){var e=this.htMenus[a[c].id];if(e&&e.getSettings().contextMenu){b=!0;break}}return b},d.prototype.removeMenu=function(a){a.parentNode&&this.menu.parentNode.removeChild(a)},d.prototype.align=function(a,b,c){l.call(this,a,b,c)},d.SEPARATOR={name:"---------"},Handsontable.hooks.add("afterInit",m),Handsontable.hooks.add("afterUpdateSettings",m),Handsontable.hooks.add("afterInit",g),Handsontable.hooks.register("afterContextMenuDefaultOptions"),Handsontable.hooks.register("afterContextMenuShow"),Handsontable.hooks.register("afterContextMenuHide"),Handsontable.ContextMenu=d},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../helpers.js":42,"./../../plugins.js":45}],54:[function(a,b,c){"use strict";Object.defineProperties(c,{ContextMenuCopyPaste:{get:function(){return n}},__esModule:{value:!0}});var d,e,f,g,h,i=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),j=(e=a("./../../eventManager.js"),e&&e.__esModule&&e||{"default":e}).eventManager,k=(f=a("./../../plugins.js"),f&&f.__esModule&&f||{"default":f}).registerPlugin,l=(g=a("./../_base.js"),g&&g.__esModule&&g||{"default":g})["default"],m=(h=a("zeroclipboard"),h&&h.__esModule&&h||{"default":h})["default"],n=function(a){var b=this;$traceurRuntime.superConstructor(o).call(this,a),this.swfPath=null,this.hotContextMenu=null,this.outsideClickDeselectsCache=null,this.hot.addHook("afterContextMenuShow",function(a){return b.setupZeroClipboard(a)}),this.hot.addHook("afterInit",function(){return b.afterInit()}),this.hot.addHook("afterContextMenuDefaultOptions",function(a){return b.addToContextMenu(a)})},o=n;$traceurRuntime.createClass(n,{afterInit:function(){if(this.hot.getSettings().contextMenuCopyPaste){"object"==typeof this.hot.getSettings().contextMenuCopyPaste&&(this.swfPath=this.hot.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof m&&console.error("To be able to use the Copy/Paste feature from the context menu, you need to manualy include ZeroClipboard.js file to your website.");try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){"undefined"==typeof navigator.mimeTypes["application/x-shockwave-flash"]&&console.error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}this.prepareZeroClipboard()}},prepareZeroClipboard:function(){this.swfPath&&m.config({swfPath:this.swfPath})},getCopyValue:function(){return this.hot.copyPaste.setCopyableText(),this.hot.copyPaste.copyPasteInstance.elTextarea.value},addToContextMenu:function(a){this.hot.getSettings().contextMenuCopyPaste&&a.items.unshift({key:"copy",name:"Copy"},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()}},Handsontable.ContextMenu.SEPARATOR)},setupZeroClipboard:function(a){var b,c,d=this;if(this.hot.getSettings().contextMenuCopyPaste){this.hotContextMenu=a,b=this.hotContextMenu.getData();for(var e=0,f=b.length;f>e;e++)if("copy"===b[e].key){c=new m(this.hotContextMenu.getCell(e,0)),c.off(),c.on("copy",function(a){var b=a.clipboardData;b.setData("text/plain",d.getCopyValue()),d.hot.getSettings().outsideClickDeselects=d.outsideClickDeselectsCache}),this.bindEvents();break}}},removeCurrentClass:function(){if(this.hotContextMenu.rootElement){var a=this.hotContextMenu.rootElement.querySelector("td.current");a&&i.removeClass(a,"current")}this.outsideClickDeselectsCache=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1},removeZeroClipboardClass:function(){if(this.hotContextMenu.rootElement){var a=this.hotContextMenu.rootElement.querySelector("td.zeroclipboard-is-hover");a&&i.removeClass(a,"zeroclipboard-is-hover")}this.hot.getSettings().outsideClickDeselects=this.outsideClickDeselectsCache},bindEvents:function(){var a=this,b=j(this.hotContextMenu);b.addEventListener(document,"mouseenter",function(){return a.removeCurrentClass()}),b.addEventListener(document,"mouseleave",function(){return a.removeZeroClipboardClass()})}},{},l),k("contextMenuCopyPaste",n)},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../plugins.js":45,"./../_base.js":46,zeroclipboard:void 0}],55:[function(a,b,c){"use strict";function d(a){function b(){a.isListening()&&a.selection.empty()}function c(b){var c,d,e,f,g,h,i,j,k,l;a.isListening()&&a.selection.isSelected()&&(c=b,d=n.parse(c),e=a.getSelected(),f=new o(e[0],e[1]),g=new o(e[2],e[3]),h=new p(f,f,g),i=h.getTopLeftCorner(),j=h.getBottomRightCorner(),k=i,l=new o(Math.max(j.row,d.length-1+i.row),Math.max(j.col,d[0].length-1+i.col)),a.addHookOnce("afterChange",function(a,b){a&&a.length&&this.selectCell(k.row,k.col,l.row,l.col)}),a.populateFromArray(k.row,k.col,d,l.row,l.col,"paste",a.getSettings().pasteMode))}function d(b){if(a.getSelected()&&(!a.getActiveEditor()||!a.getActiveEditor().isOpened())){if(l.isCtrlKey(b.keyCode))return e.setCopyableText(),void b.stopImmediatePropagation();var c=(b.ctrlKey||b.metaKey)&&!b.altKey;b.keyCode==l.keyCode.A&&c&&a._registerTimeout(setTimeout(l.proxy(e.setCopyableText,e),0))}}var e=this;this.copyPasteInstance=m(),this.copyPasteInstance.onCut(b),this.copyPasteInstance.onPaste(c),a.addHook("beforeKeyDown",d),this.destroy=function(){this.copyPasteInstance&&(this.copyPasteInstance.removeCallback(b),this.copyPasteInstance.removeCallback(c),this.copyPasteInstance.destroy(),this.copyPasteInstance=null),a.removeHook("beforeKeyDown",d)},a.addHook("afterDestroy",l.proxy(this.destroy,this)),this.triggerPaste=l.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=l.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var b=a.getSettings(),c=b.copyRowsLimit,d=b.copyColsLimit,e=a.getSelectedRange(),f=e.getTopLeftCorner(),g=e.getBottomRightCorner(),h=f.row,i=f.col,j=g.row,k=g.col,l=Math.min(j,h+c-1),m=Math.min(k,i+d-1);a.copyPaste.copyPasteInstance.copyable(a.getCopyableData(h,i,l,m)),(j!==l||k!==m)&&Handsontable.hooks.run(a,"afterCopyLimit",j-h+1,k-i+1,c,d)}}function e(){var a=this,b=a.getSettings().copyPaste!==!1;b&&!a.copyPaste?a.copyPaste=new d(a):!b&&a.copyPaste&&(a.copyPaste.destroy(),a.copyPaste=null)}Object.defineProperties(c,{CopyPastePlugin:{get:function(){return d}},__esModule:{value:!0}});var f,g,h,i,j,k,l=(f=a("./../../helpers.js"),f&&f.__esModule&&f||{"default":f}),m=(g=a("copyPaste"),g&&g.__esModule&&g||{"default":g})["default"],n=(h=a("SheetClip"),h&&h.__esModule&&h||{"default":h})["default"],o=((i=a("./../../plugins.js"),i&&i.__esModule&&i||{"default":i}).registerPlugin,(j=a("./../../3rdparty/walkontable/src/cell/coords.js"),j&&j.__esModule&&j||{"default":j}).WalkontableCellCoords),p=(k=a("./../../3rdparty/walkontable/src/cell/range.js"),k&&k.__esModule&&k||{"default":k}).WalkontableCellRange;Handsontable.hooks.add("afterInit",e),Handsontable.hooks.add("afterUpdateSettings",e),Handsontable.hooks.register("afterCopyLimit")},{"./../../3rdparty/walkontable/src/cell/coords.js":5,"./../../3rdparty/walkontable/src/cell/range.js":6,"./../../helpers.js":42,"./../../plugins.js":45,SheetClip:"SheetClip",copyPaste:"copyPaste"}],56:[function(a,b,c){"use strict";function d(){}var e,f,g,h,i=((e=a("./../../plugins.js"),e&&e.__esModule&&e||{"default":e}).registerPlugin,(f=a("./../../3rdparty/walkontable/src/cell/range.js"),f&&f.__esModule&&f||{"default":f}).WalkontableCellRange),j=(g=a("./../../3rdparty/walkontable/src/selection.js"),g&&g.__esModule&&g||{"default":g}).WalkontableSelection,k=function(a){return"boolean"==typeof a&&a===!0?!0:"object"==typeof a&&a.length>0?!0:!1},l=function(){k(this.getSettings().customBorders)&&(this.customBorders||(h=this,this.customBorders=new d))},m=function(a){for(var b=0;b<h.view.wt.selections.length;b++)if(h.view.wt.selections[b].settings.className==a)return b;return-1},n=function(a){var b={row:a.row,col:a.col},c=new j(a,new i(b,b,b)),d=m(a.className);d>=0?h.view.wt.selections[d]=c:h.view.wt.selections.push(c)},o=function(a,b,c){var d=u(a,b);d=v(d,c),this.setCellMeta(a,b,"borders",d),n(d)},p=function(a){for(var b=a.range,c=b.from.row;c<=b.to.row;c++)for(var d=b.from.col;d<=b.to.col;d++){var e=u(c,d),f=0;c==b.from.row&&(f++,a.hasOwnProperty("top")&&(e.top=a.top)),c==b.to.row&&(f++,a.hasOwnProperty("bottom")&&(e.bottom=a.bottom)),d==b.from.col&&(f++,a.hasOwnProperty("left")&&(e.left=a.left)),d==b.to.col&&(f++,a.hasOwnProperty("right")&&(e.right=a.right)),f>0&&(this.setCellMeta(c,d,"borders",e),n(e))}},q=function(a,b){return"border_row"+a+"col"+b},r=function(){return{width:1,color:"#000"}},s=function(){return{hide:!0}},t=function(){return{width:1,color:"#000",cornerVisible:!1}},u=function(a,b){return{className:q(a,b),border:t(),row:a,col:b,top:s(),right:s(),bottom:s(),left:s()}},v=function(a,b){return b.hasOwnProperty("border")&&(a.border=b.border),b.hasOwnProperty("top")&&(a.top=b.top),b.hasOwnProperty("right")&&(a.right=b.right),b.hasOwnProperty("bottom")&&(a.bottom=b.bottom),b.hasOwnProperty("left")&&(a.left=b.left),a},w=function(a){for(var b=document.querySelectorAll("."+a),c=0;c<b.length;c++)if(b[c]&&"TD"!=b[c].nodeName){var d=b[c].parentNode;d.parentNode&&d.parentNode.removeChild(d)}},x=function(a,b){var c=q(a,b);w(c),this.removeCellMeta(a,b,"borders")},y=function(a,b,c,d){var e=this.getCellMeta(a,b).borders;e&&void 0!=e.border||(e=u(a,b)),d?e[c]=s():e[c]=r(),this.setCellMeta(a,b,"borders",e);var f=q(a,b);w(f),n(e),this.render()},z=function(a,b,c){if(a.from.row==a.to.row&&a.from.col==a.to.col)"noBorders"==b?x.call(this,a.from.row,a.from.col):y.call(this,a.from.row,a.from.col,b,c);else switch(b){case"noBorders":for(var d=a.from.col;d<=a.to.col;d++)for(var e=a.from.row;e<=a.to.row;e++)x.call(this,e,d);break;case"top":for(var f=a.from.col;f<=a.to.col;f++)y.call(this,a.from.row,f,b,c);break;case"right":for(var g=a.from.row;g<=a.to.row;g++)y.call(this,g,a.to.col,b);break;case"bottom":for(var h=a.from.col;h<=a.to.col;h++)y.call(this,a.to.row,h,b);break;case"left":for(var i=a.from.row;i<=a.to.row;i++)y.call(this,i,a.from.col,b)}},A=function(a,b){var c=!1;return a.getSelectedRange().forAll(function(d,e){var f=a.getCellMeta(d,e).borders;if(f){if(!b)return c=!0,!1;if(!f[b].hasOwnProperty("hide"))return c=!0,!1}}),c},B=function(a){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+a},C=function(a){this.getSettings().customBorders&&(a.items.push(Handsontable.ContextMenu.SEPARATOR),a.items.push({key:"borders",name:"Borders",submenu:{items:{top:{name:function(){var a="Top",b=A(this,"top");return b&&(a=B(a)),a},callback:function(){var a=A(this,"top");z.call(this,this.getSelectedRange(),"top",a)},disabled:!1},right:{name:function(){var a="Right",b=A(this,"right");return b&&(a=B(a)),a},callback:function(){var a=A(this,"right");z.call(this,this.getSelectedRange(),"right",a)},disabled:!1},bottom:{name:function(){var a="Bottom",b=A(this,"bottom");return b&&(a=B(a)),a},callback:function(){var a=A(this,"bottom");z.call(this,this.getSelectedRange(),"bottom",a)},disabled:!1},left:{name:function(){var a="Left",b=A(this,"left");return b&&(a=B(a)),a},callback:function(){var a=A(this,"left");z.call(this,this.getSelectedRange(),"left",a)},disabled:!1},remove:{name:"Remove border(s)",callback:function(){z.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!A(this)}}}}}))};Handsontable.hooks.add("beforeInit",l),Handsontable.hooks.add("afterContextMenuDefaultOptions",C),Handsontable.hooks.add("afterInit",function(){var a=this.getSettings().customBorders;if(a){for(var b=0;b<a.length;b++)a[b].range?p.call(this,a[b]):o.call(this,a[b].row,a[b].col,a[b]);this.render(),this.view.wt.draw(!0)}}),Handsontable.CustomBorders=d},{"./../../3rdparty/walkontable/src/cell/range.js":6,"./../../3rdparty/walkontable/src/selection.js":18,"./../../plugins.js":45}],57:[function(a,b,c){"use strict";function d(){this.boundaries=null,this.callback=null}Object.defineProperties(c,{DragToScroll:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../../eventManager.js"),
e&&e.__esModule&&e||{"default":e}).eventManager;(f=a("./../../plugins.js"),f&&f.__esModule&&f||{"default":f}).registerPlugin;Handsontable.plugins.DragToScroll=d,d.prototype.setBoundaries=function(a){this.boundaries=a},d.prototype.setCallback=function(a){this.callback=a},d.prototype.check=function(a,b){var c=0,d=0;b<this.boundaries.top?d=b-this.boundaries.top:b>this.boundaries.bottom&&(d=b-this.boundaries.bottom),a<this.boundaries.left?c=a-this.boundaries.left:a>this.boundaries.right&&(c=a-this.boundaries.right),this.callback(c,d)};var h,i=function(a){a.dragToScrollListening=!1;var b=a.view.wt.wtTable.holder;h=new d,b!==window&&(h.setBoundaries(b.getBoundingClientRect()),h.setCallback(function(a,c){0>a?b.scrollLeft-=50:a>0&&(b.scrollLeft+=50),0>c?b.scrollTop-=20:c>0&&(b.scrollTop+=20)}),a.dragToScrollListening=!0)};Handsontable.hooks.add("afterInit",function(){var a=this,b=g(this);b.addEventListener(document,"mouseup",function(){a.dragToScrollListening=!1}),b.addEventListener(document,"mousemove",function(b){a.dragToScrollListening&&h.check(b.clientX,b.clientY)})}),Handsontable.hooks.add("afterDestroy",function(){g(this).clear()}),Handsontable.hooks.add("afterOnCellMouseDown",function(){i(this)}),Handsontable.hooks.add("afterOnCellCornerMouseDown",function(){i(this)}),Handsontable.plugins.DragToScroll=d},{"./../../eventManager.js":41,"./../../plugins.js":45}],58:[function(a,b,c){"use strict";function d(a){var b=[],c={rows:0,cols:0},d={rows:0,cols:0},e=[],f=[],h={groupIndicatorContainer:"htGroupIndicatorContainer",groupIndicator:function(a){return"ht"+a+"Group"},groupStart:"htGroupStart",collapseButton:"htCollapseButton",expandButton:"htExpandButton",collapseGroupId:function(a){return"htCollapse-"+a},collapseFromLevel:function(a,b){return"htCollapse"+a+"FromLevel-"+b},clickable:"clickable",levelTrigger:"htGroupLevelTrigger"},j=function(a,b){return function(c,d){return"undefined"==typeof b||"asc"===b?c[a]-d[a]:d[a]-c[a]}},k=function(a,b){for(var c=[];b>=a;)c.push(a++);return c},l=function(a,b,c){var d=[],e={row:null,col:null};if("cols"==a)for(;c>=b;)e={row:-1,col:b++},d.push(e);else for(;c>=b;)e={row:b++,col:-1},d.push(e);for(var f=m(d),g=0,h=0,i=0;i<f.length;i++)g+=f[i].filter(function(a){return a.rows}).length,h+=f[i].filter(function(a){return a.cols}).length;return{total:{rows:g,cols:h},groups:f}},m=function(a){for(var b=[],c=0;c<a.length;c++)b.push(n(a[c]));return b},n=function(a,c,d){for(var e=a.row,f=a.col,g=-1===e?0:e,h=-1===f?0:f,i=[],j=0;j<b.length;j++){var k=b[j],l=k.id,m=(k.level,k.rows||[]),n=k.cols||[];-1===i.indexOf(l)&&(-1!==m.indexOf(g)||-1!==n.indexOf(h))&&i.push(k)}-1===f?i=i.concat(r()):-1===e&&(i=i.concat(t())),c&&(i=i.filter(function(a){return a.level===c})),d&&("cols"===d?i=i.filter(function(a){return a.cols}):"rows"===d&&(i=i.filter(function(a){return a.rows})));var o=[];return i.filter(function(a){return-1===o.indexOf(a.id)?(o.push(a.id),a):void 0})},o=function(a){for(var c=0,d=b.length;d>c;c++)if(b[c].id==a)return b[c];return!1},p=function(a,c){for(var d=0,e=b.length;e>d;d++)if(b[d].level==c&&b[d].rows&&b[d].rows.indexOf(a)>-1)return b[d];return!1},q=function(a,c){for(var d=0,e=b.length;e>d;d++)if(b[d].level==c&&b[d].cols&&b[d].cols.indexOf(a)>-1)return b[d];return!1},r=function(){for(var a=[],c=0,d=b.length;d>c;c++)Array.isArray(b[c].cols)&&a.push(b[c]);return a},s=function(a){for(var c=[],d=0,e=b.length;e>d;d++)b[d].cols&&b[d].level===a&&c.push(b[d]);return c},t=function(){for(var a=[],c=0,d=b.length;d>c;c++)Array.isArray(b[c].rows)&&a.push(b[c]);return a},u=function(a){for(var c=[],d=0,e=b.length;e>d;d++)b[d].rows&&b[d].level===a&&c.push(b[d]);return c},v=function(a){var b=0;return a.length&&a.forEach(function(a){if(a=a.filter(function(a){return a.cols}),a.length){var c=a.sort(j("level","desc")),d=c[0].level;d>b&&(b=d)}}),b},w=function(a){var b=0;return a.length&&a.forEach(function(a){if(a=a.filter(function(a){return a.rows}),a.length){var c=a.sort(j("level","desc")),d=c[0].level;d>b&&(b=d)}}),b},x=function(a,e){var f=l("cols",a,e),g=v(f.groups);g===d.cols?d.cols++:g>d.cols&&(d.cols=g+1),c.cols||(c.cols=r().length),c.cols++,b.push({id:"c"+c.cols,level:g+1,cols:k(a,e),hidden:0})},y=function(a,e){var f=l("rows",a,e),g=w(f.groups);d.rows=Math.max(d.rows,g+1),c.rows||(c.rows=t().length),c.rows++,b.push({id:"r"+c.rows,level:g+1,rows:k(a,e),hidden:0})},z=function(a,b){for(var c,d=0,g=b.length;g>d;d++)if(b[d].hidden=a,c=b[d].level,e[c]||(e[c]=[]),f[c]||(f[c]=[]),b[d].rows)for(var h=0,i=b[d].rows.length;i>h;h++)a>0?e[c][b[d].rows[h]]=!0:e[c][b[d].rows[h]]=void 0;else if(b[d].cols)for(var h=0,j=b[d].cols.length;j>h;h++)a>0?f[c][b[d].cols[h]]=!0:f[c][b[d].cols[h]]=void 0},A=function(a,b,c,d){var e,f;switch(a){case"rows":e=p(b+1,c).id,f=Handsontable.Grouping.getGroupLevelsByRows();break;case"cols":e=q(b+1,c).id,f=Handsontable.Grouping.getGroupLevelsByCols()}return!!(f[b+1]&&f[b+1].indexOf(c)>-1&&d==e)},B=function(a,b,c,d){var e,f;switch(a){case"rows":e=p(b-1,c).id,f=Handsontable.Grouping.getGroupLevelsByRows();break;case"cols":e=q(b-1,c).id,f=Handsontable.Grouping.getGroupLevelsByCols()}return!!(f[b-1]&&f[b-1].indexOf(c)>-1&&d==e)},C=function(b,c,g,h){if(0===c)return!1;var i,j,k=B(b,c,g,h),l=A(b,c,g,h),m=!1;switch(b){case"rows":i=Handsontable.Grouping.getGroupLevelsByRows(),j=a.countRows();for(var n=0;n<=d.rows;n++)if(e[n]&&e[n][c+1]){m=!0;break}break;case"cols":i=Handsontable.Grouping.getGroupLevelsByCols(),j=a.countCols();for(var n=0;n<=d.cols;n++)if(f[n]&&f[n][c+1]){m=!0;break}}if(k){if(c==j-1)return!0;if(!l||l&&m)return!0;if(!i[c+1])return!0}return!1},D=function(b){var c;switch(b){case"rows":c=d.rows;for(var g=0;c>=g;g++)if(e[g]&&e[g][a.countRows()-1])return!0;break;case"cols":c=d.cols;for(var g=0;c>=g;g++)if(f[g]&&f[g][a.countCols()-1])return!0}return!1},E=function(b,c,g,h){var i,j,k,l=o(h),m=!1,n=function(a){for(var b=!1,g="rows"==a?e:f,h=0;h<=d[a];h++){for(k=c;l[a].indexOf(k)>-1;)b=!(!g[h]||!g[h][k]),k--;if(b)break}return b},p=B(b,c,g,h),q=A(b,c,g,h);switch(b){case"rows":i=Handsontable.Grouping.getGroupLevelsByRows(),j=a.countRows(),m=n(b);break;case"cols":i=Handsontable.Grouping.getGroupLevelsByCols(),j=a.countCols(),m=n(b)}if(c==j-1)return!1;if(0===c){if(q)return!0}else if(!p||p&&m){if(q)return!0}else if(!i[c-1]&&q)return!0;return!1},F=function(a,b,c,d,e){var f;switch(a){case"rows":f=p(b-1,c).id;break;case"cols":f=q(b-1,c).id}if(!f)return null;if(b>0&&B(a,b-1,c,f)&&f!=d){var i=document.createElement("DIV");return g.addClass(i,h.expandButton),i.id="htExpand-"+f,i.appendChild(document.createTextNode("+")),i.setAttribute("data-level",c),i.setAttribute("data-type",a),i.setAttribute("data-hidden","1"),e.appendChild(i),i}return null},G=function(a){for(var b=t(),c=r(),d=0,e=b.length;e>d;d++)if(b[d].rows.indexOf(a.row)>-1&&b[d].hidden)return!0;if(null===a.col)return!1;for(var d=0,f=c.length;f>d;d++)if(c[d].cols.indexOf(a.col)>-1&&c[d].hidden)return!0;return!1};return{getGroups:function(){return b},getLevels:function(){return d},instance:a,baseSpareRows:a.getSettings().minSpareRows,baseSpareCols:a.getSettings().minSpareCols,getRowGroups:t,getColGroups:r,init:function(){var b=a.getSettings().groups;b&&Array.isArray(b)&&Handsontable.Grouping.initGroups(b)},initGroups:function(a){b=[],a.forEach(function(a){var b=[],c=!1,d=!1;Array.isArray(a.rows)?(b=a.rows,c=!0):Array.isArray(a.cols)&&(b=a.cols,d=!0);var e=b[0],f=b[b.length-1];c?y(e,f):d&&x(e,f)})},resetGroups:function(){b=[],c={rows:0,cols:0},d={rows:0,cols:0};var a;for(var e in h)if("function"!=typeof h[e]){a=document.querySelectorAll("."+h[e]);for(var f=0,i=a.length;i>f;f++)g.removeClass(a[f],h[e])}for(var j=["htGroupColClosest","htGroupCol"],e=0,k=j.length;k>e;e++){a=document.querySelectorAll("."+j[e]);for(var f=0,i=a.length;i>f;f++)g.removeClass(a[f],j[e])}},updateGroups:function(){var a=this.getSettings().groups;Handsontable.Grouping.resetGroups(),Handsontable.Grouping.initGroups(a)},afterGetRowHeader:function(a,b){if(b.parentNode){for(var c=!1,d=0,f=e.length;f>d;d++)e[d]&&e[d][a]===!0&&(c=!0);c?g.addClass(b.parentNode,"hidden"):!c&&g.hasClass(b.parentNode,"hidden")&&g.removeClass(b.parentNode,"hidden")}},afterGetColHeader:function(b,c){var d=this.view.wt.wtSettings.getSetting("rowHeaders").length,e=a.rootElement.querySelectorAll("colgroup col:nth-child("+parseInt(b+d+1,10)+")");if(0!==e.length){for(var h=!1,i=0,j=f.length;j>i;i++)f[i]&&f[i][b]===!0&&(h=!0);if(h)for(var i=0,k=e.length;k>i;i++)g.addClass(e[i],"hidden");else if(!h&&g.hasClass(e[0],"hidden"))for(var i=0,k=e.length;k>i;i++)g.removeClass(e[i],"hidden")}},groupIndicatorsFactory:function(a,b){var e,f,j,k,l,m,n,o;switch(b){case"horizontal":e=Handsontable.Grouping.getGroupLevelsByCols(),f=function(a){return Array.prototype.indexOf.call(a.parentNode.parentNode.childNodes,a.parentNode)+1},j=function(a,b){return q(a,b).id},k="cols",l=function(a,b){return q(a-1,b)},m="columnHeaders",n=function(a){if(1===a.length){var b=a[0];a[0]=function(a,c,d){-1>a?s()(a,c,d):(g.removeClass(c,h.groupIndicatorContainer),b(a,c,d))}}return function(){return a}},o=!0;break;case"vertical":e=Handsontable.Grouping.getGroupLevelsByRows(),f=function(a){return g.index(a)+1},j=function(a,b){return p(a,b).id},k="rows",l=function(a,b){return p(a-1,b)},m="rowHeaders",n=function(a){return a}}var r=function(a){var b=document.createElement("div");return a.appendChild(b),{button:b,addClass:function(a){g.addClass(b,a)}}},s=function(){var a=b.charAt(0).toUpperCase()+b.slice(1);return function(b,c,d){d++;for(var f,m;f=c.lastChild;)c.removeChild(f);g.addClass(c,h.groupIndicatorContainer);var n=j(b,d);if(b>-1&&e[b]&&e[b].indexOf(d)>-1&&(m=r(c),m.addClass(h.groupIndicator(a)),E(k,b,d,n)&&m.addClass(h.groupStart),C(k,b,d,n)&&(m.button.appendChild(document.createTextNode("-")),m.addClass(h.collapseButton),m.button.id=h.collapseGroupId(n),m.button.setAttribute("data-level",d),m.button.setAttribute("data-type",k))),o){var p=g.index(c.parentNode);if(-1===b||-1>b&&p===Handsontable.Grouping.getLevels().cols+1||0===p&&0===Handsontable.Grouping.getLevels().cols)if(m=r(c),m.addClass(h.levelTrigger),-1===b)m.button.id=h.collapseFromLevel("Cols",d),m.button.appendChild(document.createTextNode(d));else if(-1>b&&p===Handsontable.Grouping.getLevels().cols+1||0===p&&0===Handsontable.Grouping.getLevels().cols){var q=g.index(c)+1;m.button.id=h.collapseFromLevel("Rows",q),m.button.appendChild(document.createTextNode(q))}}var s=F(k,b,d,n,c);if(b>0){var t=l(b-1,d);s&&t.hidden&&g.addClass(s,h.clickable)}i()}};if(a=n(a),c[k]>0)for(var t=0;t<d[k]+1;t++)Array.isArray(a)||(a="function"==typeof a?a():new Array(a)),a.unshift(s())},getGroupLevelsByRows:function(){for(var a=t(),b=[],c=0,d=a.length;d>c;c++)if(a[c].rows)for(var e=0,f=a[c].rows.length;f>e;e++)b[a[c].rows[e]]||(b[a[c].rows[e]]=[]),b[a[c].rows[e]].push(a[c].level);return b},getGroupLevelsByCols:function(){for(var a=r(),b=[],c=0,d=a.length;d>c;c++)if(a[c].cols)for(var e=0,f=a[c].cols.length;f>e;e++)b[a[c].cols[e]]||(b[a[c].cols[e]]=[]),b[a[c].cols[e]].push(a[c].level);return b},toggleGroupVisibility:function(b,c,e){if(g.hasClass(b.target,h.expandButton)||g.hasClass(b.target,h.collapseButton)||g.hasClass(b.target,h.levelTrigger)){var f,i,j,k,l=b.target,m=l.id.split("-"),n=[],p=function(a){a&&(l=a),m=l.id.split("-"),f=m[1],i=parseInt(l.getAttribute("data-level"),10),j=l.getAttribute("data-type"),k=parseInt(l.getAttribute("data-hidden")),k=isNaN(k)?1:k?0:1,l.setAttribute("data-hidden",k.toString()),n.push(o(f))};if(l.className.indexOf(h.levelTrigger)>-1){for(var q,r=[],t=[],v=l.id.indexOf("Rows")>-1?"rows":"cols",w=1,x=d[v];x>=w;w++)if(q="rows"==v?u(w):s(w),w>=parseInt(m[1],10))for(var y=0,A=q.length;A>y;y++)t.push(q[y]);else for(var y=0,A=q.length;A>y;y++)r.push(q[y]);z(!0,t),z(!1,r)}else p(),z(k,n);j=j||v;var B=D(j),C=j.charAt(0).toUpperCase()+j.slice(1),E=Handsontable.Grouping["baseSpare"+C];B?0==E&&(a.alter("insert_"+j.slice(0,-1),a["count"+C]()),Handsontable.Grouping["dummy"+j.slice(0,-1)]=!0):0==E&&Handsontable.Grouping["dummy"+j.slice(0,-1)]&&(a.alter("remove_"+j.slice(0,-1),a["count"+C]()-1),Handsontable.Grouping["dummy"+j.slice(0,-1)]=!1),a.render(),b.stopImmediatePropagation()}},modifySelectionFactory:function(a){var b,c=this.instance,d=new WalkontableCellCoords(0,0),e=function(a,b){var c=0;switch(a){case"down":for(;G(b);)c++,b.row+=1;break;case"up":for(;G(b);)c--,b.row-=1;break;case"right":for(;G(b);)c++,b.col+=1;break;case"left":for(;G(b);)c--,b.col-=1}return c},f=function(a,b){a.row>0?G(b)&&(a.row+=e("down",b)):a.row<0&&G(b)&&(a.row+=e("up",b)),a.col>0?G(b)&&(a.col+=e("right",b)):a.col<0&&G(b)&&(a.col+=e("left",b))};switch(a){case"start":return function(a){b=c.getSelected(),d.row=b[0]+a.row,d.col=b[1]+a.col,f(a,d)};case"end":return function(a){b=c.getSelected(),d.row=b[2]+a.row,d.col=b[3]+a.col,f(a,d)}}},modifyRowHeight:function(b,c){return a.view.wt.wtTable.rowFilter&&G({row:c,col:null})?0:void 0},validateGroups:function(){for(var b=function(a,b){return a[0]<b[0]&&a[1]<b[1]&&b[0]<=a[1]||a[0]>b[0]&&b[1]<a[1]&&a[0]<=b[1]?!0:void 0},c=a.getSettings().groups,d=[],e=[],f=0,g=c.length;g>f;f++)if(c[f].rows){if(1===c[f].rows.length)throw new Error("Grouping error:  Group {"+c[f].rows[0]+"} is invalid. Cannot define single-entry groups.");if(0===c[f].rows.length)throw new Error("Grouping error:  Cannot define empty groups.");e.push(c[f].rows);for(var h=0,i=e.length;i>h;h++)if(b(c[f].rows,e[h]))throw new Error("Grouping error:  ranges {"+c[f].rows[0]+", "+c[f].rows[1]+"} and {"+e[h][0]+", "+e[h][1]+"} are overlapping.")}else if(c[f].cols){if(1===c[f].cols.length)throw new Error("Grouping error:  Group {"+c[f].cols[0]+"} is invalid. Cannot define single-entry groups.");if(0===c[f].cols.length)throw new Error("Grouping error:  Cannot define empty groups.");d.push(c[f].cols);for(var h=0,j=d.length;j>h;h++)if(b(c[f].cols,d[h]))throw new Error("Grouping error:  ranges {"+c[f].cols[0]+", "+c[f].cols[1]+"} and {"+d[h][0]+", "+d[h][1]+"} are overlapping.")}return!0},afterGetRowHeaderRenderers:function(a){Handsontable.Grouping.groupIndicatorsFactory(a,"vertical")},afterGetColumnHeaderRenderers:function(a){Handsontable.Grouping.groupIndicatorsFactory(a,"horizontal")},hookProxy:function(b,c){return function(){return a.getSettings().groups?c?Handsontable.Grouping[b](c).apply(this,arguments):Handsontable.Grouping[b].apply(this,arguments):void 0}}}}var e,f,g=(e=a("./../../dom.js"),e&&e.__esModule&&e||{"default":e});(f=a("./../../plugins.js"),f&&f.__esModule&&f||{"default":f}).registerPlugin;d.prototype.beforeInit=function(){};var h=function(){var a=this,b=!!a.getSettings().groups;if(b){var c={};Handsontable.Grouping=new d(a),a.getSettings().rowHeaders||(c.rowHeaders=!0),a.getSettings().colHeaders||(c.colHeaders=!0),(c.colHeaders||c.rowHeaders)&&a.updateSettings(c);var e=Handsontable.Grouping.validateGroups();if(!e)return;a.addHook("beforeInit",Handsontable.Grouping.hookProxy("init")),a.addHook("afterUpdateSettings",Handsontable.Grouping.hookProxy("updateGroups")),a.addHook("afterGetColumnHeaderRenderers",Handsontable.Grouping.hookProxy("afterGetColumnHeaderRenderers")),a.addHook("afterGetRowHeaderRenderers",Handsontable.Grouping.hookProxy("afterGetRowHeaderRenderers")),a.addHook("afterGetRowHeader",Handsontable.Grouping.hookProxy("afterGetRowHeader")),a.addHook("afterGetColHeader",Handsontable.Grouping.hookProxy("afterGetColHeader")),a.addHook("beforeOnCellMouseDown",Handsontable.Grouping.hookProxy("toggleGroupVisibility")),a.addHook("modifyTransformStart",Handsontable.Grouping.hookProxy("modifySelectionFactory","start")),a.addHook("modifyTransformEnd",Handsontable.Grouping.hookProxy("modifySelectionFactory","end")),a.addHook("modifyRowHeight",Handsontable.Grouping.hookProxy("modifyRowHeight"))}},i=function(){for(var a=document.querySelectorAll("colgroup"),b=0,c=a.length;c>b;b++){var d=a[b].querySelectorAll("col.rowHeader");if(0===d.length)return;for(var e=0,f=d.length+1;f>e;e++){if(2==f)return;e<Handsontable.Grouping.getLevels().rows+1&&(e==Handsontable.Grouping.getLevels().rows?g.addClass(d[e],"htGroupColClosest"):g.addClass(d[e],"htGroupCol"))}}};Handsontable.hooks.add("beforeInit",h),Handsontable.hooks.add("afterUpdateSettings",function(){this.getSettings().groups&&!Handsontable.Grouping?h.call(this,arguments):!this.getSettings().groups&&Handsontable.Grouping&&(Handsontable.Grouping.resetGroups(),Handsontable.Grouping=void 0)}),Handsontable.plugins.Grouping=d},{"./../../dom.js":27,"./../../plugins.js":45}],59:[function(a,b,c){"use strict";function d(a){function b(b){b.items.push(Handsontable.ContextMenu.SEPARATOR,{key:"freeze_column",name:function(){var b=a.getSelected()[1];return b>n-1?"Freeze this column":"Unfreeze this column"},disabled:function(){var b=a.getSelected();return b[1]!==b[3]},callback:function(){var b=a.getSelected()[1];b>n-1?i(b):j(b)}})}function c(){a.updateSettings({fixedColumnsLeft:n+1}),n++}function d(){a.updateSettings({fixedColumnsLeft:n-1}),n--}function e(b){a.manualColumnPositions&&0!==a.manualColumnPositions.length||a.manualColumnPositions||(a.manualColumnPositions=[]),b?a.manualColumnPositions[b]||f(b+1):f(a.countCols())}function f(b){if(a.manualColumnPositions.length<b)for(var c=a.manualColumnPositions.length;b>c;c++)a.manualColumnPositions[c]=c}function g(b,c,d,e){null==d&&(d=b),"freeze"===e?a.manualColumnPositions.splice(n,0,a.manualColumnPositions.splice(c,1)[0]):"unfreeze"===e&&a.manualColumnPositions.splice(d,0,a.manualColumnPositions.splice(c,1)[0])}function h(a){for(var b=n,c=k(b),d=k(a);d>c;)b++,c=k(b);return b-1}function i(b){if(!(n-1>=b)){var d=k(b)||b;e(d),g(d,b,null,"freeze"),c(),a.view.wt.wtOverlays.leftOverlay.refresh(),a.view.wt.wtOverlays.adjustElementsSize()}}function j(b){if(!(b>n-1)){var c=h(b),f=k(b)||b;e(f),g(f,b,c,"unfreeze"),d(),a.view.wt.wtOverlays.leftOverlay.refresh()}}function k(b){return a.manualColumnPositions[b]}function l(a){return this.manualColumnPositionsPluginUsages.length>1?a:k(a)}function m(){a.addHook("modifyCol",l),a.addHook("afterContextMenuDefaultOptions",b)}var n=a.getSettings().fixedColumnsLeft,o=function(){"undefined"!=typeof a.manualColumnPositionsPluginUsages?a.manualColumnPositionsPluginUsages.push("manualColumnFreeze"):a.manualColumnPositionsPluginUsages=["manualColumnFreeze"],m()};return{init:o,freezeColumn:i,unfreezeColumn:j,helpers:{addFixedColumn:c,removeFixedColumn:d,checkPositionData:e,modifyColumnOrder:g,getBestColumnReturnPosition:h}}}Object.defineProperties(c,{ManualColumnFreeze:{get:function(){return d}},__esModule:{value:!0}});var e,f=((e=a("./../../plugins.js"),e&&e.__esModule&&e||{"default":e}).registerPlugin,function(){if(this.getSettings().manualColumnFreeze){var a;Handsontable.plugins.manualColumnFreeze=d,this.manualColumnFreeze=new d(this),a=this.manualColumnFreeze,a.init.call(this)}});Handsontable.hooks.add("beforeInit",f)},{"./../../plugins.js":45}],60:[function(a,b,c){"use strict";function d(){function a(a){n=this,o=a;var b=this.view.wt.wtTable.getCoords(a).col;if(b>=0){m=b;var c=o.getBoundingClientRect();l=c.left,p.style.top=c.top+"px",p.style.left=l+"px",n.rootElement.appendChild(p)}}function b(a,b){var c=a.getBoundingClientRect(),d=6;b>0?p.style.left=c.left+c.width-d+"px":p.style.left=c.left+"px"}function c(){var a=this;j.addClass(p,"active"),j.addClass(q,"active");var b=o.getBoundingClientRect();q.style.width=b.width+"px",q.style.height=a.view.maximumVisibleElementHeight(0)+"px",q.style.top=p.style.top,q.style.left=l+"px",a.rootElement.appendChild(q)}function d(a){q.style.left=l+a+"px"}function e(){j.removeClass(p,"active"),j.removeClass(q,"active")}var f,g,h,l,m,n,o,p=document.createElement("DIV"),q=document.createElement("DIV"),r=k(this);p.className="manualColumnMover",q.className="manualColumnMoverGuide";var s=function(){var a=this;Handsontable.hooks.run(a,"persistentStateSave","manualColumnPositions",a.manualColumnPositions)},t=function(){var a=this,b={};return Handsontable.hooks.run(a,"persistentStateLoad","manualColumnPositions",b),b.value},u=function(a){return"BODY"!=a.tagName?"THEAD"==a.parentNode.tagName?!0:(a=a.parentNode,u(a)):!1},v=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:v(a.parentNode):null},w=function(){var k,l=this;r.addEventListener(l.rootElement,"mouseover",function(c){if(u(c.target)){var d=v(c.target);if(d)if(k){var e=l.view.wt.wtTable.getCoords(d).col;e>=0&&(g=e,b(c.target,g-f))}else a.call(l,d)}}),r.addEventListener(l.rootElement,"mousedown",function(a){j.hasClass(a.target,"manualColumnMover")&&(h=i.pageX(a),c.call(l),k=l,f=m,g=m)}),r.addEventListener(window,"mousemove",function(a){k&&d(i.pageX(a)-h)}),r.addEventListener(window,"mouseup",function(b){k&&(e(),k=!1,y(l.manualColumnPositions,l.countCols()),l.manualColumnPositions.splice(g,0,l.manualColumnPositions.splice(f,1)[0]),Handsontable.hooks.run(l,"beforeColumnMove",f,g),l.forceFullRender=!0,l.view.render(),s.call(l),Handsontable.hooks.run(l,"afterColumnMove",f,g),a.call(l,o))}),l.addHook("afterDestroy",x)},x=function(){r.clear()},y=function(a,b){if(a.length<b)for(var c=a.length;b>c;c++)a[c]=c};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(a){var b=this,c=!!this.getSettings().manualColumnMove;if(c){var d=this.getSettings().manualColumnMove,e=t.call(b);"undefined"!=typeof e?this.manualColumnPositions=e:Array.isArray(d)?this.manualColumnPositions=d:this.manualColumnPositions=[],"afterInit"==a&&("undefined"!=typeof b.manualColumnPositionsPluginUsages?b.manualColumnPositionsPluginUsages.push("manualColumnMove"):b.manualColumnPositionsPluginUsages=["manualColumnMove"],w.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else{var f=b.manualColumnPositionsPluginUsages?b.manualColumnPositionsPluginUsages.indexOf("manualColumnMove"):-1;f>-1&&(x.call(this),this.manualColumnPositions=[],b.manualColumnPositionsPluginUsages[f]=void 0)}},this.modifyCol=function(a){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[a]&&y(this.manualColumnPositions,a+1),this.manualColumnPositions[a]):a},this.afterRemoveCol=function(a,b){if(this.getSettings().manualColumnMove){var c,d=this.manualColumnPositions;c=d.splice(a,b),d=d.map(function(a){var b,d=a;for(b=0;b<c.length;b++)a>c[b]&&d--;return d}),this.manualColumnPositions=d}},this.afterCreateCol=function(a,b){if(this.getSettings().manualColumnMove){var c=this.manualColumnPositions;if(c.length){for(var d=[],e=0;b>e;e++)d.push(a+e);a>=c.length?c.concat(d):(c=c.map(function(c){return c>=a?c+b:c}),c.splice.apply(c,[a,0].concat(d))),this.manualColumnPositions=c}}}}Object.defineProperties(c,{ManualColumnMove:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../../eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,l=((h=a("./../../plugins.js"),h&&h.__esModule&&h||{"default":h}).registerPlugin,new d);Handsontable.hooks.add("beforeInit",l.beforeInit),Handsontable.hooks.add("afterInit",function(){l.init.call(this,"afterInit")}),Handsontable.hooks.add("afterUpdateSettings",function(){l.init.call(this,"afterUpdateSettings")}),Handsontable.hooks.add("modifyCol",l.modifyCol),Handsontable.hooks.add("afterRemoveCol",l.afterRemoveCol),Handsontable.hooks.add("afterCreateCol",l.afterCreateCol),Handsontable.hooks.register("beforeColumnMove"),Handsontable.hooks.register("afterColumnMove")},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../helpers.js":42,"./../../plugins.js":45}],61:[function(a,b,c){"use strict";function d(){function a(a){l=this,f=a;var b=this.view.wt.wtTable.getCoords(a).col;if(b>=0){g=b;var c=f.getBoundingClientRect();p=c.left-6,o=parseInt(c.width,10),q.style.top=c.top+"px",q.style.left=p+o+"px",l.rootElement.appendChild(q)}}function b(){q.style.left=p+h+"px"}function c(){var a=this;j.addClass(q,"active"),j.addClass(r,"active"),r.style.top=q.style.top,r.style.left=q.style.left,r.style.height=a.view.maximumVisibleElementHeight(0)+"px",a.rootElement.appendChild(r)}function d(){r.style.left=q.style.left}function e(){j.removeClass(q,"active"),j.removeClass(r,"active")}var f,g,h,l,m,n,o,p,q=document.createElement("DIV"),r=document.createElement("DIV"),s=k(this);q.className="manualColumnResizer",r.className="manualColumnResizerGuide";var t=function(){var a=this;Handsontable.hooks.run(a,"persistentStateSave","manualColumnWidths",a.manualColumnWidths)},u=function(){var a=this,b={};return Handsontable.hooks.run(a,"persistentStateLoad","manualColumnWidths",b),b.value},v=function(a){return"BODY"!=a.tagName?"THEAD"==a.parentNode.tagName?!0:(a=a.parentNode,v(a)):!1},w=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:w(a.parentNode):null},x=function(){var k,l=this,p=0,q=null;s.addEventListener(l.rootElement,"mouseover",function(b){if(v(b.target)){var c=w(b.target);c&&(k||a.call(l,c))}}),s.addEventListener(l.rootElement,"mousedown",function(a){j.hasClass(a.target,"manualColumnResizer")&&(c.call(l),k=l,null==q&&(q=setTimeout(function(){if(p>=2){var a=Handsontable.hooks.run(l,"beforeColumnResize",g,m,!0);void 0!==a&&(m=a),z(g,m),l.forceFullRender=!0,l.view.render(),l.view.wt.wtOverlays.adjustElementsSize(!0),Handsontable.hooks.run(l,"afterColumnResize",g,m,!0)}p=0,q=null},500),l._registerTimeout(q)),p++,n=i.pageX(a),m=o)}),s.addEventListener(window,"mousemove",function(a){k&&(h=o+(i.pageX(a)-n),m=z(g,h),b(),d())}),s.addEventListener(window,"mouseup",function(){k&&(e(),k=!1,m!=o&&(Handsontable.hooks.run(l,"beforeColumnResize",g,m),l.forceFullRender=!0,l.view.render(),l.view.wt.wtOverlays.adjustElementsSize(!0),t.call(l),Handsontable.hooks.run(l,"afterColumnResize",g,m)),a.call(l,f))}),l.addHook("afterDestroy",y)},y=function(){s.clear()};this.init=function(a){this.manualColumnWidths=[];var b=this,c=!!this.getSettings().manualColumnResize;if(c){var d=this.getSettings().manualColumnResize,e=u.call(b);"undefined"!=typeof b.manualColumnWidthsPluginUsages?b.manualColumnWidthsPluginUsages.push("manualColumnResize"):b.manualColumnWidthsPluginUsages=["manualColumnResize"],"undefined"!=typeof e?this.manualColumnWidths=e:Array.isArray(d)?this.manualColumnWidths=d:this.manualColumnWidths=[],a||x.call(this)}else{var f=b.manualColumnWidthsPluginUsages?b.manualColumnWidthsPluginUsages.indexOf("manualColumnResize"):-1;f>-1&&(y.call(this),this.manualColumnWidths=[])}};var z=function(a,b){return b=Math.max(b,20),a=Handsontable.hooks.run(l,"modifyCol",a),l.manualColumnWidths[a]=b,b};this.modifyColWidth=function(a,b){return b=this.runHooks("modifyCol",b),this.getSettings().manualColumnResize&&this.manualColumnWidths[b]?this.manualColumnWidths[b]:a}}Object.defineProperties(c,{ManualColumnResize:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../../eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,l=((h=a("./../../plugins.js"),h&&h.__esModule&&h||{"default":h}).registerPlugin,new d);Handsontable.hooks.add("init",l.init),Handsontable.hooks.add("afterUpdateSettings",function(){l.init.call(this,"afterUpdateSettings")}),Handsontable.hooks.add("modifyColWidth",l.modifyColWidth),Handsontable.hooks.register("afterColumnResize"),Handsontable.hooks.register("beforeColumnResize")},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../helpers.js":42,"./../../plugins.js":45}],62:[function(a,b,c){"use strict";function d(){function a(a){var b=this;n=a;var c=this.view.wt.wtTable.getCoords(a).row;if(c>=0){m=c;var d=n.getBoundingClientRect();l=d.top,o.style.top=l+"px",o.style.left=d.left+"px",b.rootElement.appendChild(o)}}function b(a,b){var c=a.getBoundingClientRect(),d=6;b>0?o.style.top=c.top+c.height-d+"px":o.style.top=c.top+"px"}function c(){var a=this;j.addClass(o,"active"),j.addClass(p,"active");var b=n.getBoundingClientRect();p.style.width=a.view.maximumVisibleElementWidth(0)+"px",p.style.height=b.height+"px",p.style.top=l+"px",p.style.left=o.style.left,a.rootElement.appendChild(p)}function d(a){p.style.top=l+a+"px"}function e(){j.removeClass(o,"active"),j.removeClass(p,"active")}var f,g,h,l,m,n,o=document.createElement("DIV"),p=document.createElement("DIV"),q=k(this);o.className="manualRowMover",p.className="manualRowMoverGuide";var r=function(){var a=this;Handsontable.hooks.run(a,"persistentStateSave","manualRowPositions",a.manualRowPositions)},s=function(){var a=this,b={};return Handsontable.hooks.run(a,"persistentStateLoad","manualRowPositions",b),b.value},t=function(a){return"BODY"!=a.tagName?"TBODY"==a.parentNode.tagName?!0:(a=a.parentNode,t(a)):!1},u=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:u(a.parentNode):null},v=function(){var k,l=this;q.addEventListener(l.rootElement,"mouseover",function(c){if(t(c.target)){var d=u(c.target);d&&(k?(g=l.view.wt.wtTable.getCoords(d).row,b(d,g-f)):a.call(l,d))}}),q.addEventListener(l.rootElement,"mousedown",function(a){j.hasClass(a.target,"manualRowMover")&&(h=i.pageY(a),c.call(l),k=l,f=m,g=m)}),q.addEventListener(window,"mousemove",function(a){k&&d(i.pageY(a)-h)}),q.addEventListener(window,"mouseup",function(b){k&&(e(),k=!1,x(l.manualRowPositions,l.countRows()),l.manualRowPositions.splice(g,0,l.manualRowPositions.splice(f,1)[0]),Handsontable.hooks.run(l,"beforeRowMove",f,g),l.forceFullRender=!0,l.view.render(),r.call(l),Handsontable.hooks.run(l,"afterRowMove",f,g),a.call(l,n))}),l.addHook("afterDestroy",w)},w=function(){q.clear()},x=function(a,b){if(a.length<b)for(var c=a.length;b>c;c++)a[c]=c};this.beforeInit=function(){this.manualRowPositions=[]},this.init=function(a){var b=this,c=!!b.getSettings().manualRowMove;if(c){var d=b.getSettings().manualRowMove,e=s.call(b);"undefined"!=typeof b.manualRowPositionsPluginUsages?b.manualRowPositionsPluginUsages.push("manualColumnMove"):b.manualRowPositionsPluginUsages=["manualColumnMove"],"undefined"!=typeof e?this.manualRowPositions=e:Array.isArray(d)?this.manualRowPositions=d:this.manualRowPositions=[],"afterInit"===a&&(v.call(this),this.manualRowPositions.length>0&&(b.forceFullRender=!0,b.render()))}else{var f=b.manualRowPositionsPluginUsages?b.manualRowPositionsPluginUsages.indexOf("manualColumnMove"):-1;f>-1&&(w.call(this),b.manualRowPositions=[],b.manualRowPositionsPluginUsages[f]=void 0)}},this.modifyRow=function(a){var b=this;return b.getSettings().manualRowMove?("undefined"==typeof b.manualRowPositions[a]&&x(this.manualRowPositions,a+1),b.manualRowPositions[a]):a}}Object.defineProperties(c,{ManualRowMove:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../../eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,l=((h=a("./../../plugins.js"),h&&h.__esModule&&h||{"default":h}).registerPlugin,new d);Handsontable.hooks.add("beforeInit",l.beforeInit),Handsontable.hooks.add("afterInit",function(){l.init.call(this,"afterInit")}),Handsontable.hooks.add("afterUpdateSettings",function(){l.init.call(this,"afterUpdateSettings")}),Handsontable.hooks.add("modifyRow",l.modifyRow),Handsontable.hooks.register("beforeRowMove"),Handsontable.hooks.register("afterRowMove")},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../helpers.js":42,"./../../plugins.js":45}],63:[function(a,b,c){"use strict";function d(){function a(a){l=this,f=a;var b=this.view.wt.wtTable.getCoords(a).row;if(b>=0){g=b;var c=f.getBoundingClientRect();p=c.top-6,o=parseInt(c.height,10),q.style.left=c.left+"px",q.style.top=p+o+"px",l.rootElement.appendChild(q)}}function b(){q.style.top=p+h+"px"}function c(){var a=this;j.addClass(q,"active"),j.addClass(r,"active"),r.style.top=q.style.top,r.style.left=q.style.left,r.style.width=a.view.maximumVisibleElementWidth(0)+"px",a.rootElement.appendChild(r)}function d(){r.style.top=q.style.top}function e(){j.removeClass(q,"active"),j.removeClass(r,"active")}var f,g,h,l,m,n,o,p,q=document.createElement("DIV"),r=document.createElement("DIV"),s=k(this);
q.className="manualRowResizer",r.className="manualRowResizerGuide";var t=function(){var a=this;Handsontable.hooks.run(a,"persistentStateSave","manualRowHeights",a.manualRowHeights)},u=function(){var a=this,b={};return Handsontable.hooks.run(a,"persistentStateLoad","manualRowHeights",b),b.value},v=function(a){return"BODY"!=a.tagName?"TBODY"==a.parentNode.tagName?!0:(a=a.parentNode,v(a)):!1},w=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:w(a.parentNode):null},x=function(){var k,l=this,p=0,q=null;s.addEventListener(l.rootElement,"mouseover",function(b){if(v(b.target)){var c=w(b.target);c&&(k||a.call(l,c))}}),s.addEventListener(l.rootElement,"mousedown",function(a){j.hasClass(a.target,"manualRowResizer")&&(c.call(l),k=l,null==q&&(q=setTimeout(function(){if(p>=2){var a=Handsontable.hooks.run(l,"beforeRowResize",g,m,!0);void 0!==a&&(m=a),z(g,m),l.forceFullRender=!0,l.view.render(),Handsontable.hooks.run(l,"afterRowResize",g,m,!0)}p=0,q=null},500),l._registerTimeout(q)),p++,n=i.pageY(a),m=o)}),s.addEventListener(window,"mousemove",function(a){k&&(h=o+(i.pageY(a)-n),m=z(g,h),b(),d())}),s.addEventListener(window,"mouseup",function(b){k&&(e(),k=!1,m!=o&&(Handsontable.hooks.run(l,"beforeRowResize",g,m),l.forceFullRender=!0,l.view.render(),t.call(l),Handsontable.hooks.run(l,"afterRowResize",g,m)),a.call(l,f))}),l.addHook("afterDestroy",y)},y=function(){s.clear()};this.init=function(a){this.manualRowHeights=[];var b=this,c=!!this.getSettings().manualRowResize;if(c){var d=this.getSettings().manualRowResize,e=u.call(b);"undefined"!=typeof b.manualRowHeightsPluginUsages?b.manualRowHeightsPluginUsages.push("manualRowResize"):b.manualRowHeightsPluginUsages=["manualRowResize"],"undefined"!=typeof e?this.manualRowHeights=e:Array.isArray(d)?this.manualRowHeights=d:this.manualRowHeights=[],void 0===a&&x.call(this)}else{var f=b.manualRowHeightsPluginUsages?b.manualRowHeightsPluginUsages.indexOf("manualRowResize"):-1;f>-1&&(y.call(this),this.manualRowHeights=[],b.manualRowHeightsPluginUsages[f]=void 0)}};var z=function(a,b){return a=Handsontable.hooks.run(l,"modifyRow",a),l.manualRowHeights[a]=b,b};this.modifyRowHeight=function(a,b){return this.getSettings().manualRowResize&&(b=this.runHooks("modifyRow",b),void 0!==this.manualRowHeights[b])?this.manualRowHeights[b]:a}}Object.defineProperties(c,{ManualRowResize:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../../helpers.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../../dom.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("./../../eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,l=((h=a("./../../plugins.js"),h&&h.__esModule&&h||{"default":h}).registerPlugin,new d);Handsontable.hooks.add("init",l.init),Handsontable.hooks.add("afterUpdateSettings",function(){l.init.call(this,"afterUpdateSettings")}),Handsontable.hooks.add("modifyRowHeight",l.modifyRowHeight),Handsontable.hooks.register("beforeRowResize"),Handsontable.hooks.register("afterRowResize")},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../helpers.js":42,"./../../plugins.js":45}],64:[function(a,b,c){"use strict";function d(){var a=[];return a.getInfo=function(a,b){for(var c=0,d=this.length;d>c;c++)if(this[c].row<=a&&this[c].row+this[c].rowspan-1>=a&&this[c].col<=b&&this[c].col+this[c].colspan-1>=b)return this[c]},a.setInfo=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].row===a.row&&this[b].col===a.col)return void(this[b]=a);this.push(a)},a.removeInfo=function(a,b){for(var c=0,d=this.length;d>c;c++)if(this[c].row===a&&this[c].col===b){this.splice(c,1);break}},a}function e(a){if(this.mergedCellInfoCollection=new d,Array.isArray(a))for(var b=0,c=a.length;c>b;b++)this.mergedCellInfoCollection.setInfo(a[b])}function f(a,b){var c=this.getSettings().mergeCells;if(c&&!this.selection.isMultiple()){var d=this.mergeCells.mergedCellInfoCollection.getInfo(a[0],a[1]);d&&(a[0]=d.row,a[1]=d.col,a[2]=d.row+d.rowspan-1,a[3]=d.col+d.colspan-1)}}Object.defineProperties(c,{MergeCells:{get:function(){return e}},__esModule:{value:!0}});var g,h,i,j,k=((g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}).registerPlugin,(h=a("./../../3rdparty/walkontable/src/cell/coords.js"),h&&h.__esModule&&h||{"default":h}).WalkontableCellCoords),l=(i=a("./../../3rdparty/walkontable/src/cell/range.js"),i&&i.__esModule&&i||{"default":i}).WalkontableCellRange,m=(j=a("./../../3rdparty/walkontable/src/table.js"),j&&j.__esModule&&j||{"default":j}).WalkontableTable;e.prototype.canMergeRange=function(a){return!a.isSingle()},e.prototype.mergeRange=function(a){if(this.canMergeRange(a)){var b=a.getTopLeftCorner(),c=a.getBottomRightCorner(),d={};d.row=b.row,d.col=b.col,d.rowspan=c.row-b.row+1,d.colspan=c.col-b.col+1,this.mergedCellInfoCollection.setInfo(d)}},e.prototype.mergeOrUnmergeSelection=function(a){var b=this.mergedCellInfoCollection.getInfo(a.from.row,a.from.col);b?this.unmergeSelection(a.from):this.mergeSelection(a)},e.prototype.mergeSelection=function(a){this.mergeRange(a)},e.prototype.unmergeSelection=function(a){var b=this.mergedCellInfoCollection.getInfo(a.row,a.col);this.mergedCellInfoCollection.removeInfo(b.row,b.col)},e.prototype.applySpanProperties=function(a,b,c){var d=this.mergedCellInfoCollection.getInfo(b,c);d?d.row===b&&d.col===c?(a.setAttribute("rowspan",d.rowspan),a.setAttribute("colspan",d.colspan)):(a.removeAttribute("rowspan"),a.removeAttribute("colspan"),a.style.display="none"):(a.removeAttribute("rowspan"),a.removeAttribute("colspan"))},e.prototype.modifyTransform=function(a,b,c){var d=function(a,b){return b.row>=a.row&&b.row<=a.row+a.rowspan-1?!0:!1},e=function(a,b){return b.col>=a.col&&b.col<=a.col+a.colspan-1?!0:!1},f=function(a){return new k(b.to.row+a.row,b.to.col+a.col)},g={row:c.row,col:c.col};if("modifyTransformStart"==a){this.lastDesiredCoords||(this.lastDesiredCoords=new k(null,null));for(var h,i=new k(b.highlight.row,b.highlight.col),j=this.mergedCellInfoCollection.getInfo(i.row,i.col),m=0,n=this.mergedCellInfoCollection.length;n>m;m++){var o=this.mergedCellInfoCollection[m];if(o=new k(o.row+o.rowspan-1,o.col+o.colspan-1),b.includes(o)){h=!0;break}}if(j){var p=new k(j.row,j.col),q=new k(j.row+j.rowspan-1,j.col+j.colspan-1),r=new l(p,p,q);r.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new k(null,null)),g.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-i.row:g.row,g.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-i.col:g.col,c.row>0?g.row=j.row+j.rowspan-1-i.row+c.row:c.row<0&&(g.row=i.row-j.row+c.row),c.col>0?g.col=j.col+j.colspan-1-i.col+c.col:c.col<0&&(g.col=i.col-j.col+c.col)}var s=new k(b.highlight.row+g.row,b.highlight.col+g.col),t=this.mergedCellInfoCollection.getInfo(s.row,s.col);t&&(this.lastDesiredCoords=s,g={row:t.row-i.row,col:t.col-i.col})}else if("modifyTransformEnd"==a)for(var m=0,n=this.mergedCellInfoCollection.length;n>m;m++){var u=this.mergedCellInfoCollection[m],p=new k(u.row,u.col),q=new k(u.row+u.rowspan-1,u.col+u.colspan-1),v=new l(p,p,q),w=b.getBordersSharedWith(v);if(v.isEqual(b))b.setDirection("NW-SE");else if(w.length>0){var x=b.highlight.isEqual(v.from);w.indexOf("top")>-1?b.to.isSouthEastOf(v.from)&&x?b.setDirection("NW-SE"):b.to.isSouthWestOf(v.from)&&x&&b.setDirection("NE-SW"):w.indexOf("bottom")>-1&&(b.to.isNorthEastOf(v.from)&&x?b.setDirection("SW-NE"):b.to.isNorthWestOf(v.from)&&x&&b.setDirection("SE-NW"))}var s=f(g),y=d(u,s),z=e(u,s);b.includesRange(v)&&(v.includes(s)||y||z)&&(y&&(g.row<0?g.row-=u.rowspan-1:g.row>0&&(g.row+=u.rowspan-1)),z&&(g.col<0?g.col-=u.colspan-1:g.col>0&&(g.col+=u.colspan-1)))}0!==g.row&&(c.row=g.row),0!==g.col&&(c.col=g.col)};var n=function(){var a=this,b=a.getSettings().mergeCells;b&&(a.mergeCells||(a.mergeCells=new e(b)))},o=function(){var a=this;a.mergeCells&&(a.view.wt.wtTable.getCell=function(b){if(a.getSettings().mergeCells){var c=a.mergeCells.mergedCellInfoCollection.getInfo(b.row,b.col);c&&(b=c)}return m.prototype.getCell.call(this,b)})},p=function(a){if(this.mergeCells){var b=(a.ctrlKey||a.metaKey)&&!a.altKey;b&&77===a.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),a.stopImmediatePropagation())}},q=function(a){this.getSettings().mergeCells&&(a.items.push(Handsontable.ContextMenu.SEPARATOR),a.items.push({key:"mergeCells",name:function(){var a=this.getSelected(),b=this.mergeCells.mergedCellInfoCollection.getInfo(a[0],a[1]);return b?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return!1}}))},r=function(a,b,c,d,e,f){this.mergeCells&&this.mergeCells.applySpanProperties(a,b,c)},s=function(a){return function(b){var c=this.getSettings().mergeCells;if(c){var d=this.getSelectedRange();if(this.mergeCells.modifyTransform(a,d,b),"modifyTransformEnd"===a){var e=this.countRows(),f=this.countCols();d.from.row<0?d.from.row=0:d.from.row>0&&d.from.row>=e&&(d.from.row=d.from-1),d.from.col<0?d.from.col=0:d.from.col>0&&d.from.col>=f&&(d.from.col=f-1)}}}},t=function(a){this.lastDesiredCoords=null;var b=this.getSettings().mergeCells;if(b){var c=this.getSelectedRange();c.highlight=new k(c.highlight.row,c.highlight.col),c.to=a;var d=!1;do{d=!1;for(var e=0,f=this.mergeCells.mergedCellInfoCollection.length;f>e;e++){var g=this.mergeCells.mergedCellInfoCollection[e],h=new k(g.row,g.col),i=new k(g.row+g.rowspan-1,g.col+g.colspan-1),j=new l(h,h,i);c.expandByRange(j)&&(a.row=c.to.row,a.col=c.to.col,d=!0)}}while(d)}},u=function(a,b){if(b&&"area"==b){var c=this.getSettings().mergeCells;if(c)for(var d=this.getSelectedRange(),e=new l(d.from,d.from,d.from),f=new l(d.to,d.to,d.to),g=0,h=this.mergeCells.mergedCellInfoCollection.length;h>g;g++){var i=this.mergeCells.mergedCellInfoCollection[g],j=new k(i.row,i.col),m=new k(i.row+i.rowspan-1,i.col+i.colspan-1),n=new l(j,j,m);e.expandByRange(n)&&(a[0]=e.from.row,a[1]=e.from.col),f.expandByRange(n)&&(a[2]=f.from.row,a[3]=f.from.col)}}},v=function(a,b,c){var d=this.getSettings().mergeCells;if(d){var e=this.mergeCells.mergedCellInfoCollection.getInfo(a,b);!e||e.row==a&&e.col==b||(c.copyable=!1)}},w=function(a){var b=this.getSettings().mergeCells;if(b)for(var c,d=this.countCols(),e=0;d>e;e++){if(c=this.mergeCells.mergedCellInfoCollection.getInfo(a.startRow,e),c&&c.row<a.startRow)return a.startRow=c.row,w.call(this,a);if(c=this.mergeCells.mergedCellInfoCollection.getInfo(a.endRow,e)){var f=c.row+c.rowspan-1;if(f>a.endRow)return a.endRow=f,w.call(this,a)}}},x=function(a){var b=this.getSettings().mergeCells;if(b)for(var c,d=this.countRows(),e=0;d>e;e++){if(c=this.mergeCells.mergedCellInfoCollection.getInfo(e,a.startColumn),c&&c.col<a.startColumn)return a.startColumn=c.col,x.call(this,a);if(c=this.mergeCells.mergedCellInfoCollection.getInfo(e,a.endColumn)){var f=c.col+c.colspan-1;if(f>a.endColumn)return a.endColumn=f,x.call(this,a)}}},y=function(a){if(a&&this.mergeCells){var b=this.mergeCells.mergedCellInfoCollection,c=this.getSelectedRange();for(var d in b)if(c.highlight.row==b[d].row&&c.highlight.col==b[d].col&&c.to.row==b[d].row+b[d].rowspan-1&&c.to.col==b[d].col+b[d].colspan-1)return!1}return a};Handsontable.hooks.add("beforeInit",n),Handsontable.hooks.add("afterInit",o),Handsontable.hooks.add("beforeKeyDown",p),Handsontable.hooks.add("modifyTransformStart",s("modifyTransformStart")),Handsontable.hooks.add("modifyTransformEnd",s("modifyTransformEnd")),Handsontable.hooks.add("beforeSetRangeEnd",t),Handsontable.hooks.add("beforeDrawBorders",u),Handsontable.hooks.add("afterIsMultipleSelection",y),Handsontable.hooks.add("afterRenderer",r),Handsontable.hooks.add("afterContextMenuDefaultOptions",q),Handsontable.hooks.add("afterGetCellMeta",v),Handsontable.hooks.add("afterViewportRowCalculatorOverride",w),Handsontable.hooks.add("afterViewportColumnCalculatorOverride",x),Handsontable.hooks.add("afterAutofillApplyValues",f),Handsontable.MergeCells=e},{"./../../3rdparty/walkontable/src/cell/coords.js":5,"./../../3rdparty/walkontable/src/cell/range.js":6,"./../../3rdparty/walkontable/src/table.js":20,"./../../plugins.js":45}],65:[function(a,b,c){"use strict";Object.defineProperties(c,{MultipleSelectionHandles:{get:function(){return l}},__esModule:{value:!0}});var d,e,f,g,h=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),i=(e=a("./../_base.js"),e&&e.__esModule&&e||{"default":e})["default"],j=(f=a("./../../eventManager.js"),f&&f.__esModule&&f||{"default":f}).EventManager,k=(g=a("./../../plugins.js"),g&&g.__esModule&&g||{"default":g}).registerPlugin,l=function(a){$traceurRuntime.superConstructor(m).call(this,a),this.dragged=[],this.eventManager=null,this.lastSetCell=null},m=l;$traceurRuntime.createClass(l,{isEnabled:function(){return Handsontable.mobileBrowser},enablePlugin:function(){this.enabled||(this.eventManager||(this.eventManager=new j(this)),this.registerListeners(),$traceurRuntime.superGet(this,m.prototype,"enablePlugin").call(this))},registerListeners:function(){function a(a){if(1===b.dragged.length)return b.dragged.splice(0,b.dragged.length),!0;var c=b.dragged.indexOf(a);return-1==c?!1:void(0===c?b.dragged=b.dragged.slice(0,1):1==c&&(b.dragged=b.dragged.slice(-1)))}var b=this;this.eventManager.addEventListener(this.hot.rootElement,"touchstart",function(a){var c;return h.hasClass(a.target,"topLeftSelectionHandle-HitArea")?(c=b.hot.getSelectedRange(),b.dragged.push("topLeft"),b.touchStartRange={width:c.getWidth(),height:c.getHeight(),direction:c.getDirection()},a.preventDefault(),!1):h.hasClass(a.target,"bottomRightSelectionHandle-HitArea")?(c=b.hot.getSelectedRange(),b.dragged.push("bottomRight"),b.touchStartRange={width:c.getWidth(),height:c.getHeight(),direction:c.getDirection()},a.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchend",function(c){return h.hasClass(c.target,"topLeftSelectionHandle-HitArea")?(a.call(b,"topLeft"),b.touchStartRange=void 0,c.preventDefault(),!1):h.hasClass(c.target,"bottomRightSelectionHandle-HitArea")?(a.call(b,"bottomRight"),b.touchStartRange=void 0,c.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchmove",function(a){var c,d,e,f,g,i,j,k=h.getWindowScrollTop(),l=h.getWindowScrollLeft();0!==b.dragged.length&&(c=document.elementFromPoint(a.touches[0].screenX-l,a.touches[0].screenY-k),c&&c!==b.lastSetCell&&(("TD"==c.nodeName||"TH"==c.nodeName)&&(d=b.hot.getCoords(c),-1==d.col&&(d.col=0),e=b.hot.getSelectedRange(),f=e.getWidth(),g=e.getHeight(),i=e.getDirection(),1==f&&1==g&&b.hot.selection.setRangeEnd(d),j=b.getCurrentRangeCoords(e,d,b.touchStartRange.direction,i,b.dragged[0]),null!==j.start&&b.hot.selection.setRangeStart(j.start),b.hot.selection.setRangeEnd(j.end),b.lastSetCell=c),a.preventDefault()))})},getCurrentRangeCoords:function(a,b,c,d,e){var f=a.getTopLeftCorner(),g=a.getBottomRightCorner(),h=a.getBottomLeftCorner(),i=a.getTopRightCorner(),j={start:null,end:null};switch(c){case"NE-SW":switch(d){case"NE-SW":case"NW-SE":j="topLeft"==e?{start:new WalkontableCellCoords(b.row,a.highlight.col),end:new WalkontableCellCoords(h.row,b.col)}:{start:new WalkontableCellCoords(a.highlight.row,b.col),end:new WalkontableCellCoords(b.row,f.col)};break;case"SE-NW":"bottomRight"==e&&(j={start:new WalkontableCellCoords(g.row,b.col),end:new WalkontableCellCoords(b.row,f.col)})}break;case"NW-SE":switch(d){case"NE-SW":"topLeft"==e?j={start:b,end:h}:j.end=b;break;case"NW-SE":"topLeft"==e?j={start:b,end:g}:j.end=b;break;case"SE-NW":"topLeft"==e?j={start:b,end:f}:j.end=b;break;case"SW-NE":"topLeft"==e?j={start:b,end:i}:j.end=b}break;case"SW-NE":switch(d){case"NW-SE":j="bottomRight"==e?{start:new WalkontableCellCoords(b.row,f.col),end:new WalkontableCellCoords(h.row,b.col)}:{start:new WalkontableCellCoords(f.row,b.col),end:new WalkontableCellCoords(b.row,g.col)};break;case"SW-NE":j="topLeft"==e?{start:new WalkontableCellCoords(a.highlight.row,b.col),end:new WalkontableCellCoords(b.row,g.col)}:{start:new WalkontableCellCoords(b.row,f.col),end:new WalkontableCellCoords(f.row,b.col)};break;case"SE-NW":"bottomRight"==e?j={start:new WalkontableCellCoords(b.row,i.col),end:new WalkontableCellCoords(f.row,b.col)}:"topLeft"==e&&(j={start:h,end:b})}break;case"SE-NW":switch(d){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==e&&(j.end=b);break;case"SE-NW":"topLeft"==e?j.end=b:j={start:b,end:f}}}return j},isDragged:function(){return this.dragged.length>0}},{},i),k("multipleSelectionHandles",l)},{"./../../dom.js":27,"./../../eventManager.js":41,"./../../plugins.js":45,"./../_base.js":46}],66:[function(a,b,c){"use strict";function d(){}function e(){var a=this,b=a.getSettings().observeChanges;b?(a.observer&&h.call(a),f.call(a),j.call(a)):b||h.call(a)}function f(){var a=this;a.observeChangesActive=!0,a.pauseObservingChanges=function(){a.observeChangesActive=!1},a.resumeObservingChanges=function(){a.observeChangesActive=!0},a.observedData=a.getData(),a.observer=o.observe(a.observedData,function(b){a.observeChangesActive&&(g.call(a,b),a.render()),a.runHooks("afterChangesObserved")})}function g(a){function b(a){var b;return b=d(a),b=c(b)}function c(a){var b=[];return a.filter(function(a){var c=e(a.path);if(-1!=["add","remove"].indexOf(a.op)&&!isNaN(c.col)){if(-1!=b.indexOf(c.col))return!1;b.push(c.col)}return!0})}function d(a){return a.filter(function(a){return!/[/]length/gi.test(a.path)})}function e(a){var b=a.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(b[1],10),col:/^\d*$/.test(b[2])?parseInt(b[2],10):b[2]}}for(var f=this,g=b(a),h=0,i=g.length;i>h;h++){var j=g[h],k=e(j.path);switch(j.op){case"add":isNaN(k.col)?f.runHooks("afterCreateRow",k.row):f.runHooks("afterCreateCol",k.col);break;case"remove":isNaN(k.col)?f.runHooks("afterRemoveRow",k.row,1):f.runHooks("afterRemoveCol",k.col,1);break;case"replace":f.runHooks("afterChange",[k.row,k.col,null,j.value],"external")}}}function h(){var a=this;a.observer&&(i.call(a),k.call(a))}function i(){var a=this;o.unobserve(a.observedData,a.observer),delete a.observedData,delete a.observeChangesActive,delete a.pauseObservingChanges,delete a.resumeObservingChanges}function j(){var a=this;a.addHook("afterDestroy",h),a.addHook("afterCreateRow",l),a.addHook("afterRemoveRow",l),a.addHook("afterCreateCol",l),a.addHook("afterRemoveCol",l),a.addHook("afterChange",function(a,b){"loadData"!=b&&l.call(this)})}function k(){var a=this;a.removeHook("afterDestroy",h),a.removeHook("afterCreateRow",l),a.removeHook("afterRemoveRow",l),a.removeHook("afterCreateCol",l),a.removeHook("afterRemoveCol",l),a.removeHook("afterChange",l)}function l(){var a=this;a.pauseObservingChanges(),a.addHookOnce("afterChangesObserved",function(){a.resumeObservingChanges()})}Object.defineProperties(c,{ObserveChanges:{get:function(){return d}},__esModule:{value:!0}});var m,n,o=((m=a("./../../plugins.js"),m&&m.__esModule&&m||{"default":m}).registerPlugin,(n=a("jsonpatch"),n&&n.__esModule&&n||{"default":n})["default"]);Handsontable.hooks.add("afterLoadData",e),Handsontable.hooks.add("afterUpdateSettings",e),Handsontable.hooks.register("afterChangesObserved")},{"./../../plugins.js":45,jsonpatch:"jsonpatch"}],67:[function(a,b,c){"use strict";function d(a){var b,c=function(){window.localStorage[a+"__persistentStateKeys"]=JSON.stringify(b)},d=function(){var c=window.localStorage[a+"__persistentStateKeys"],d="string"==typeof c?JSON.parse(c):void 0;b=d?d:[]},e=function(){b=[],c()};d(),this.saveValue=function(d,e){window.localStorage[a+"_"+d]=JSON.stringify(e),-1==b.indexOf(d)&&(b.push(d),c())},this.loadValue=function(b,c){b="undefined"!=typeof b?b:c;var d=window.localStorage[a+"_"+b];return"undefined"==typeof d?void 0:JSON.parse(d)},this.reset=function(b){window.localStorage.removeItem(a+"_"+b)},this.resetAll=function(){for(var c=0;c<b.length;c++)window.localStorage.removeItem(a+"_"+b[c]);e()}}function e(){function a(){var a=this;for(var b in e)e.hasOwnProperty(b)&&a.addHook(b,e[b])}function b(){var a=this;for(var b in e)e.hasOwnProperty(b)&&a.removeHook(b,e[b])}var c=this;this.init=function(){var e=this,f=e.getSettings().persistentState;return c.enabled=!!f,c.enabled?(e.storage||(e.storage=new d(e.rootElement.id)),e.resetState=c.resetValue,void a.call(e)):void b.call(e)},this.saveValue=function(a,b){var c=this;c.storage.saveValue(a,b)},this.loadValue=function(a,b){var c=this;b.value=c.storage.loadValue(a)},this.resetValue=function(a){var b=this;"undefined"!=typeof a?b.storage.reset(a):b.storage.resetAll()};var e={persistentStateSave:c.saveValue,persistentStateLoad:c.loadValue,persistentStateReset:c.resetValue};for(var f in e)e.hasOwnProperty(f)&&Handsontable.hooks.register(f)}Object.defineProperties(c,{HandsontablePersistentState:{get:function(){return e}},__esModule:{value:!0}});var f,g=((f=a("./../../plugins.js"),f&&f.__esModule&&f||{"default":f}).registerPlugin,new e);Handsontable.hooks.add("beforeInit",g.init),Handsontable.hooks.add("afterUpdateSettings",g.init)},{"./../../plugins.js":45}],68:[function(a,b,c){"use strict";function d(){var a=this,b=!!a.getSettings().search;b?a.search=new Handsontable.Search(a):delete a.search}var e,f,g=(e=a("./../../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../../renderers.js"),f&&f.__esModule&&f||{"default":f}),i=h.registerRenderer,j=h.getRenderer;Handsontable.Search=function(a){this.query=function(b,c,d){var e=a.countRows(),f=a.countCols(),g=[];c||(c=Handsontable.Search.global.getDefaultCallback()),d||(d=Handsontable.Search.global.getDefaultQueryMethod());for(var h=0;e>h;h++)for(var i=0;f>i;i++){var j=a.getDataAtCell(h,i),k=a.getCellMeta(h,i),l=k.search.callback||c,m=k.search.queryMethod||d,n=m(b,j);if(n){var o={row:h,col:i,data:j};g.push(o)}l&&l(a,h,i,j,n)}return g}},Handsontable.Search.DEFAULT_CALLBACK=function(a,b,c,d,e){a.getCellMeta(b,c).isSearchResult=e},Handsontable.Search.DEFAULT_QUERY_METHOD=function(a,b){return"undefined"!=typeof a&&null!=a&&a.toLowerCase&&0!==a.length?"undefined"==typeof b||null==b?!1:-1!=b.toString().toLowerCase().indexOf(a.toLowerCase()):!1},Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",Handsontable.Search.global=function(){var a=Handsontable.Search.DEFAULT_CALLBACK,b=Handsontable.Search.DEFAULT_QUERY_METHOD,c=Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return a},setDefaultCallback:function(b){a=b},getDefaultQueryMethod:function(){return b},setDefaultQueryMethod:function(a){b=a},getDefaultSearchResultClass:function(){return c},setDefaultSearchResultClass:function(a){c=a}}}(),Handsontable.SearchCellDecorator=function(a,b,c,d,e,f,h){var i=null!==h.search&&"object"==typeof h.search&&h.search.searchResultClass||Handsontable.Search.global.getDefaultSearchResultClass();h.isSearchResult?g.addClass(b,i):g.removeClass(b,i)};var k=j("base");i("base",function(a,b,c,d,e,f,g){k.apply(this,arguments),Handsontable.SearchCellDecorator.apply(this,arguments)}),Handsontable.hooks.add("afterInit",d),Handsontable.hooks.add("afterUpdateSettings",d)},{"./../../dom.js":27,"./../../renderers.js":71}],69:[function(a,b,c){"use strict";Object.defineProperties(c,{TouchScroll:{get:function(){return j}},__esModule:{value:!0}});var d,e,f,g=(d=a("./../../dom.js"),d&&d.__esModule&&d||{"default":d}),h=(e=a("./../_base.js"),e&&e.__esModule&&e||{"default":e})["default"],i=(f=a("./../../plugins.js"),f&&f.__esModule&&f||{"default":f}).registerPlugin,j=function(a){var b=this;$traceurRuntime.superConstructor(k).call(this,a),this.hot.addHook("afterInit",function(){return b.init()}),this.hot.addHook("afterUpdateSettings",function(){return b.onAfterUpdateSettings()}),this.scrollbars=[],this.clones=[]},k=j;$traceurRuntime.createClass(j,{init:function(){this.registerEvents(),this.onAfterUpdateSettings()},onAfterUpdateSettings:function(){var a=this;this.hot.addHookOnce("afterRender",function(){var b=a.hot.view.wt.wtOverlays;a.scrollbars=[],a.scrollbars.push(b.topOverlay),a.scrollbars.push(b.leftOverlay),b.topLeftCornerOverlay&&a.scrollbars.push(b.topLeftCornerOverlay),a.clones=[],b.topOverlay.needFullRender&&a.clones.push(b.topOverlay.clone.wtTable.holder.parentNode),b.leftOverlay.needFullRender&&a.clones.push(b.leftOverlay.clone.wtTable.holder.parentNode),b.topLeftCornerOverlay&&a.clones.push(b.topLeftCornerOverlay.clone.wtTable.holder.parentNode)})},registerEvents:function(){var a=this;this.hot.addHook("beforeTouchScroll",function(){return a.onBeforeTouchScroll()}),this.hot.addHook("afterMomentumScroll",function(){return a.onAfterMomentumScroll()})},onBeforeTouchScroll:function(){Handsontable.freezeOverlays=!0;for(var a=0,b=this.clones.length;b>a;a++)g.addClass(this.clones[a],"hide-tween")},onAfterMomentumScroll:function(){Handsontable.freezeOverlays=!1;for(var a=this,b=0,c=this.clones.length;c>b;b++)g.removeClass(this.clones[b],"hide-tween");for(var d=0,e=this.clones.length;e>d;d++)g.addClass(this.clones[d],"show-tween");setTimeout(function(){for(var b=0,c=a.clones.length;c>b;b++)g.removeClass(a.clones[b],"show-tween")},400);for(var f=0,h=this.scrollbars.length;h>f;f++)this.scrollbars[f].refresh(),this.scrollbars[f].resetFixedPosition();this.hot.view.wt.wtOverlays.syncScrollWithMaster()}},{},h),i("touchScroll",j)},{"./../../dom.js":27,"./../../plugins.js":45,"./../_base.js":46}],70:[function(a,b,c){"use strict";function d(){var a=this,b="undefined"==typeof a.getSettings().undo||a.getSettings().undo;b?a.undoRedo||(a.undoRedo=new Handsontable.UndoRedo(a),g(a),a.addHook("beforeKeyDown",e),a.addHook("afterChange",f)):a.undoRedo&&(delete a.undoRedo,h(a),a.removeHook("beforeKeyDown",e),a.removeHook("afterChange",f))}function e(a){var b=this,c=(a.ctrlKey||a.metaKey)&&!a.altKey;c&&(89===a.keyCode||a.shiftKey&&90===a.keyCode?(b.undoRedo.redo(),a.stopImmediatePropagation()):90===a.keyCode&&(b.undoRedo.undo(),a.stopImmediatePropagation()))}function f(a,b){var c=this;return"loadData"==b?c.undoRedo.clear():void 0}function g(a){a.undo=function(){return a.undoRedo.undo()},a.redo=function(){return a.undoRedo.redo()},a.isUndoAvailable=function(){return a.undoRedo.isUndoAvailable()},a.isRedoAvailable=function(){return a.undoRedo.isRedoAvailable()},a.clearUndo=function(){return a.undoRedo.clear()}}function h(a){delete a.undo,delete a.redo,delete a.isUndoAvailable,delete a.isRedoAvailable,delete a.clearUndo}var i,j=(i=a("./../../helpers.js"),i&&i.__esModule&&i||{"default":i});Handsontable.UndoRedo=function(a){var b=this;this.instance=a,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,a.addHook("afterChange",function(a,c){if(a){var d=new Handsontable.UndoRedo.ChangeAction(a);b.done(d)}}),a.addHook("afterCreateRow",function(a,c,d){if(!d){var e=new Handsontable.UndoRedo.CreateRowAction(a,c);b.done(e)}}),a.addHook("beforeRemoveRow",function(a,c){var d=b.instance.getData();a=(d.length+a)%d.length;var e=d.slice(a,a+c),f=new Handsontable.UndoRedo.RemoveRowAction(a,e);b.done(f)}),a.addHook("afterCreateCol",function(a,c,d){if(!d){var e=new Handsontable.UndoRedo.CreateColumnAction(a,c);b.done(e)}}),a.addHook("beforeRemoveCol",function(c,d){var e=b.instance.getData();c=(b.instance.countCols()+c)%b.instance.countCols();for(var f=[],g=0,h=e.length;h>g;g++)f[g]=e[g].slice(c,c+d);var i;Array.isArray(a.getSettings().colHeaders)&&(i=a.getSettings().colHeaders.slice(c,c+f.length));var j=new Handsontable.UndoRedo.RemoveColumnAction(c,f,i);b.done(j)}),a.addHook("beforeCellAlignment",function(a,c,d,e){var f=new Handsontable.UndoRedo.CellAlignmentAction(a,c,d,e);b.done(f)})},Handsontable.UndoRedo.prototype.done=function(a){this.ignoreNewActions||(this.doneActions.push(a),this.undoneActions.length=0)},Handsontable.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var a=this.doneActions.pop();this.ignoreNewActions=!0;var b=this;a.undo(this.instance,function(){b.ignoreNewActions=!1,b.undoneActions.push(a)})}},Handsontable.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var a=this.undoneActions.pop();this.ignoreNewActions=!0;var b=this;a.redo(this.instance,function(){b.ignoreNewActions=!1,b.doneActions.push(a)})}},Handsontable.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},Handsontable.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},Handsontable.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},Handsontable.UndoRedo.Action=function(){},Handsontable.UndoRedo.Action.prototype.undo=function(){},Handsontable.UndoRedo.Action.prototype.redo=function(){},Handsontable.UndoRedo.ChangeAction=function(a){this.changes=a},j.inherit(Handsontable.UndoRedo.ChangeAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.ChangeAction.prototype.undo=function(a,b){for(var c=j.deepClone(this.changes),d=a.countEmptyRows(!0),e=a.countEmptyCols(!0),f=0,g=c.length;g>f;f++)c[f].splice(3,1);a.addHookOnce("afterChange",b),a.setDataAtRowProp(c,null,null,"undo");for(var f=0,g=c.length;g>f;f++)a.getSettings().minSpareRows&&c[f][0]+1+a.getSettings().minSpareRows===a.countRows()&&d==a.getSettings().minSpareRows&&(a.alter("remove_row",parseInt(c[f][0]+1,10),a.getSettings().minSpareRows),a.undoRedo.doneActions.pop()),a.getSettings().minSpareCols&&c[f][1]+1+a.getSettings().minSpareCols===a.countCols()&&e==a.getSettings().minSpareCols&&(a.alter("remove_col",parseInt(c[f][1]+1,10),a.getSettings().minSpareCols),a.undoRedo.doneActions.pop())},Handsontable.UndoRedo.ChangeAction.prototype.redo=function(a,b){for(var c=j.deepClone(this.changes),d=0,e=c.length;e>d;d++)c[d].splice(2,1);a.addHookOnce("afterChange",b),a.setDataAtRowProp(c,null,null,"redo")},Handsontable.UndoRedo.CreateRowAction=function(a,b){this.index=a,this.amount=b},j.inherit(Handsontable.UndoRedo.CreateRowAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.CreateRowAction.prototype.undo=function(a,b){var c=a.countRows(),d=a.getSettings().minSpareRows;this.index>=c&&this.index-d<c&&(this.index-=d),a.addHookOnce("afterRemoveRow",b),a.alter("remove_row",this.index,this.amount)},Handsontable.UndoRedo.CreateRowAction.prototype.redo=function(a,b){a.addHookOnce("afterCreateRow",b),a.alter("insert_row",this.index+1,this.amount)},Handsontable.UndoRedo.RemoveRowAction=function(a,b){this.index=a,this.data=b},j.inherit(Handsontable.UndoRedo.RemoveRowAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.RemoveRowAction.prototype.undo=function(a,b){var c=[this.index,0];Array.prototype.push.apply(c,this.data),Array.prototype.splice.apply(a.getData(),c),a.addHookOnce("afterRender",b),a.render()},Handsontable.UndoRedo.RemoveRowAction.prototype.redo=function(a,b){a.addHookOnce("afterRemoveRow",b),a.alter("remove_row",this.index,this.data.length)},Handsontable.UndoRedo.CreateColumnAction=function(a,b){this.index=a,this.amount=b},j.inherit(Handsontable.UndoRedo.CreateColumnAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.CreateColumnAction.prototype.undo=function(a,b){a.addHookOnce("afterRemoveCol",b),a.alter("remove_col",this.index,this.amount)},Handsontable.UndoRedo.CreateColumnAction.prototype.redo=function(a,b){a.addHookOnce("afterCreateCol",b),a.alter("insert_col",this.index+1,this.amount)},Handsontable.UndoRedo.CellAlignmentAction=function(a,b,c,d){this.stateBefore=a,this.range=b,this.type=c,this.alignment=d},Handsontable.UndoRedo.CellAlignmentAction.prototype.undo=function(a,b){if(a.contextMenu){for(var c=this.range.from.row;c<=this.range.to.row;c++)for(var d=this.range.from.col;d<=this.range.to.col;d++)a.setCellMeta(c,d,"className",this.stateBefore[c][d]||" htLeft");a.addHookOnce("afterRender",b),a.render()}},Handsontable.UndoRedo.CellAlignmentAction.prototype.redo=function(a,b){if(a.contextMenu){for(var c=this.range.from.row;c<=this.range.to.row;c++)for(var d=this.range.from.col;d<=this.range.to.col;d++)a.contextMenu.align.call(a,this.range,this.type,this.alignment);a.addHookOnce("afterRender",b),a.render()}},Handsontable.UndoRedo.RemoveColumnAction=function(a,b,c){this.index=a,this.data=b,this.amount=this.data[0].length,this.headers=c},j.inherit(Handsontable.UndoRedo.RemoveColumnAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.RemoveColumnAction.prototype.undo=function(a,b){
for(var c,d,e=0,f=a.getData().length;f>e;e++)c=a.getSourceDataAtRow(e),d=[this.index,0],Array.prototype.push.apply(d,this.data[e]),Array.prototype.splice.apply(c,d);"undefined"!=typeof this.headers&&(d=[this.index,0],Array.prototype.push.apply(d,this.headers),Array.prototype.splice.apply(a.getSettings().colHeaders,d)),a.addHookOnce("afterRender",b),a.render()},Handsontable.UndoRedo.RemoveColumnAction.prototype.redo=function(a,b){a.addHookOnce("afterRemoveCol",b),a.alter("remove_col",this.index,this.amount)},Handsontable.hooks.add("afterInit",d),Handsontable.hooks.add("afterUpdateSettings",d)},{"./../../helpers.js":42}],71:[function(a,b,c){"use strict";function d(a,b){var c;i[a]=b,c=h.toUpperCaseFirst(a)+"Renderer",Handsontable.renderers[c]=b,Handsontable[c]=b}function e(a){if("function"==typeof a)return a;if("string"!=typeof a)throw Error('Only strings and functions can be passed as "renderer" parameter');if(!(a in i))throw Error('No editor registered under name "'+a+'"');return i[a]}function f(a){return a in i}Object.defineProperties(c,{registerRenderer:{get:function(){return d}},getRenderer:{get:function(){return e}},hasRenderer:{get:function(){return f}},__esModule:{value:!0}});var g,h=(g=a("./helpers.js"),g&&g.__esModule&&g||{"default":g}),i={};Handsontable.renderers=Handsontable.renderers||{},Handsontable.renderers.registerRenderer=d,Handsontable.renderers.getRenderer=e},{"./helpers.js":42}],72:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,h){h.className&&(b.className?b.className=b.className+" "+h.className:b.className=h.className),h.readOnly&&g.addClass(b,h.readOnlyCellClassName),h.valid===!1&&h.invalidCellClassName?g.addClass(b,h.invalidCellClassName):g.removeClass(b,h.invalidCellClassName),h.wordWrap===!1&&h.noWordWrapClassName&&g.addClass(b,h.noWordWrapClassName),!f&&h.placeholder&&g.addClass(b,h.placeholderCellClassName)}Object.defineProperties(c,{cellDecorator:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../renderers.js"),f&&f.__esModule&&f||{"default":f}).registerRenderer;h("base",d),Handsontable.renderers.cellDecorator=d},{"./../dom.js":27,"./../renderers.js":71}],73:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){var h=(o.cloneNode(!0),p.cloneNode(!0));if(l("text")(a,b,c,d,e,f,g),b.appendChild(h),i.addClass(b,"htAutocomplete"),b.firstChild||b.appendChild(document.createTextNode(String.fromCharCode(160))),!a.acArrowListener){var k=j(a);a.acArrowListener=function(e){i.hasClass(e.target,"htAutocompleteArrow")&&a.view.wt.getSetting("onCellDblClick",null,new n(c,d),b)},k.addEventListener(a.rootElement,"mousedown",a.acArrowListener),a.addHookOnce("afterDestroy",function(){k.destroy()})}}Object.defineProperties(c,{autocompleteRenderer:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../eventManager.js"),f&&f.__esModule&&f||{"default":f}).eventManager,k=(g=a("./../renderers.js"),g&&g.__esModule&&g||{"default":g}),l=k.getRenderer,m=k.registerRenderer,n=(h=a("./../3rdparty/walkontable/src/cell/coords.js"),h&&h.__esModule&&h||{"default":h}).WalkontableCellCoords,o=document.createElement("DIV");o.className="htAutocompleteWrapper";var p=document.createElement("DIV");p.className="htAutocompleteArrow",p.appendChild(document.createTextNode(String.fromCharCode(9660)));m("autocomplete",d)},{"./../3rdparty/walkontable/src/cell/coords.js":5,"./../dom.js":27,"./../eventManager.js":41,"./../renderers.js":71}],74:[function(a,b,c){"use strict";function d(a,b,c,d,h,i,j){function k(a){var b=[m.keyCode.SPACE,m.keyCode.ENTER,m.keyCode.DELETE,m.keyCode.BACKSPACE];l.enableImmediatePropagation(a),-1===b.indexOf(a.keyCode)||a.isImmediatePropagationStopped()||s(function(){a.stopImmediatePropagation(),a.preventDefault()}),(a.keyCode==m.keyCode.SPACE||a.keyCode==m.keyCode.ENTER)&&o(),(a.keyCode==m.keyCode.DELETE||a.keyCode==m.keyCode.BACKSPACE)&&o(!1)}function o(){var a=void 0!==arguments[0]?arguments[0]:null;s(function(b){for(var c=0,d=b.length;d>c;c++){if(l.hasClass(b[c],r)&&null===a)return;p(b[c],a)}})}function p(a){var b=void 0!==arguments[1]?arguments[1]:null;null===b?a.checked=!a.checked:a.checked=b,t.fireEvent(a,"change")}function s(b){for(var c=a.getSelectedRange(),d=c.getTopLeftCorner(),e=c.getBottomRightCorner(),f=d.row;f<=e.row;f++)for(var g=d.col;g<=e.col;g++){var h=a.getCell(f,g),i=a.getCellMeta(f,g),j=h.querySelectorAll("input[type=checkbox]");j.length>0&&!i.readOnly&&b(j)}}var t=new n(a),u=e();"undefined"==typeof j.checkedTemplate&&(j.checkedTemplate=!0),"undefined"==typeof j.uncheckedTemplate&&(j.uncheckedTemplate=!1),l.empty(b),i===j.checkedTemplate||m.equalsIgnoreCase(i,j.checkedTemplate)?(u.checked=!0,b.appendChild(u)):i===j.uncheckedTemplate||m.equalsIgnoreCase(i,j.uncheckedTemplate)?b.appendChild(u):null===i?(l.addClass(u,"noValue"),b.appendChild(u)):(u.style.display="none",l.addClass(u,r),b.appendChild(u),b.appendChild(document.createTextNode("#bad-value#"))),j.readOnly?t.addEventListener(u,"click",f):(t.addEventListener(u,"mousedown",g),t.addEventListener(u,"mouseup",g),t.addEventListener(u,"change",function(b){a.setDataAtRowProp(c,h,b.target.checked?j.checkedTemplate:j.uncheckedTemplate)})),q.has(a)||(q.set(a,!0),a.addHook("beforeKeyDown",k))}function e(){var a=document.createElement("INPUT");return a.className="htCheckboxRendererInput",a.type="checkbox",a.setAttribute("autocomplete","off"),a.cloneNode(!1)}function f(a){a.preventDefault()}function g(a){m.stopPropagation(a)}Object.defineProperties(c,{checkboxRenderer:{get:function(){return d}},__esModule:{value:!0}});var h,i,j,k,l=(h=a("./../dom.js"),h&&h.__esModule&&h||{"default":h}),m=(i=a("./../helpers.js"),i&&i.__esModule&&i||{"default":i}),n=(j=a("./../eventManager.js"),j&&j.__esModule&&j||{"default":j}).EventManager,o=(k=a("./../renderers.js"),k&&k.__esModule&&k||{"default":k}),p=(o.getRenderer,o.registerRenderer),q=new WeakMap,r="htBadValue";p("checkbox",d)},{"./../dom.js":27,"./../eventManager.js":41,"./../helpers.js":42,"./../renderers.js":71}],75:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,h){i("base").apply(this,arguments),g.fastInnerHTML(b,f)}Object.defineProperties(c,{htmlRenderer:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../renderers.js"),f&&f.__esModule&&f||{"default":f}),i=h.getRenderer,j=h.registerRenderer;j("html",d)},{"./../dom.js":27,"./../renderers.js":71}],76:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){j.isNumeric(f)&&("undefined"!=typeof g.language&&k.language(g.language),f=k(f).format(g.format||"0"),i.addClass(b,"htNumeric")),m("text")(a,b,c,d,e,f,g)}Object.defineProperties(c,{numericRenderer:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),j=(f=a("./../helpers.js"),f&&f.__esModule&&f||{"default":f}),k=(g=a("numeral"),g&&g.__esModule&&g||{"default":g})["default"],l=(h=a("./../renderers.js"),h&&h.__esModule&&h||{"default":h}),m=l.getRenderer,n=l.registerRenderer;n("numeric",d)},{"./../dom.js":27,"./../helpers.js":42,"./../renderers.js":71,numeral:"numeral"}],77:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,h){i("text").apply(this,arguments),f=b.innerHTML;var j,k=h.hashLength||f.length,l=h.hashSymbol||"*";for(j="";j.split(l).length-1<k;j+=l);g.fastInnerHTML(b,j)}Object.defineProperties(c,{passwordRenderer:{get:function(){return d}},__esModule:{value:!0}});var e,f,g=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(f=a("./../renderers.js"),f&&f.__esModule&&f||{"default":f}),i=h.getRenderer,j=h.registerRenderer;j("password",d)},{"./../dom.js":27,"./../renderers.js":71}],78:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){k("base").apply(this,arguments),!f&&g.placeholder&&(f=g.placeholder);var j=i.stringify(f);if(a.getSettings().trimWhitespace||(j=j.replace(/ /g,String.fromCharCode(160))),g.rendererTemplate){h.empty(b);var l=document.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=g.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=a.getSourceDataAtRow(c),b.appendChild(l)}else h.fastInnerText(b,j)}Object.defineProperties(c,{textRenderer:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),i=(f=a("./../helpers.js"),f&&f.__esModule&&f||{"default":f}),j=(g=a("./../renderers.js"),g&&g.__esModule&&g||{"default":g}),k=j.getRenderer,l=j.registerRenderer;l("text",d)},{"./../dom.js":27,"./../helpers.js":42,"./../renderers.js":71}],79:[function(a,b,c){"use strict";!function(a){function b(a){return{configurable:!0,enumerable:!1,value:a,writable:!0}}function c(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++S+"$__"}function d(a){return X[a]}function e(){var a=c();return X[a]=!0,a}function f(a){return"object"==typeof a&&a instanceof i}function g(a){return f(a)?"symbol":typeof a}function h(a){var b=new i(a);if(!(this instanceof h))return b;throw new TypeError("Symbol cannot be new'ed")}function i(a){var b=c();I(this,V,{value:this}),I(this,T,{value:b}),I(this,U,{value:a}),k(this),W[b]=this}function j(a){var b=a[Y];return b&&b.self===a?b:Q(a)?($.hash.value=_++,$.self.value=a,Z.value=G(null,$),I(a,Y,Z),Z.value):void 0}function k(a){return j(a),J.apply(this,arguments)}function l(a){return j(a),O.apply(this,arguments)}function m(a){return j(a),P.apply(this,arguments)}function n(a){return W[a]||X[a]}function o(a){return f(a)?a[T]:a}function p(a){for(var b=[],c=0;c<a.length;c++)n(a[c])||b.push(a[c]);return b}function q(a){return p(L(a))}function r(a){return p(M(a))}function s(a){for(var b=[],c=L(a),d=0;d<c.length;d++){var e=W[c[d]];e&&b.push(e)}return b}function t(a,b){return K(a,o(b))}function u(a){return N.call(this,o(a))}function v(b){return a.traceur&&a.traceur.options[b]}function w(a,b,c){return f(b)&&(b=b[T]),I(a,b,c),a}function x(a){I(a,"defineProperty",{value:w}),I(a,"getOwnPropertyNames",{value:q}),I(a,"getOwnPropertyDescriptor",{value:t}),I(a.prototype,"hasOwnProperty",{value:u}),I(a,"freeze",{value:k}),I(a,"preventExtensions",{value:l}),I(a,"seal",{value:m}),I(a,"keys",{value:r})}function y(a){for(var b=1;b<arguments.length;b++)for(var c=L(arguments[b]),d=0;d<c.length;d++){var e=c[d];n(e)||!function(b,c){I(a,c,{get:function(){return b[c]},enumerable:!0})}(arguments[b],c[d])}return a}function z(a){return null!=a&&("object"==typeof a||"function"==typeof a)}function A(a){if(null==a)throw F();return E(a)}function B(a){if(null==a)throw new TypeError("Value cannot be converted to an Object");return a}function C(a,b){a.Symbol||(a.Symbol=b,Object.getOwnPropertySymbols=s),a.Symbol.iterator||(a.Symbol.iterator=b("Symbol.iterator"))}function D(a){C(a,h),a.Reflect=a.Reflect||{},a.Reflect.global=a.Reflect.global||a,x(a.Object)}if(!a.$traceurRuntime){var E=Object,F=TypeError,G=E.create,H=E.defineProperties,I=E.defineProperty,J=E.freeze,K=E.getOwnPropertyDescriptor,L=E.getOwnPropertyNames,M=E.keys,N=E.prototype.hasOwnProperty,O=(E.prototype.toString,Object.preventExtensions),P=Object.seal,Q=Object.isExtensible,R=b,S=0,T=c(),U=c(),V=c(),W=G(null),X=G(null);I(h.prototype,"constructor",b(h)),I(h.prototype,"toString",R(function(){var a=this[V];if(!v("symbols"))return a[T];if(!a)throw TypeError("Conversion from symbol to string");var b=a[U];return void 0===b&&(b=""),"Symbol("+b+")"})),I(h.prototype,"valueOf",R(function(){var a=this[V];if(!a)throw TypeError("Conversion from symbol to string");return v("symbols")?a:a[T]})),I(i.prototype,"constructor",b(h)),I(i.prototype,"toString",{value:h.prototype.toString,enumerable:!1}),I(i.prototype,"valueOf",{value:h.prototype.valueOf,enumerable:!1});var Y=e(),Z={value:void 0},$={hash:{value:void 0},self:{value:void 0}},_=0;k(i.prototype),D(a),a.$traceurRuntime={checkObjectCoercible:B,createPrivateName:e,defineProperties:H,defineProperty:I,exportStar:y,getOwnHashObject:j,getOwnPropertyDescriptor:K,getOwnPropertyNames:L,isObject:z,isPrivateName:d,isSymbolString:n,keys:M,setupGlobals:D,toObject:A,toProperty:o,"typeof":g}}}(window),function(){function b(b,d){function e(a){return"/"===a.slice(-1)}function f(a){return"/"===a[0]}function g(a){return"."===a[0]}return c=c||"undefined"!=typeof a&&a("path"),e(d)||f(d)?void 0:a(g(d)?c.resolve(c.dirname(b),d):d)}var c;$traceurRuntime.require=b}(),function(){function a(){for(var a,b=[],c=0,d=0;d<arguments.length;d++){var e=$traceurRuntime.checkObjectCoercible(arguments[d]);if("function"!=typeof e[$traceurRuntime.toProperty(Symbol.iterator)])throw new TypeError("Cannot spread non-iterable object.");for(var f=e[$traceurRuntime.toProperty(Symbol.iterator)]();!(a=f.next()).done;)b[c++]=a.value}return b}$traceurRuntime.spread=a}(),function(){function a(a,b){var c=p(a);do{var d=o(c,b);if(d)return d;c=p(c)}while(c);return void 0}function b(a){return a.__proto__}function c(a,b,c,e){return d(a,b,c).apply(a,e)}function d(b,c,d){var e=a(c,d);return e?e.get?e.get.call(b):e.value:void 0}function e(b,c,d,e){var f=a(c,d);if(f&&f.set)return f.set.call(b,e),e;throw k("super has no setter '"+d+"'.")}function f(a){for(var b={},c=r(a),d=0;d<c.length;d++){var e=c[d];b[e]=o(a,e)}for(var f=s(a),d=0;d<f.length;d++){var g=f[d];b[$traceurRuntime.toProperty(g)]=o(a,$traceurRuntime.toProperty(g))}return b}function g(a,b,c,d){return n(b,"constructor",{value:a,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof d&&(a.__proto__=d),a.prototype=l(h(d),f(b))):a.prototype=b,n(a,"prototype",{configurable:!1,writable:!1}),m(a,f(c))}function h(a){if("function"==typeof a){var b=a.prototype;if(j(b)===b||null===b)return a.prototype;throw new k("super prototype must be an Object or null")}if(null===a)return null;throw new k("Super expression must either be null or a function, not "+typeof a+".")}function i(a,b,d){null!==p(b)&&c(a,b,"constructor",d)}var j=Object,k=TypeError,l=j.create,m=$traceurRuntime.defineProperties,n=$traceurRuntime.defineProperty,o=$traceurRuntime.getOwnPropertyDescriptor,p=($traceurRuntime.getOwnPropertyNames,Object.getPrototypeOf),q=Object,r=q.getOwnPropertyNames,s=q.getOwnPropertySymbols;$traceurRuntime.createClass=g,$traceurRuntime.defaultSuperCall=i,$traceurRuntime.superCall=c,$traceurRuntime.superConstructor=b,$traceurRuntime.superGet=d,$traceurRuntime.superSet=e}()},{path:void 0}],80:[function(a,b,c){"use strict";function d(a){var b=this;this.eventManager=m(a),this.instance=a,this.settings=a.getSettings();var c=a.rootElement.getAttribute("style");c&&a.rootElement.setAttribute("data-originalstyle",c),k.addClass(a.rootElement,"handsontable");var d=document.createElement("TABLE");d.className="htCore",this.THEAD=document.createElement("THEAD"),d.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),d.appendChild(this.TBODY),a.table=d,a.container.insertBefore(d,a.container.firstChild),this.eventManager.addEventListener(a.rootElement,"mousedown",function(a){b.isTextSelectionAllowed(a.target)||(f(),a.preventDefault(),window.focus())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(b){a.selection.isInProgress()&&!b.shiftKey&&a.selection.finish()});var e;this.isMouseDown=function(){return e},this.eventManager.addEventListener(document.documentElement,"mouseup",function(b){a.selection.isInProgress()&&1===b.which&&a.selection.finish(),e=!1,l.isOutsideInput(document.activeElement)&&a.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(c){var d=c.target,f=c.x||c.clientX,g=c.y||c.clientY;if(!e&&a.rootElement){if(d!==a.view.wt.wtTable.holder)for(;d!==document.documentElement;){if(null===d){if(c.isTargetWebComponent)break;return}if(d===a.rootElement)return;d=d.parentNode}else{var h=Handsontable.Dom.getScrollbarWidth();if(document.elementFromPoint(f+h,g)!==a.view.wt.wtTable.holder||document.elementFromPoint(f,g+h)!==a.view.wt.wtTable.holder)return}b.settings.outsideClickDeselects?a.deselectCell():a.destroyEditor()}}),this.eventManager.addEventListener(d,"selectstart",function(a){b.settings.fragmentSelection||a.preventDefault()});var f=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},g=[new o({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return b.settings.fillHandle&&!b.isCellEdited()&&!a.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!b.isCellEdited()&&!a.selection.isMultiple()}}}),new o({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return b.settings.fillHandle&&!b.isCellEdited()&&a.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!b.isCellEdited()&&a.selection.isMultiple()}}}),new o({className:"highlight",highlightRowClassName:b.settings.currentRowClassName,highlightColumnClassName:b.settings.currentColClassName}),new o({className:"fill",border:{width:1,color:"red"}})];g.current=g[0],g.area=g[1],g.highlight=g[2],g.fill=g[3];var h={debug:function(){return b.settings.debug},externalRowCalculator:this.instance.getPlugin("autoRowSize")&&this.instance.getPlugin("autoRowSize").isEnabled(),table:d,stretchH:this.settings.stretchH,data:a.getDataAtCell,totalRows:a.countRows,totalColumns:a.countCols,fixedColumnsLeft:function(){return b.settings.fixedColumnsLeft},fixedRowsTop:function(){return b.settings.fixedRowsTop},renderAllRows:b.settings.renderAllRows,rowHeaders:function(){var c=[];return a.hasRowHeaders()&&c.push(function(a,c){b.appendRowHeader(a,c)}),Handsontable.hooks.run(a,"afterGetRowHeaderRenderers",c),c},columnHeaders:function(){var c=[];return a.hasColHeaders()&&c.push(function(a,c){b.appendColHeader(a,c)}),Handsontable.hooks.run(a,"afterGetColumnHeaderRenderers",c),c},columnWidth:a.getColWidth,rowHeight:a.getRowHeight,cellRenderer:function(a,c,d){var e=b.instance.colToProp(c),f=b.instance.getCellMeta(a,c),g=b.instance.getCellRenderer(f),h=b.instance.getDataAtRowProp(a,e);g(b.instance,d,a,c,e,h,f),Handsontable.hooks.run(b.instance,"afterRenderer",d,a,c,e,h,f)},selections:g,hideBorderOnMouseDownOver:function(){return b.settings.fragmentSelection},onCellMouseDown:function(c,d,f,g){a.listen(),b.activeWt=g,e=!0,k.enableImmediatePropagation(c),Handsontable.hooks.run(a,"beforeOnCellMouseDown",c,d,f),c.isImmediatePropagationStopped()||(2===c.button&&a.selection.inInSelection(d)||(c.shiftKey?d.row>=0&&d.col>=0&&a.selection.setRangeEnd(d):(d.row<0||d.col<0)&&(d.row>=0||d.col>=0)?(d.row<0&&(a.selectCell(0,d.col,a.countRows()-1,d.col),a.selection.setSelectedHeaders(!1,!0)),d.col<0&&(a.selectCell(d.row,0,d.row,a.countCols()-1),a.selection.setSelectedHeaders(!0,!1))):(d.row=d.row<0?0:d.row,d.col=d.col<0?0:d.col,a.selection.setRangeStart(d))),Handsontable.hooks.run(a,"afterOnCellMouseDown",c,d,f),b.activeWt=b.wt)},onCellMouseOver:function(c,d,f,g){b.activeWt=g,d.row>=0&&d.col>=0?e&&a.selection.setRangeEnd(d):e&&(d.row<0&&(a.selection.setRangeEnd(new n(a.countRows()-1,d.col)),a.selection.setSelectedHeaders(!1,!0)),d.col<0&&(a.selection.setRangeEnd(new n(d.row,a.countCols()-1)),a.selection.setSelectedHeaders(!0,!1))),Handsontable.hooks.run(a,"afterOnCellMouseOver",c,d,f),b.activeWt=b.wt},onCellCornerMouseDown:function(b){b.preventDefault(),Handsontable.hooks.run(a,"afterOnCellCornerMouseDown",b)},beforeDraw:function(a){b.beforeRender(a)},onDraw:function(a){b.onDraw(a)},onScrollVertically:function(){a.runHooks("afterScrollVertically")},onScrollHorizontally:function(){a.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(b,c){a.runHooks("beforeDrawBorders",b,c)},onBeforeTouchScroll:function(){a.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){a.runHooks("afterMomentumScroll")},viewportRowCalculatorOverride:function(c){var d=a.countRows(),e=b.settings.viewportRowRenderingOffset;if("auto"===e&&b.settings.fixedRowsTop&&(e=10),"number"==typeof e&&(c.startRow=Math.max(c.startRow-e,0),c.endRow=Math.min(c.endRow+e,d-1)),"auto"===e){var f=c.startRow+c.endRow-c.startRow,g=Math.ceil(f/d*12);c.startRow=Math.max(c.startRow-g,0),c.endRow=Math.min(c.endRow+g,d-1)}a.runHooks("afterViewportRowCalculatorOverride",c)},viewportColumnCalculatorOverride:function(c){var d=a.countCols(),e=b.settings.viewportColumnRenderingOffset;if("auto"===e&&b.settings.fixedColumnsLeft&&(e=10),"number"==typeof e&&(c.startColumn=Math.max(c.startColumn-e,0),c.endColumn=Math.min(c.endColumn+e,d-1)),"auto"===e){var f=c.startColumn+c.endColumn-c.startColumn,g=Math.ceil(f/d*12);c.startRow=Math.max(c.startColumn-g,0),c.endColumn=Math.min(c.endColumn+g,d-1)}a.runHooks("afterViewportColumnCalculatorOverride",c)}};Handsontable.hooks.run(a,"beforeInitWalkontable",h),this.wt=new p(h),this.activeWt=this.wt,this.eventManager.addEventListener(b.wt.wtTable.spreader,"mousedown",function(a){a.target===b.wt.wtTable.spreader&&3===a.which&&l.stopPropagation(a)}),this.eventManager.addEventListener(b.wt.wtTable.spreader,"contextmenu",function(a){a.target===b.wt.wtTable.spreader&&3===a.which&&l.stopPropagation(a)}),this.eventManager.addEventListener(document.documentElement,"click",function(){b.settings.observeDOMVisibility&&b.wt.drawInterrupted&&(b.instance.forceFullRender=!0,b.render())})}Object.defineProperties(c,{TableView:{get:function(){return d}},__esModule:{value:!0}});var e,f,g,h,i,j,k=(e=a("./dom.js"),e&&e.__esModule&&e||{"default":e}),l=(f=a("./helpers.js"),f&&f.__esModule&&f||{"default":f}),m=(g=a("./eventManager.js"),g&&g.__esModule&&g||{"default":g}).eventManager,n=(h=a("./3rdparty/walkontable/src/cell/coords.js"),h&&h.__esModule&&h||{"default":h}).WalkontableCellCoords,o=(i=a("./3rdparty/walkontable/src/selection.js"),i&&i.__esModule&&i||{"default":i}).WalkontableSelection,p=(j=a("./3rdparty/walkontable/src/core.js"),j&&j.__esModule&&j||{"default":j}).Walkontable;Handsontable.TableView=d,d.prototype.isTextSelectionAllowed=function(a){return l.isInput(a)?!0:this.settings.fragmentSelection&&k.isChildOf(a,this.TBODY)?!0:!1},d.prototype.isCellEdited=function(){var a=this.instance.getActiveEditor();return a&&a.isOpened()},d.prototype.beforeRender=function(a){a&&Handsontable.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender)},d.prototype.onDraw=function(a){a&&Handsontable.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},d.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1},d.prototype.getCellAtCoords=function(a,b){var c=this.wt.getCell(a,b);return 0>c?null:c},d.prototype.scrollViewport=function(a){this.wt.scrollViewport(a)},d.prototype.appendRowHeader=function(a,b){if(b.firstChild){var c=b.firstChild;if(!k.hasClass(c,"relative"))return k.empty(b),void this.appendRowHeader(a,b);this.updateCellHeader(c.firstChild,a,this.instance.getRowHeader)}else{var d=document.createElement("div"),e=document.createElement("span");d.className="relative",e.className="colHeader",this.updateCellHeader(e,a,this.instance.getRowHeader),d.appendChild(e),b.appendChild(d)}Handsontable.hooks.run(this.instance,"afterGetRowHeader",a,b)},d.prototype.appendColHeader=function(a,b){if(b.firstChild){var c=b.firstChild;if(!k.hasClass(c,"relative"))return k.empty(b),void this.appendRowHeader(a,b);this.updateCellHeader(c.firstChild,a,this.instance.getColHeader)}else{var d=document.createElement("div"),e=document.createElement("span");d.className="relative",e.className="colHeader",this.updateCellHeader(e,a,this.instance.getColHeader),d.appendChild(e),b.appendChild(d)}Handsontable.hooks.run(this.instance,"afterGetColHeader",a,b)},d.prototype.updateCellHeader=function(a,b,c){b>-1?k.fastInnerHTML(a,c(b)):(k.fastInnerText(a,String.fromCharCode(160)),k.addClass(a,"cornerHeader"))},d.prototype.maximumVisibleElementWidth=function(a){var b=this.wt.wtViewport.getWorkspaceWidth(),c=b-a;return c>0?c:0},d.prototype.maximumVisibleElementHeight=function(a){var b=this.wt.wtViewport.getWorkspaceHeight(),c=b-a;return c>0?c:0},d.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},d.prototype.destroy=function(){this.wt.destroy(),this.eventManager.destroy()}},{"./3rdparty/walkontable/src/cell/coords.js":5,"./3rdparty/walkontable/src/core.js":7,"./3rdparty/walkontable/src/selection.js":18,"./dom.js":27,"./eventManager.js":41,"./helpers.js":42}],81:[function(a,b,c){"use strict";Object.defineProperties(c,{GhostTable:{get:function(){return l}},__esModule:{value:!0}});var d,e,f=(d=a("./../dom.js"),d&&d.__esModule&&d||{"default":d}),g=f.addClass,h=f.outerHeight,i=f.outerWidth,j=(e=a("./../helpers.js"),e&&e.__esModule&&e||{"default":e}),k=j.arrayEach,l=(j.objectEach,j.rangeEach,j.stringify,function(a){this.hot=a,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null});$traceurRuntime.createClass(l,{addRow:function(a,b){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var c={row:a};this.rows.push(c),this.samples=b,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(a)),this.container.container.appendChild(this.table.fragment),c.table=this.table.table},addColumn:function(a,b){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var c={col:a};this.columns.push(c),this.samples=b,this.table=this.createTable(this.hot.table.className),null!==this.hot.getColHeader(a)&&this.hot.view.appendColHeader(a,this.table.th),this.table.tBody.appendChild(this.createCol(a)),this.container.container.appendChild(this.table.fragment),c.table=this.table.table},getHeights:function(a){this.injected||this.injectTable(),k(this.rows,function(b){a(b.row,h(b.table)-1)})},getWidths:function(a){this.injected||this.injectTable(),k(this.columns,function(b){a(b.col,i(b.table))})},createColGroupsCol:function(){var a=this,b=document,c=b.createDocumentFragment();return c.appendChild(this.createColElement(-1)),this.samples.forEach(function(b){k(b.strings,function(b){c.appendChild(a.createColElement(b.col))})}),c},createRow:function(a){var b=this,c=document,d=c.createDocumentFragment(),e=c.createElement("th");return null!==this.hot.getRowHeader(a)&&this.hot.view.appendRowHeader(a,e),d.appendChild(e),this.samples.forEach(function(e){k(e.strings,function(e){var f=e.col,g=b.hot.getCellMeta(a,f);g.col=f,g.row=a;var h=b.hot.getCellRenderer(g),i=c.createElement("td");h(b.hot,i,a,f,b.hot.colToProp(f),e.value,g),d.appendChild(i)})}),d},createCol:function(a){var b=this,c=document,d=c.createDocumentFragment();return this.samples.forEach(function(e){k(e.strings,function(e){var f=e.row,g=b.hot.getCellMeta(f,a);g.col=a,g.row=f;var h=b.hot.getCellRenderer(g),i=c.createElement("td"),j=c.createElement("tr");h(b.hot,i,f,a,b.hot.colToProp(f),e.value,g),j.appendChild(i),d.appendChild(j)})}),d},clean:function(){this.rows.length=0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()},injectTable:function(){var a=void 0!==arguments[0]?arguments[0]:null;this.injected||((a||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)},removeTable:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)},createColElement:function(a){var b=document,c=b.createElement("col");return c.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(a)+"px",c},createTable:function(){var a=void 0!==arguments[0]?arguments[0]:"",b=document,c=b.createDocumentFragment(),d=b.createElement("table"),e=b.createElement("thead"),f=b.createElement("tbody"),h=b.createElement("colgroup"),i=b.createElement("tr"),j=b.createElement("th");return this.isVertical()&&d.appendChild(h),this.isHorizontal()&&(i.appendChild(j),e.appendChild(i),d.style.tableLayout="auto",d.style.width="auto"),d.appendChild(e),this.isVertical()&&f.appendChild(i),d.appendChild(f),g(d,a),c.appendChild(d),{fragment:c,table:d,tHead:e,tBody:f,colGroup:h,tr:i,th:j}},createContainer:function(){var a=void 0!==arguments[0]?arguments[0]:"",b=document,c=b.createDocumentFragment(),d=b.createElement("div");return a="htGhostTable htAutoSize "+a.trim(),g(d,a),c.appendChild(d),{fragment:c,container:d}},isVertical:function(){return this.rows.length&&!this.columns.length?!0:!1},isHorizontal:function(){return this.columns.length&&!this.rows.length?!0:!1}},{}),Handsontable.utils=Handsontable.utils||{},Handsontable.utils.GhostTable=l},{"./../dom.js":27,"./../helpers.js":42}],82:[function(a,b,c){"use strict";var d;Object.defineProperties(c,{SamplesGenerator:{get:function(){return k}},__esModule:{value:!0}});var e,f,g=(e=a("./../dom.js"),e&&e.__esModule&&e||{"default":e}),h=(g.addClass,g.outerHeight,g.outerWidth,f=a("./../helpers.js"),f&&f.__esModule&&f||{"default":f}),i=(h.arrayEach,h.objectEach,h.rangeEach),j=h.stringify,k=function(a){this.samples=null,this.dataFactory=a},l=k;$traceurRuntime.createClass(k,(d={},Object.defineProperty(d,"generateRowSamples",{value:function(a,b){return this.generateSamples("row",b,a)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(d,"generateColumnSamples",{value:function(a,b){return this.generateSamples("col",b,a)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(d,"generateSamples",{value:function(a,b,c){var d=this,e=new Map;return"number"==typeof c&&(c={from:c,to:c}),i(c.from,c.to,function(c){var f=d.generateSample(a,b,c);e.set(c,f)}),e},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(d,"generateSample",{value:function(a,b,c){var d=this,e=new Map;return i(b.from,b.to,function(b){var f,g;if("row"===a)g=d.dataFactory(c,b);else{if("col"!==a)throw new Error("Unsupported sample type");g=d.dataFactory(b,c)}Array.isArray(g)||(g=j(g));var h=g.length;e.has(h)||e.set(h,{needed:l.SAMPLE_COUNT,strings:[]});var i=e.get(h);i.needed&&(i.strings.push((f={},Object.defineProperty(f,"value",{value:g,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(f,"row"===a?"col":"row",{value:b,configurable:!0,enumerable:!0,writable:!0}),f)),i.needed--)}),e},configurable:!0,enumerable:!0,writable:!0}),d),{get SAMPLE_COUNT(){return 3}}),Handsontable.utils=Handsontable.utils||{},Handsontable.utils.SamplesGenerator=k},{"./../dom.js":27,"./../helpers.js":42}],83:[function(a,b,c){"use strict";var d=function(a,b){var c=a,d="string"==typeof c?c.toLowerCase():null;return function(a){for(var e=!1,f=0,g=a.length;g>f;f++){if(c===a[f]){e=!0;break}if(d===Handsontable.helper.stringify(a[f]).toLowerCase()){e=!0;break}}b(e)}};Handsontable.AutocompleteValidator=function(a,b){this.strict&&this.source?"function"==typeof this.source?this.source(a,d(a,b)):d(a,b)(this.source):b(!0)}},{}],84:[function(a,b,c){"use strict";var d,e,f=(d=a("moment"),d&&d.__esModule&&d||{"default":d})["default"],g=(e=a("./../editors.js"),e&&e.__esModule&&e||{"default":e}).getEditor;Handsontable.DateValidator=function(a,b){var c=!0,d=g("date",this.instance);null===a&&(a="");var e=f(new Date(a)).isValid(),i=f(a,this.dateFormat||d.defaultDateFormat,!0).isValid();if(e||(c=!1),!e&&i&&(c=!0),e&&!i)if(this.correctFormat===!0){var j=h(a,this.dateFormat);this.instance.setDataAtCell(this.row,this.col,j,"dateValidator"),c=!0}else c=!1;b(c)};var h=function(a,b){var c=f(new Date(a)),d=c.format("YYYY"),e=f().format("YYYY");return d.substr(0,2)!==e.substr(0,2)?a.match(new RegExp(d))||c.year(d.replace(d.substr(0,2),e.substr(0,2))):d.length>4&&c.year((c.year()+"").substr(0,4)),c.format(b)}},{"./../editors.js":29,moment:void 0}],85:[function(a,b,c){"use strict";Handsontable.NumericValidator=function(a,b){null===a&&(a=""),b(/^-?\d*(\.|\,)?\d*$/.test(a))}},{}],SheetClip:[function(a,b,c){"use strict";!function(a){
function b(a){return a.split('"').length-1}var d={parse:function(a){var c,d,e,f,g,h,i,j=[],k=0;for(e=a.split("\n"),e.length>1&&""===e[e.length-1]&&e.pop(),c=0,d=e.length;d>c;c+=1){for(e[c]=e[c].split("	"),f=0,g=e[c].length;g>f;f+=1)j[k]||(j[k]=[]),h&&0===f?(i=j[k].length-1,j[k][i]=j[k][i]+"\n"+e[c][0],h&&1&b(e[c][0])&&(h=!1,j[k][i]=j[k][i].substring(0,j[k][i].length-1).replace(/""/g,'"'))):f===g-1&&0===e[c][f].indexOf('"')&&1&b(e[c][f])?(j[k].push(e[c][f].substring(1).replace(/""/g,'"')),h=!0):(j[k].push(e[c][f].replace(/""/g,'"')),h=!1);h||(k+=1)}return j},stringify:function(a){var b,c,d,e,f,g="";for(b=0,c=a.length;c>b;b+=1){for(e=a[b].length,d=0;e>d;d+=1)d>0&&(g+="	"),f=a[b][d],g+="string"==typeof f?f.indexOf("\n")>-1?'"'+f.replace(/"/g,'""')+'"':f:null===f||void 0===f?"":f;g+="\n"}return g}};"undefined"!=typeof c?(c.parse=d.parse,c.stringify=d.stringify):a.SheetClip=d}(window)},{}],autoResize:[function(a,b,c){"use strict";function d(){var a,b={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},c=document.body,d=document.createTextNode(""),e=document.createElement("SPAN"),f=function(a,b,c){window.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},g=function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},h=function(f){var g,h;f?/^[a-zA-Z \.,\\\/\|0-9]$/.test(f)||(f="."):f="",void 0!==d.textContent?d.textContent=a.value+f:d.data=a.value+f,e.style.fontSize=Handsontable.Dom.getComputedStyle(a).fontSize,e.style.fontFamily=Handsontable.Dom.getComputedStyle(a).fontFamily,e.style.whiteSpace="pre",c.appendChild(e),g=e.clientWidth+2,c.removeChild(e),a.style.height=b.minHeight+"px",b.minWidth>g?a.style.width=b.minWidth+"px":g>b.maxWidth?a.style.width=b.maxWidth+"px":a.style.width=g+"px",h=a.scrollHeight?a.scrollHeight-1:0,b.minHeight>h?a.style.height=b.minHeight+"px":b.maxHeight<h?(a.style.height=b.maxHeight+"px",a.style.overflowY="visible"):a.style.height=h+"px"},i=function(){window.setTimeout(h,0)},j=function(c){if(c&&c.minHeight)if("inherit"==c.minHeight)b.minHeight=a.clientHeight;else{var f=parseInt(c.minHeight);isNaN(f)||(b.minHeight=f)}if(c&&c.maxHeight)if("inherit"==c.maxHeight)b.maxHeight=a.clientHeight;else{var g=parseInt(c.maxHeight);isNaN(g)||(b.maxHeight=g)}if(c&&c.minWidth)if("inherit"==c.minWidth)b.minWidth=a.clientWidth;else{var h=parseInt(c.minWidth);isNaN(h)||(b.minWidth=h)}if(c&&c.maxWidth)if("inherit"==c.maxWidth)b.maxWidth=a.clientWidth;else{var i=parseInt(c.maxWidth);isNaN(i)||(b.maxWidth=i)}e.firstChild||(e.className="autoResize",e.style.display="inline-block",e.appendChild(d))},k=function(c,d,e){a=c,j(d),"TEXTAREA"==a.nodeName&&(a.style.resize="none",a.style.overflowY="",a.style.height=b.minHeight+"px",a.style.minWidth=b.minWidth+"px",a.style.maxWidth=b.maxWidth+"px",a.style.overflowY="hidden"),e&&(f(a,"change",h),f(a,"cut",i),f(a,"paste",i),f(a,"drop",i),f(a,"keydown",i)),h()};return{init:function(a,b,c){k(a,b,c)},unObserve:function(){g(a,"change",h),g(a,"cut",i),g(a,"paste",i),g(a,"drop",i),g(a,"keydown",i)},resize:h}}"undefined"!=typeof c&&(b.exports=d)},{}],copyPaste:[function(a,b,c){"use strict";function d(){return f?f.hasBeenDestroyed()&&f.init():f=new e,f.refCounter++,f}function e(){this.refCounter=0,this.init()}var f;"undefined"!=typeof c&&(b.exports=d),e.prototype.init=function(){var a,b;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],b=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("div"),this.elDiv.id="CopyPasteDiv",a=this.elDiv.style,a.position="fixed",a.top="-10000px",a.left="-10000px",b.appendChild(this.elDiv),this.elTextarea=document.createElement("textarea"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(a){var b,c;return"WebkitAppearance"in document.documentElement.style?(b=a.clipboardData.getData("Text"),-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(c=b.split("\n"),""===c[c.length-1]&&c.pop(),b=c.join("\n")),this.value=b,!1):void 0},a=this.elTextarea.style,a.width="10000px",a.height="10000px",a.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof a.opacity&&(a.opacity=0)),this.onKeyDownRef=this.onKeyDown.bind(this),document.documentElement.addEventListener("keydown",this.onKeyDownRef,!1)},e.prototype.onKeyDown=function(a){function b(){var a=document.activeElement;return a.shadowRoot&&a.shadowRoot.activeElement&&(a=a.shadowRoot.activeElement),["INPUT","SELECT","TEXTAREA"].indexOf(a.nodeName)>-1||"true"===a.contentEditable}var c=this,d=!1;if(a.metaKey?d=!0:a.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(d=!0),d){if(document.activeElement!==this.elTextarea&&(""!==this.getSelectionText()||b()))return;this.selectNodeText(this.elTextarea),setTimeout(function(){document.activeElement!==c.elTextarea&&c.selectNodeText(c.elTextarea)},0)}!d||67!==a.keyCode&&86!==a.keyCode&&88!==a.keyCode||(88===a.keyCode?setTimeout(function(){c.triggerCut(a)},0):86===a.keyCode&&setTimeout(function(){c.triggerPaste(a)},0))},e.prototype.selectNodeText=function(a){a&&a.select()},e.prototype.getSelectionText=function(){var a="";return window.getSelection?a=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(a=document.selection.createRange().text),a},e.prototype.copyable=function(a){if("string"!=typeof a&&void 0===a.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=a,this.selectNodeText(this.elTextarea)},e.prototype.onCut=function(a){this.cutCallbacks.push(a)},e.prototype.onPaste=function(a){this.pasteCallbacks.push(a)},e.prototype.removeCallback=function(a){var b,c;for(b=0,c=this.copyCallbacks.length;c>b;b++)if(this.copyCallbacks[b]===a)return this.copyCallbacks.splice(b,1),!0;for(b=0,c=this.cutCallbacks.length;c>b;b++)if(this.cutCallbacks[b]===a)return this.cutCallbacks.splice(b,1),!0;for(b=0,c=this.pasteCallbacks.length;c>b;b++)if(this.pasteCallbacks[b]===a)return this.pasteCallbacks.splice(b,1),!0;return!1},e.prototype.triggerCut=function(a){var b=this;b.cutCallbacks&&setTimeout(function(){for(var c=0,d=b.cutCallbacks.length;d>c;c++)b.cutCallbacks[c](a)},50)},e.prototype.triggerPaste=function(a,b){var c=this;c.pasteCallbacks&&setTimeout(function(){for(var d=b||c.elTextarea.value,e=0,f=c.pasteCallbacks.length;f>e;e++)c.pasteCallbacks[e](d,a)},50)},e.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),document.documentElement.removeEventListener("keydown",this.onKeyDownRef),this.onKeyDownRef=null)},e.prototype.hasBeenDestroyed=function(){return!this.refCounter}},{}],es6collections:[function(a,b,c){"use strict";!function(a){function b(a,b){function d(a){return this&&this.constructor===d?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=b,void(a&&c.call(this,a))):new d(a)}return b||t(a,"size",{get:q}),a.constructor=d,d.prototype=a,d}function c(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function d(a){return this.has(a)&&(this._keys.splice(s,1),this._values.splice(s,1),this._itp.forEach(function(a){s<a[0]&&a[0]--})),s>-1}function e(a){return this.has(a)?this._values[s]:void 0}function f(a,b){if(this.objectOnly&&b!==Object(b))throw new TypeError("Invalid value used as weak collection key");if(b!=b||0===b)for(s=a.length;s--&&!u(a[s],b););else s=a.indexOf(b);return s>-1}function g(a){return f.call(this,this._values,a)}function h(a){return f.call(this,this._keys,a)}function i(a,b){return this.has(a)?this._values[s]=b:this._values[this._keys.push(a)-1]=b,this}function j(a){return this.has(a)||this._values.push(a),this}function k(){this._values.length=0}function l(){return p(this._itp,this._keys)}function m(){return p(this._itp,this._values)}function n(){return p(this._itp,this._keys,this._values)}function o(){return p(this._itp,this._values,this._values)}function p(a,b,c){var d=[0],e=!1;return a.push(d),{next:function(){var f,g=d[0];return!e&&g<b.length?(f=c?[b[g],c[g]]:b[g],d[0]++):(e=!0,a.splice(a.indexOf(d),1)),{done:e,value:f}}}}function q(){return this._values.length}function r(a,b){for(var c=this.entries();;){var d=c.next();if(d.done)break;a.call(b,d.value[1],d.value[0],this)}}var s,t=Object.defineProperty,u=function(a,b){return isNaN(a)?isNaN(b):a===b};"undefined"==typeof WeakMap&&(a.WeakMap=b({"delete":d,clear:k,get:e,has:h,set:i},!0)),"undefined"==typeof Map&&(a.Map=b({"delete":d,has:h,get:e,set:i,keys:l,values:m,entries:n,forEach:r,clear:k})),"undefined"==typeof Set&&(a.Set=b({has:g,add:j,"delete":d,clear:k,keys:m,values:m,entries:o,forEach:r})),"undefined"==typeof WeakSet&&(a.WeakSet=b({"delete":d,add:j,clear:k,has:g},!0))}("undefined"!=typeof c&&"undefined"!=typeof global?global:window)},{}],jsonpatch:[function(a,b,c){"use strict";var d;!function(a){function b(a){return-1===a.indexOf("/")&&-1===a.indexOf("~")?a:a.replace(/~/g,"~0").replace(/\//g,"~1")}function c(a,d){var e;for(var f in a)if(a.hasOwnProperty(f)){if(a[f]===d)return b(f)+"/";if("object"==typeof a[f]&&(e=c(a[f],d),""!=e))return b(f)+"/"+e}return""}function d(a,b){if(a===b)return"/";var d=c(a,b);if(""===d)throw new Error("Object not found in root");return"/"+d}function e(a){for(var b=0,c=s.length;c>b;b++)if(s[b].obj===a)return s[b]}function f(a){for(var b=0,c=s.length;c>b;b++)s[b]===a&&s.splice(b,1)}function g(a,b){for(var c=0,d=a.observers.length;d>c;c++)if(a.observers[c].callback===b)return a.observers[c].observer}function h(a,b){for(var c=0,d=a.observers.length;d>c;c++)if(a.observers[c].observer===b)return a.observers.splice(c,1),void(a.observers.length||f(a))}function i(a,b){m(b),Object.observe?l(b,a):clearTimeout(b.next);var c=e(a);h(c,b)}function j(a,b){var c,f=[],h=a,i=e(a);if(i?c=g(i,b):(i=new t(a),s.push(i)),c)return c;if(Object.observe)c=function(e){l(c,a),k(c,a);for(var g=0,i=e.length;i>g;){if(("length"!==e[g].name||!w(e[g].object))&&"__Jasmine_been_here_before__"!==e[g].name){var j=e[g].type;switch(j){case"new":j="add";break;case"deleted":j="delete";break;case"updated":j="update"}r[j].call(e[g],f,d(h,e[g].object))}g++}f&&b&&b(f),c.patches=f,f=[]};else if(c={},i.value=JSON.parse(JSON.stringify(a)),b){c.callback=b,c.next=null;var j=this.intervals||[100,1e3,1e4,6e4],n=0,o=function(){m(c)},p=function(){clearTimeout(c.next),c.next=setTimeout(function(){o(),n=0,c.next=setTimeout(q,j[n++])},0)},q=function(){o(),n==j.length&&(n=j.length-1),c.next=setTimeout(q,j[n++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",p),window.addEventListener("mouseup",p),window.addEventListener("keydown",p)):(window.attachEvent("onmousedown",p),window.attachEvent("onmouseup",p),window.attachEvent("onkeydown",p))),c.next=setTimeout(q,j[n++])}return c.patches=f,c.object=a,i.observers.push(new u(b,c)),k(c,a)}function k(a,b){if(Object.observe){Object.observe(b,a);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];d&&"object"==typeof d&&k(a,d)}}return a}function l(a,b){if(Object.observe){Object.unobserve(b,a);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];d&&"object"==typeof d&&l(a,d)}}return a}function m(a){if(Object.observe)Object.deliverChangeRecords(a);else{for(var b,c=0,d=s.length;d>c;c++)if(s[c].obj===a.object){b=s[c];break}b&&n(b.value,a.object,a.patches,"")}var e=a.patches;return e.length>0&&(a.patches=[],a.callback&&a.callback(e)),e}function n(a,c,d,e){for(var f=v(c),g=v(a),h=!1,i=!1,j=g.length-1;j>=0;j--){var k=g[j],l=a[k];if(c.hasOwnProperty(k)){var m=c[k];l instanceof Object?n(l,m,d,e+"/"+b(k)):l!=m&&(h=!0,d.push({op:"replace",path:e+"/"+b(k),value:m}),a[k]=m)}else d.push({op:"remove",path:e+"/"+b(k)}),delete a[k],i=!0}if(i||f.length!=g.length)for(var j=0;j<f.length;j++){var k=f[j];a.hasOwnProperty(k)||(d.push({op:"add",path:e+"/"+b(k),value:c[k]}),a[k]=JSON.parse(JSON.stringify(c[k])))}}function o(a,b){for(var c,d=!1,e=0,f=b.length;f>e;){c=b[e];for(var g=c.path.split("/"),h=a,i=1,j=g.length;;)if(w(h)){var k=parseInt(g[i],10);if(i++,i>=j){d=q[c.op].call(c,h,k,a);break}h=h[k]}else{var l=g[i];if(-1!=l.indexOf("~")&&(l=l.replace(/~1/g,"/").replace(/~0/g,"~")),i++,i>=j){d=p[c.op].call(c,h,l,a);break}h=h[l]}e++}return d}var p={add:function(a,b){return a[b]=this.value,!0},remove:function(a,b){return delete a[b],!0},replace:function(a,b){return a[b]=this.value,!0},move:function(a,b,c){var d={op:"_get",path:this.from};return o(c,[d]),o(c,[{op:"remove",path:this.from}]),o(c,[{op:"add",path:this.path,value:d.value}]),!0},copy:function(a,b,c){var d={op:"_get",path:this.from};return o(c,[d]),o(c,[{op:"add",path:this.path,value:d.value}]),!0},test:function(a,b){return JSON.stringify(a[b])===JSON.stringify(this.value)},_get:function(a,b){this.value=a[b]}},q={add:function(a,b){return a.splice(b,0,this.value),!0},remove:function(a,b){return a.splice(b,1),!0},replace:function(a,b){return a[b]=this.value,!0},move:p.move,copy:p.copy,test:p.test,_get:p._get},r={add:function(a,c){var d={op:"add",path:c+b(this.name),value:this.object[this.name]};a.push(d)},"delete":function(a,c){var d={op:"remove",path:c+b(this.name)};a.push(d)},update:function(a,c){var d={op:"replace",path:c+b(this.name),value:this.object[this.name]};a.push(d)}},s=[];a.intervals;var t=function(){function a(a){this.observers=[],this.obj=a}return a}(),u=function(){function a(a,b){this.callback=a,this.observer=b}return a}();a.unobserve=i,a.observe=j,a.generate=m;var v;v=Object.keys?Object.keys:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};var w;w=Array.isArray?Array.isArray:function(a){return a.push&&"number"==typeof a.length},a.apply=o}(d||(d={})),"undefined"!=typeof c&&(c.apply=d.apply,c.observe=d.observe,c.unobserve=d.unobserve,c.generate=d.generate)},{}],numeral:[function(b,c,d){"use strict";(function(){function b(a){this._value=a}function d(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function e(a,b,c){var d;return d=b.indexOf("$")>-1?g(a,b,c):b.indexOf("%")>-1?h(a,b,c):b.indexOf(":")>-1?i(a,b):k(a._value,b,c)}function f(a,b){var c,d,e,f,g,h=b,i=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=j(b);else if(b===s)a._value=0;else{for("."!==q[r].delimiters.decimal&&(b=b.replace(/\./g,"").replace(q[r].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+q[r].abbreviations.thousand+"(?:\\)|(\\"+q[r].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+q[r].abbreviations.million+"(?:\\)|(\\"+q[r].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+q[r].abbreviations.billion+"(?:\\)|(\\"+q[r].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+q[r].abbreviations.trillion+"(?:\\)|(\\"+q[r].currency.symbol+")?(?:\\))?)?$"),g=0;g<=i.length&&!(k=b.indexOf(i[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(h.match(c)?Math.pow(10,3):1)*(h.match(d)?Math.pow(10,6):1)*(h.match(e)?Math.pow(10,9):1)*(h.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function g(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),i="";return b.indexOf(" $")>-1?(i=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(i=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=k(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,q[r].currency.symbol+i),e=e.join("")):e=q[r].currency.symbol+i+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,i+q[r].currency.symbol),e=e.join("")):e=e+i+q[r].currency.symbol,e}function h(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=k(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function i(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function j(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function k(a,b,c){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",o=!1,p=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==s)return s;if(b.indexOf("(")>-1?(k=!0,b=b.slice(1,-1)):b.indexOf("+")>-1&&(l=!0,b=b.replace(/\+/g,"")),b.indexOf("a")>-1&&(o=b.indexOf("aK")>=0,p=b.indexOf("aM")>=0,t=b.indexOf("aB")>=0,u=b.indexOf("aT")>=0,v=o||p||t||u,b.indexOf(" a")>-1?(n=" ",b=b.replace(" a","")):b=b.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=q[r].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=q[r].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||p?(n+=q[r].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||o)&&(n+=q[r].abbreviations.thousand,a/=Math.pow(10,3))),b.indexOf("b")>-1)for(b.indexOf(" b")>-1?(w=" ",b=b.replace(" b","")):b=b.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return b.indexOf("o")>-1&&(b.indexOf(" o")>-1?(x=" ",b=b.replace(" o","")):b=b.replace("o",""),x+=q[r].ordinal(a)),b.indexOf("[.]")>-1&&(m=!0,b=b.replace("[.]",".")),h=a.toString().split(".")[0],i=b.split(".")[1],j=b.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=d(a,i[0].length+i[1].length,c,i[1].length)):A=d(a,i.length,c),h=A.split(".")[0],A=A.split(".")[1].length?q[r].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=d(a,null,c),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+q[r].delimiters.thousands)),0===b.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function l(a,b){q[a]=b}function m(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function n(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=m(a),d=m(b);return c>d?c:d},-(1/0))}var o,p="1.5.3",q={},r="en",s=null,t="0,0",u="undefined"!=typeof c&&c.exports;o=function(a){return o.isNumeral(a)?a=a.value():0===a||"undefined"==typeof a?a=0:Number(a)||(a=o.fn.unformat(a)),new b(Number(a))},o.version=p,o.isNumeral=function(a){return a instanceof b},o.language=function(a,b){if(!a)return r;if(a&&!b){if(!q[a])throw new Error("Unknown language : "+a);r=a}return(b||!q[a])&&l(a,b),o},o.languageData=function(a){if(!a)return q[r];if(!q[a])throw new Error("Unknown language : "+a);return q[a]},o.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),o.zeroFormat=function(a){s="string"==typeof a?a:null},o.defaultFormat=function(a){t="string"==typeof a?a:"0.0"},o.validate=function(a,b){var c,d,e,f,g,h,i,j;if("string"!=typeof a&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),""===a)return!1;a=a.replace(/^[+-]?/,"");try{i=o.languageData(b)}catch(k){i=o.languageData(o.language())}return e=i.currency.symbol,g=i.abbreviations,c=i.delimiters.decimal,d="."===i.delimiters.thousands?"\\.":i.delimiters.thousands,j=a.match(/^[^\d\.\,]+/),null!==j&&(a=a.substr(1),j[0]!==e)?!1:(j=a.match(/[^\d]+$/),null!==j&&(a=a.slice(0,-1),j[0]!==g.thousand&&j[0]!==g.million&&j[0]!==g.billion&&j[0]!==g.trillion)?!1:a.match(/^\d+$/)?!0:(h=new RegExp(d+"{2}"),a.match(/[^\d.,]/g)?!1:(f=a.split(c),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h):""===f[0]?!f[0].match(h)&&!!f[1].match(/^\d+$/):1===f[0].length?!!f[0].match(/^\d+$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/))))},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),o.fn=b.prototype={clone:function(){return o(this)},format:function(a,b){return e(this,a?a:t,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:f(this,a?a:t)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b,d,e){return a+c*b}var c=n.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b,d,e){return a-c*b}var c=n.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b,c,d){var e=n(a,b);return a*e*b*e/(e*e)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b,c,d){var e=n(a,b);return a*e/(b*e)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(o(this._value).subtract(a).value())}},u&&(c.exports=o),"undefined"==typeof ender&&(this.numeral=o),"function"==typeof a&&a.amd&&a([],function(){return o})}).call(window)},{}]},{},[23,47,48,49,50,66,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,67,68,69,70,83,84,85,73,74,75,76,77,78,31,35,32,33,40,34,36,37,38,39])("numeral")}),angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(a){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var b=function(a,b,c){if(angular.isDefined(c.workerPath)){var d=window.ace.require("ace/config");d.set("workerPath",c.workerPath)}angular.isDefined(c.require)&&c.require.forEach(function(a){window.ace.require(a)}),angular.isDefined(c.showGutter)&&a.renderer.setShowGutter(c.showGutter),angular.isDefined(c.useWrapMode)&&b.setUseWrapMode(c.useWrapMode),angular.isDefined(c.showInvisibles)&&a.renderer.setShowInvisibles(c.showInvisibles),angular.isDefined(c.showIndentGuides)&&a.renderer.setDisplayIndentGuides(c.showIndentGuides),angular.isDefined(c.useSoftTabs)&&b.setUseSoftTabs(c.useSoftTabs),angular.isDefined(c.showPrintMargin)&&a.setShowPrintMargin(c.showPrintMargin),angular.isDefined(c.disableSearch)&&c.disableSearch&&a.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isString(c.theme)&&a.setTheme("ace/theme/"+c.theme),angular.isString(c.mode)&&b.setMode("ace/mode/"+c.mode),angular.isDefined(c.firstLineNumber)&&(angular.isNumber(c.firstLineNumber)?b.setOption("firstLineNumber",c.firstLineNumber):angular.isFunction(c.firstLineNumber)&&b.setOption("firstLineNumber",c.firstLineNumber()));var e,f;if(angular.isDefined(c.advanced))for(e in c.advanced)f={name:e,value:c.advanced[e]},a.setOption(f.name,f.value);if(angular.isDefined(c.rendererOptions))for(e in c.rendererOptions)f={name:e,value:c.rendererOptions[e]},a.renderer.setOption(f.name,f.value);angular.forEach(c.callbacks,function(b){angular.isFunction(b)&&b(a)})};return{restrict:"EA",require:"?ngModel",link:function(c,d,e,f){var g,h,i=a.ace||{},j=angular.extend({},i,c.$eval(e.uiAce)),k=window.ace.edit(d[0]),l=k.getSession(),m=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);angular.isDefined(a)&&c.$evalAsync(function(){if(!angular.isFunction(a))throw new Error("ui-ace use a function as callback.");a(b)})},n={onChange:function(a){return function(b){var d=l.getValue();!f||d===f.$viewValue||c.$$phase||c.$root.$$phase||c.$evalAsync(function(){f.$setViewValue(d)}),m(a,b,k)}},onBlur:function(a){return function(){m(a,k)}}};e.$observe("readonly",function(a){k.setReadOnly(!!a||""===a)}),f&&(f.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-ace cannot use an object or an array as a model");return a}),f.$render=function(){l.setValue(f.$viewValue)});var o=function(a,d){a!==d&&(j=angular.extend({},i,c.$eval(e.uiAce)),j.callbacks=[j.onLoad],j.onLoad!==i.onLoad&&j.callbacks.unshift(i.onLoad),l.removeListener("change",g),g=n.onChange(j.onChange),l.on("change",g),k.removeListener("blur",h),h=n.onBlur(j.onBlur),k.on("blur",h),b(k,l,j))};c.$watch(e.uiAce,o,!0),o(i),d.on("$destroy",function(){k.session.$stopWorker(),k.destroy()}),c.$watch(function(){return[d[0].offsetWidth,d[0].offsetHeight]},function(){k.resize(),k.renderer.updateFull()},!0)}}}]),function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this,B=A&&A.ejs,C=Array.prototype,D=Object.prototype,E=C.slice,F=D.toString,G=D.hasOwnProperty,H=C.forEach,I=Array.isArray,J=C.indexOf,K={};z="undefined"!=typeof exports?exports:A.ejs={},a=function(a,b){return G.call(a,b)},b=function(b,c,d){if(null!=b)if(H&&b.forEach===H)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===K)return}else for(var g in b)if(a(b,g)&&c.call(d,b[g],g,b)===K)return},c=function(a){return b(E.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},d=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(J&&a.indexOf===J)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1},e=I||function(a){return"[object Array]"===F.call(a)},f=function(a){return a===Object(a)},g=function(a){return"[object String]"===F.call(a)},h=function(a){return"[object Number]"===F.call(a)},i=function(a){return a===!0||a===!1||"[object Boolean]"===F.call(a)},j="function"!=typeof/./?function(a){return"function"==typeof a}:function(a){return"[object Function]"===F.call(a)},k=function(b){return f(b)&&a(b,"_type")&&a(b,"toJSON")},l=function(a){return k(a)&&"query"===a._type()},m=function(a){return k(a)&&"rescore"===a._type()},n=function(a){return k(a)&&"filter"===a._type()},o=function(a){return k(a)&&"facet"===a._type()},p=function(a){return k(a)&&"aggregation"===a._type()},q=function(a){return k(a)&&"script field"===a._type()},r=function(a){return k(a)&&"geo point"===a._type()},s=function(a){return k(a)&&"indexed shape"===a._type()},t=function(a){return k(a)&&"shape"===a._type()},u=function(a){return k(a)&&"sort"===a._type()},v=function(a){return k(a)&&"highlight"===a._type()},w=function(a){return k(a)&&"suggest"===a._type()},x=function(a){return k(a)&&"generator"===a._type()},y=function(a){return k(a)&&"score function"===a._type()},z.AggregationMixin=function(a){var b={};return b[a]={},{aggregation:function(d){if(null==d)return b[a].aggs;if(null==b[a].aggs&&(b[a].aggs={}),!p(d))throw new TypeError("Argument must be an Aggregation");return c(b[a].aggs,d.toJSON()),this},agg:function(a){return this.aggregation(a)},_type:function(){return"aggregation"},toJSON:function(){return b}}},z.DirectSettingsMixin=function(a){return{accuracy:function(b){return null==b?a.accuracy:(a.accuracy=b,this)},suggestMode:function(b){return null==b?a.suggest_mode:(b=b.toLowerCase(),("missing"===b||"popular"===b||"always"===b)&&(a.suggest_mode=b),this)},sort:function(b){return null==b?a.sort:(b=b.toLowerCase(),("score"===b||"frequency"===b)&&(a.sort=b),this)},stringDistance:function(b){return null==b?a.string_distance:(b=b.toLowerCase(),("internal"===b||"damerau_levenshtein"===b||"levenstein"===b||"jarowinkler"===b||"ngram"===b)&&(a.string_distance=b),this)},maxEdits:function(b){return null==b?a.max_edits:(a.max_edits=b,this)},maxInspections:function(b){return null==b?a.max_inspections:(a.max_inspections=b,this)},maxTermFreq:function(b){return null==b?a.max_term_freq:(a.max_term_freq=b,this)},prefixLen:function(b){return null==b?a.prefix_len:(a.prefix_len=b,this)},minWordLen:function(b){return null==b?a.min_word_len:(a.min_word_len=b,this)},minDocFreq:function(b){return null==b?a.min_doc_freq:(a.min_doc_freq=b,this)}}},z.FacetMixin=function(a){var b={};return b[a]={},{facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c.toJSON(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},scope:function(a){return this},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},_type:function(){return"facet"},toJSON:function(){return b}}},z.FilterMixin=function(a){var b={};return b[a]={},{name:function(c){return null==c?b[a]._name:(b[a]._name=c,this)},cache:function(c){return null==c?b[a]._cache:(b[a]._cache=c,this)},cacheKey:function(c){return null==c?b[a]._cache_key:(b[a]._cache_key=c,this)},_type:function(){return"filter"},toJSON:function(){return b}}},z.MetricsAggregationMixin=function(a,b){var d=z.AggregationMixin(a),e=d.toJSON();return delete d.aggregation,delete d.agg,e[a][b]={},c(d,{field:function(c){return null==c?e[a][b].field:(e[a][b].field=c,this)},script:function(c){return null==c?e[a][b].script:(e[a][b].script=c,this)},lang:function(c){return null==c?e[a][b].lang:(e[a][b].lang=c,this)},scriptValuesSorted:function(c){return null==c?e[a][b].script_values_sorted:(e[a][b].script_values_sorted=c,this)},params:function(c){return null==c?e[a][b].params:(e[a][b].params=c,this)}})},z.QueryMixin=function(a){var b={};return b[a]={},{boost:function(c){return null==c?b[a].boost:(b[a].boost=c,this)},_type:function(){return"query"},toJSON:function(){return b}}},z.ScoreFunctionMixin=function(a){var b={};return b[a]={},{filter:function(a){if(null==a)return b.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b.filter=a.toJSON(),this},_type:function(){return"score function"},toJSON:function(){return b}}},z.SuggestContextMixin=function(a){return{analyzer:function(b){return null==b?a.analyzer:(a.analyzer=b,this)},field:function(b){return null==b?a.field:(a.field=b,this)},size:function(b){return null==b?a.size:(a.size=b,this)},shardSize:function(b){return null==b?a.shard_size:(a.shard_size=b,this)}}},z.SuggesterMixin=function(a){var b={};return b[a]={},{text:function(c){return null==c?b[a].text:(b[a].text=c,this)},_type:function(){return"suggest"},toJSON:function(){return b}}},z.DateHistogramFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].date_histogram={},c(b,{field:function(b){return null==b?d[a].date_histogram.field:(d[a].date_histogram.field=b,this)},keyField:function(b){return null==b?d[a].date_histogram.key_field:(d[a].date_histogram.key_field=b,this)},valueField:function(b){return null==b?d[a].date_histogram.value_field:(d[a].date_histogram.value_field=b,this)},interval:function(b){return null==b?d[a].date_histogram.interval:(d[a].date_histogram.interval=b,this)},timeZone:function(b){return null==b?d[a].date_histogram.time_zone:(d[a].date_histogram.time_zone=b,this)},preZone:function(b){return null==b?d[a].date_histogram.pre_zone:(d[a].date_histogram.pre_zone=b,this)},preZoneAdjustLargeInterval:function(b){return null==b?d[a].date_histogram.pre_zone_adjust_large_interval:(d[a].date_histogram.pre_zone_adjust_large_interval=b,this)},postZone:function(b){return null==b?d[a].date_histogram.post_zone:(d[a].date_histogram.post_zone=b,this)},preOffset:function(b){return null==b?d[a].date_histogram.pre_offset:(d[a].date_histogram.pre_offset=b,this)},postOffset:function(b){return null==b?d[a].date_histogram.post_offset:(d[a].date_histogram.post_offset=b,this)},factor:function(b){return null==b?d[a].date_histogram.factor:(d[a].date_histogram.factor=b,this)},valueScript:function(b){return null==b?d[a].date_histogram.value_script:(d[a].date_histogram.value_script=b,
this)},order:function(b){return null==b?d[a].date_histogram.order:(b=b.toLowerCase(),("time"===b||"count"===b||"total"===b)&&(d[a].date_histogram.order=b),this)},lang:function(b){return null==b?d[a].date_histogram.lang:(d[a].date_histogram.lang=b,this)},params:function(b){return null==b?d[a].date_histogram.params:(d[a].date_histogram.params=b,this)}})},z.FilterFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return c(b,{filter:function(b){if(null==b)return d[a].filter;if(!n(b))throw new TypeError("Argument must be a Filter");return d[a].filter=b.toJSON(),this}})},z.GeoDistanceFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON(),e=z.GeoPoint([0,0]),f="location";return d[a].geo_distance={location:e.toJSON(),ranges:[]},c(b,{field:function(b){var c=d[a].geo_distance[f];return null==b?f:(delete d[a].geo_distance[f],f=b,d[a].geo_distance[b]=c,this)},point:function(b){if(null==b)return e;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return e=b,d[a].geo_distance[f]=b.toJSON(),this},addRange:function(b,c){return 0===arguments.length?d[a].geo_distance.ranges:(d[a].geo_distance.ranges.push({from:b,to:c}),this)},addUnboundedFrom:function(b){return null==b?d[a].geo_distance.ranges:(d[a].geo_distance.ranges.push({from:b}),this)},addUnboundedTo:function(b){return null==b?d[a].geo_distance.ranges:(d[a].geo_distance.ranges.push({to:b}),this)},unit:function(b){return null==b?d[a].geo_distance.unit:(b=b.toLowerCase(),("mi"===b||"km"===b)&&(d[a].geo_distance.unit=b),this)},distanceType:function(b){return null==b?d[a].geo_distance.distance_type:(b=b.toLowerCase(),("arc"===b||"plane"===b)&&(d[a].geo_distance.distance_type=b),this)},normalize:function(b){return null==b?d[a].geo_distance.normalize:(d[a].geo_distance.normalize=b,this)},valueField:function(b){return null==b?d[a].geo_distance.value_field:(d[a].geo_distance.value_field=b,this)},valueScript:function(b){return null==b?d[a].geo_distance.value_script:(d[a].geo_distance.value_script=b,this)},lang:function(b){return null==b?d[a].geo_distance.lang:(d[a].geo_distance.lang=b,this)},params:function(b){return null==b?d[a].geo_distance.params:(d[a].geo_distance.params=b,this)}})},z.HistogramFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].histogram={},c(b,{field:function(b){return null==b?d[a].histogram.field:(d[a].histogram.field=b,this)},interval:function(b){return null==b?d[a].histogram.interval:(d[a].histogram.interval=b,this)},timeInterval:function(b){return null==b?d[a].histogram.time_interval:(d[a].histogram.time_interval=b,this)},from:function(b){return null==b?d[a].histogram.from:(d[a].histogram.from=b,this)},to:function(b){return null==b?d[a].histogram.to:(d[a].histogram.to=b,this)},valueField:function(b){return null==b?d[a].histogram.value_field:(d[a].histogram.value_field=b,this)},keyField:function(b){return null==b?d[a].histogram.key_field:(d[a].histogram.key_field=b,this)},valueScript:function(b){return null==b?d[a].histogram.value_script:(d[a].histogram.value_script=b,this)},keyScript:function(b){return null==b?d[a].histogram.key_script:(d[a].histogram.key_script=b,this)},lang:function(b){return null==b?d[a].histogram.lang:(d[a].histogram.lang=b,this)},params:function(b){return null==b?d[a].histogram.params:(d[a].histogram.params=b,this)},order:function(b){return null==b?d[a].histogram.order:(b=b.toLowerCase(),("key"===b||"count"===b||"total"===b)&&(d[a].histogram.order=b),this)}})},z.QueryFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return c(b,{query:function(b){if(null==b)return d[a].query;if(!l(b))throw new TypeError("Argument must be a Query");return d[a].query=b.toJSON(),this}})},z.RangeFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].range={ranges:[]},c(b,{field:function(b){return null==b?d[a].range.field:(d[a].range.field=b,this)},keyField:function(b){return null==b?d[a].range.key_field:(d[a].range.key_field=b,this)},valueField:function(b){return null==b?d[a].range.value_field:(d[a].range.value_field=b,this)},valueScript:function(b){return null==b?d[a].range.value_script:(d[a].range.value_script=b,this)},keyScript:function(b){return null==b?d[a].range.key_script:(d[a].range.key_script=b,this)},lang:function(b){return null==b?d[a].range.lang:(d[a].range.lang=b,this)},params:function(b){return null==b?d[a].range.params:(d[a].range.params=b,this)},addRange:function(b,c){return 0===arguments.length?d[a].range.ranges:(d[a].range.ranges.push({from:b,to:c}),this)},addUnboundedFrom:function(b){return null==b?d[a].range.ranges:(d[a].range.ranges.push({from:b}),this)},addUnboundedTo:function(b){return null==b?d[a].range.ranges:(d[a].range.ranges.push({to:b}),this)}})},z.StatisticalFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].statistical={},c(b,{field:function(b){return null==b?d[a].statistical.field:(d[a].statistical.field=b,this)},fields:function(b){if(null==b)return d[a].statistical.fields;if(!e(b))throw new TypeError("Argument must be an array");return d[a].statistical.fields=b,this},script:function(b){return null==b?d[a].statistical.script:(d[a].statistical.script=b,this)},lang:function(b){return null==b?d[a].statistical.lang:(d[a].statistical.lang=b,this)},params:function(b){return null==b?d[a].statistical.params:(d[a].statistical.params=b,this)}})},z.TermStatsFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].terms_stats={},c(b,{valueField:function(b){return null==b?d[a].terms_stats.value_field:(d[a].terms_stats.value_field=b,this)},keyField:function(b){return null==b?d[a].terms_stats.key_field:(d[a].terms_stats.key_field=b,this)},scriptField:function(b){return null==b?d[a].terms_stats.script_field:(d[a].terms_stats.script_field=b,this)},valueScript:function(b){return null==b?d[a].terms_stats.value_script:(d[a].terms_stats.value_script=b,this)},allTerms:function(b){return null==b?d[a].terms_stats.all_terms:(d[a].terms_stats.all_terms=b,this)},lang:function(b){return null==b?d[a].terms_stats.lang:(d[a].terms_stats.lang=b,this)},params:function(b){return null==b?d[a].terms_stats.params:(d[a].terms_stats.params=b,this)},size:function(b){return null==b?d[a].terms_stats.size:(d[a].terms_stats.size=b,this)},order:function(b){return null==b?d[a].terms_stats.order:(b=b.toLowerCase(),("count"===b||"term"===b||"reverse_count"===b||"reverse_term"===b||"total"===b||"reverse_total"===b||"min"===b||"reverse_min"===b||"max"===b||"reverse_max"===b||"mean"===b||"reverse_mean"===b)&&(d[a].terms_stats.order=b),this)}})},z.TermsFacet=function(a){var b=z.FacetMixin(a),d=b.toJSON();return d[a].terms={},c(b,{field:function(b){return null==b?d[a].terms.field:(d[a].terms.field=b,this)},fields:function(b){if(null==b)return d[a].terms.fields;if(!e(b))throw new TypeError("Argument must be an array");return d[a].terms.fields=b,this},scriptField:function(b){return null==b?d[a].terms.script_field:(d[a].terms.script_field=b,this)},size:function(b){return null==b?d[a].terms.size:(d[a].terms.size=b,this)},shardSize:function(b){return null==b?d[a].terms.shard_size:(d[a].terms.shard_size=b,this)},order:function(b){return null==b?d[a].terms.order:(b=b.toLowerCase(),("count"===b||"term"===b||"reverse_count"===b||"reverse_term"===b)&&(d[a].terms.order=b),this)},allTerms:function(b){return null==b?d[a].terms.all_terms:(d[a].terms.all_terms=b,this)},exclude:function(b){if(null==d[a].terms.exclude&&(d[a].terms.exclude=[]),null==b)return d[a].terms.exclude;if(g(b))d[a].terms.exclude.push(b);else{if(!e(b))throw new TypeError("Argument must be string or array");d[a].terms.exclude=b}return this},regex:function(b){return null==b?d[a].terms.regex:(d[a].terms.regex=b,this)},regexFlags:function(b){return null==b?d[a].terms.regex_flags:(d[a].terms.regex_flags=b,this)},script:function(b){return null==b?d[a].terms.script:(d[a].terms.script=b,this)},lang:function(b){return null==b?d[a].terms.lang:(d[a].terms.lang=b,this)},params:function(b){return null==b?d[a].terms.params:(d[a].terms.params=b,this)},executionHint:function(b){return null==b?d[a].terms.execution_hint:(d[a].terms.execution_hint=b,this)}})},z.AvgAggregation=function(a){var b=z.MetricsAggregationMixin(a,"avg");b.toJSON();return b},z.CardinalityAggregation=function(a){var b=z.MetricsAggregationMixin(a,"cardinality"),d=b.toJSON();return delete b.scriptValuesSorted,c(b,{rehash:function(b){return null==b?d[a].cardinality.rehash:(d[a].cardinality.rehash=b,this)},precisionThreshold:function(b){return null==b?d[a].cardinality.precision_threshold:(d[a].cardinality.precision_threshold=b,this)}})},z.DateHistogramAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].date_histogram={},c(b,{field:function(b){return null==b?d[a].date_histogram.field:(d[a].date_histogram.field=b,this)},script:function(b){return null==b?d[a].date_histogram.script:(d[a].date_histogram.script=b,this)},lang:function(b){return null==b?d[a].date_histogram.lang:(d[a].date_histogram.lang=b,this)},timeZone:function(b){return null==b?d[a].date_histogram.time_zone:(d[a].date_histogram.time_zone=b,this)},preZone:function(b){return null==b?d[a].date_histogram.pre_zone:(d[a].date_histogram.pre_zone=b,this)},postZone:function(b){return null==b?d[a].date_histogram.post_zone:(d[a].date_histogram.post_zone=b,this)},preOffset:function(b){return null==b?d[a].date_histogram.pre_offset:(d[a].date_histogram.pre_offset=b,this)},postOffset:function(b){return null==b?d[a].date_histogram.post_offset:(d[a].date_histogram.post_offset=b,this)},extendedBounds:function(b,c){var e;return null==b&&null==c?d[a].date_histogram.extended_bounds:(e={},null!=b&&(e.min=b),null!=c&&(e.max=c),d[a].date_histogram.extended_bounds=e,this)},interval:function(b){return null==b?d[a].date_histogram.interval:(d[a].date_histogram.interval=b,this)},format:function(b){return null==b?d[a].date_histogram.format:(d[a].date_histogram.format=b,this)},keyed:function(b){return null==b?d[a].date_histogram.keyed:(d[a].date_histogram.keyed=b,this)},scriptValuesSorted:function(b){return null==b?d[a].date_histogram.script_values_sorted:(d[a].date_histogram.script_values_sorted=b,this)},preZoneAdjustLargeInterval:function(b){return null==b?d[a].date_histogram.pre_zone_adjust_large_interval:(d[a].date_histogram.pre_zone_adjust_large_interval=b,this)},minDocCount:function(b){return null==b?d[a].date_histogram.min_doc_count:(d[a].date_histogram.min_doc_count=b,this)},params:function(b){return null==b?d[a].date_histogram.params:(d[a].date_histogram.params=b,this)},order:function(b,c){return null==b?d[a].date_histogram.order:(null==c&&(c="desc"),c=c.toLowerCase(),"asc"!==c&&"desc"!==c&&(c="desc"),d[a].date_histogram.order={},d[a].date_histogram.order[b]=c,this)}})},z.DateRangeAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].date_range={},c(b,{field:function(b){return null==b?d[a].date_range.field:(d[a].date_range.field=b,this)},script:function(b){return null==b?d[a].date_range.script:(d[a].date_range.script=b,this)},lang:function(b){return null==b?d[a].date_range.lang:(d[a].date_range.lang=b,this)},format:function(b){return null==b?d[a].date_range.format:(d[a].date_range.format=b,this)},range:function(b,c,e){var f={};return null==d[a].date_range.ranges&&(d[a].date_range.ranges=[]),null==b&&null==c?d[a].date_range.ranges:(null!=b&&(f.from=b),null!=c&&(f.to=c),null!=e&&(f.key=e),d[a].date_range.ranges.push(f),this)},keyed:function(b){return null==b?d[a].date_range.keyed:(d[a].date_range.keyed=b,this)},scriptValuesSorted:function(b){return null==b?d[a].date_range.script_values_sorted:(d[a].date_range.script_values_sorted=b,this)},params:function(b){return null==b?d[a].date_range.params:(d[a].date_range.params=b,this)}})},z.ExtendedStatsAggregation=function(a){var b=z.MetricsAggregationMixin(a,"extended_stats");b.toJSON();return b},z.FilterAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return c(b,{filter:function(b){if(null==b)return d[a].filter;if(!n(b))throw new TypeError("Argument must be a Filter");return d[a].filter=b.toJSON(),this}})},z.GeoDistanceAggregation=function(a){var b=z.AggregationMixin(a),d=z.GeoPoint([0,0]),e=b.toJSON();return e[a].geo_distance={},c(b,{field:function(b){return null==b?e[a].geo_distance.field:(e[a].geo_distance.field=b,this)},unit:function(b){return null==b?e[a].geo_distance.unit:(("in"===b||"yd"===b||"ft"===b||"km"===b||"NM"===b||"mm"===b||"cm"===b||"mi"===b||"m"===b)&&(e[a].geo_distance.unit=b),this)},distanceType:function(b){return null==b?e[a].geo_distance.distance_type:(b=b.toLowerCase(),("plane"===b||"arc"===b||"sloppy_arc"===b||"factor"===b)&&(e[a].geo_distance.distance_type=b),this)},origin:function(b){if(null==b)return d;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d=b,e[a].geo_distance.origin=b.toJSON(),this},point:function(b){if(null==b)return d;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d=b,e[a].geo_distance.point=b.toJSON(),this},center:function(b){if(null==b)return d;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d=b,e[a].geo_distance.center=b.toJSON(),this},range:function(b,c,d){var f={};return null==e[a].geo_distance.ranges&&(e[a].geo_distance.ranges=[]),null==b&&null==c?e[a].geo_distance.ranges:(null!=b&&(f.from=b),null!=c&&(f.to=c),null!=d&&(f.key=d),e[a].geo_distance.ranges.push(f),this)},keyed:function(b){return null==b?e[a].geo_distance.keyed:(e[a].geo_distance.keyed=b,this)}})},z.GeoHashGridAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].geohash_grid={},c(b,{field:function(b){return null==b?d[a].geohash_grid.field:(d[a].geohash_grid.field=b,this)},precision:function(b){return null==b?d[a].geohash_grid.precision:(d[a].geohash_grid.precision=b,this)},size:function(b){return null==b?d[a].geohash_grid.size:(d[a].geohash_grid.size=b,this)},shardSize:function(b){return null==b?d[a].geohash_grid.shard_size:(d[a].geohash_grid.shard_size=b,this)}})},z.GlobalAggregation=function(a){var b=z.AggregationMixin(a),c=b.toJSON();return c[a].global={},b},z.HistogramAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].histogram={},c(b,{field:function(b){return null==b?d[a].histogram.field:(d[a].histogram.field=b,this)},script:function(b){return null==b?d[a].histogram.script:(d[a].histogram.script=b,this)},lang:function(b){return null==b?d[a].histogram.lang:(d[a].histogram.lang=b,this)},format:function(b){return null==b?d[a].histogram.format:(d[a].histogram.format=b,this)},extendedBounds:function(b,c){var e;return null==b&&null==c?d[a].histogram.extended_bounds:(e={},null!=b&&(e.min=b),null!=c&&(e.max=c),d[a].histogram.extended_bounds=e,this)},interval:function(b){return null==b?d[a].histogram.interval:(d[a].histogram.interval=b,this)},minDocCount:function(b){return null==b?d[a].histogram.min_doc_count:(d[a].histogram.min_doc_count=b,this)},keyed:function(b){return null==b?d[a].histogram.keyed:(d[a].histogram.keyed=b,this)},scriptValuesSorted:function(b){return null==b?d[a].histogram.script_values_sorted:(d[a].histogram.script_values_sorted=b,this)},params:function(b){return null==b?d[a].histogram.params:(d[a].histogram.params=b,this)},order:function(b,c){return null==b?d[a].histogram.order:(null==c&&(c="desc"),c=c.toLowerCase(),"asc"!==c&&"desc"!==c&&(c="desc"),d[a].histogram.order={},d[a].histogram.order[b]=c,this)}})},z.IPv4RangeAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].ip_range={},c(b,{field:function(b){return null==b?d[a].ip_range.field:(d[a].ip_range.field=b,this)},script:function(b){return null==b?d[a].ip_range.script:(d[a].ip_range.script=b,this)},lang:function(b){return null==b?d[a].ip_range.lang:(d[a].ip_range.lang=b,this)},range:function(b,c,e,f){var g={};return null==d[a].ip_range.ranges&&(d[a].ip_range.ranges=[]),null==b&&null==c&&null==e?d[a].ip_range.ranges:(null!=b&&(g.from=b),null!=c&&(g.to=c),null!=e&&(g.mask=e),null!=f&&(g.key=f),d[a].ip_range.ranges.push(g),this)},keyed:function(b){return null==b?d[a].ip_range.keyed:(d[a].ip_range.keyed=b,this)},scriptValuesSorted:function(b){return null==b?d[a].ip_range.script_values_sorted:(d[a].ip_range.script_values_sorted=b,this)},params:function(b){return null==b?d[a].ip_range.params:(d[a].ip_range.params=b,this)}})},z.MaxAggregation=function(a){var b=z.MetricsAggregationMixin(a,"max");b.toJSON();return b},z.MinAggregation=function(a){var b=z.MetricsAggregationMixin(a,"min");b.toJSON();return b},z.MissingAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].missing={},c(b,{field:function(b){return null==b?d[a].missing.field:(d[a].missing.field=b,this)}})},z.NestedAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].nested={},c(b,{path:function(b){return null==b?d[a].nested.path:(d[a].nested.path=b,this)}})},z.PercentilesAggregation=function(a){var b=z.MetricsAggregationMixin(a,"percentiles"),d=b.toJSON();return c(b,{keyed:function(b){return null==b?d[a].percentiles.keyed:(d[a].percentiles.keyed=b,this)},percents:function(b){if(null==b)return d[a].percentiles.percents;if(!e(b))throw new TypeError("Percents must be an array of doubles");return d[a].percentiles.percents=b,this},percent:function(b){return null==d[a].percentiles.percents&&(d[a].percentiles.percents=[]),null==b?d[a].percentiles.percents:(d[a].percentiles.percents.push(b),this)},compression:function(b){return null==b?d[a].percentiles.compression:(d[a].percentiles.compression=b,this)}})},z.RangeAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].range={},c(b,{field:function(b){return null==b?d[a].range.field:(d[a].range.field=b,this)},script:function(b){return null==b?d[a].range.script:(d[a].range.script=b,this)},lang:function(b){return null==b?d[a].range.lang:(d[a].range.lang=b,this)},range:function(b,c,e){var f={};return null==d[a].range.ranges&&(d[a].range.ranges=[]),null==b&&null==c?d[a].range.ranges:(null!=b&&(f.from=b),null!=c&&(f.to=c),null!=e&&(f.key=e),d[a].range.ranges.push(f),this)},keyed:function(b){return null==b?d[a].range.keyed:(d[a].range.keyed=b,this)},scriptValuesSorted:function(b){return null==b?d[a].range.script_values_sorted:(d[a].range.script_values_sorted=b,this)},params:function(b){return null==b?d[a].range.params:(d[a].range.params=b,this)}})},z.SignificantTermsAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].significant_terms={},c(b,{field:function(b){return null==b?d[a].significant_terms.field:(d[a].significant_terms.field=b,this)},format:function(b){return null==b?d[a].significant_terms.format:(d[a].significant_terms.format=b,this)},include:function(b,c){return null==d[a].significant_terms.include&&(d[a].significant_terms.include={}),null==b?d[a].significant_terms.include:(d[a].significant_terms.include.pattern=b,null!=c&&(d[a].significant_terms.include.flags=c),this)},exclude:function(b,c){return null==d[a].significant_terms.exclude&&(d[a].significant_terms.exclude={}),null==b?d[a].significant_terms.exclude:(d[a].significant_terms.exclude.pattern=b,null!=c&&(d[a].significant_terms.exclude.flags=c),this)},executionHint:function(b){return null==b?d[a].significant_terms.execution_hint:(b=b.toLowerCase(),("map"===b||"ordinals"===b)&&(d[a].significant_terms.execution_hint=b),this)},size:function(b){return null==b?d[a].significant_terms.size:(d[a].significant_terms.size=b,this)},shardSize:function(b){return null==b?d[a].significant_terms.shard_size:(d[a].significant_terms.shard_size=b,this)},minDocCount:function(b){return null==b?d[a].significant_terms.min_doc_count:(d[a].significant_terms.min_doc_count=b,this)}})},z.StatsAggregation=function(a){var b=z.MetricsAggregationMixin(a,"stats");b.toJSON();return b},z.SumAggregation=function(a){var b=z.MetricsAggregationMixin(a,"sum");b.toJSON();return b},z.TermsAggregation=function(a){var b=z.AggregationMixin(a),d=b.toJSON();return d[a].terms={},c(b,{field:function(b){return null==b?d[a].terms.field:(d[a].terms.field=b,this)},script:function(b){return null==b?d[a].terms.script:(d[a].terms.script=b,this)},lang:function(b){return null==b?d[a].terms.lang:(d[a].terms.lang=b,this)},valueType:function(b){return null==b?d[a].terms.value_type:(b=b.toLowerCase(),("string"===b||"double"===b||"float"===b||"long"===b||"integer"===b||"short"===b||"byte"===b)&&(d[a].terms.value_type=b),this)},format:function(b){return null==b?d[a].terms.format:(d[a].terms.format=b,this)},include:function(b,c){return null==d[a].terms.include&&(d[a].terms.include={}),null==b?d[a].terms.include:(d[a].terms.include.pattern=b,null!=c&&(d[a].terms.include.flags=c),this)},exclude:function(b,c){return null==d[a].terms.exclude&&(d[a].terms.exclude={}),null==b?d[a].terms.exclude:(d[a].terms.exclude.pattern=b,null!=c&&(d[a].terms.exclude.flags=c),this)},executionHint:function(b){return null==b?d[a].terms.execution_hint:(b=b.toLowerCase(),("map"===b||"ordinals"===b)&&(d[a].terms.execution_hint=b),this)},scriptValuesUnique:function(b){return null==b?d[a].terms.script_values_unique:(d[a].terms.script_values_unique=b,this)},size:function(b){return null==b?d[a].terms.size:(d[a].terms.size=b,this)},shardSize:function(b){return null==b?d[a].terms.shard_size:(d[a].terms.shard_size=b,this)},minDocCount:function(b){return null==b?d[a].terms.min_doc_count:(d[a].terms.min_doc_count=b,this)},params:function(b){return null==b?d[a].terms.params:(d[a].terms.params=b,this)},order:function(b,c){return null==b?d[a].terms.order:(null==c&&(c="desc"),c=c.toLowerCase(),"asc"!==c&&"desc"!==c&&(c="desc"),d[a].terms.order={},d[a].terms.order[b]=c,this)}})},z.ValueCountAggregation=function(a){var b=z.MetricsAggregationMixin(a,"value_count"),d=b.toJSON();return delete b.scriptValuesSorted,c(b,{scriptValuesUnique:function(b){return null==b?d[a].value_count.script_values_unique:(d[a].value_count.script_values_unique=b,this)}})},z.AndFilter=function(a){var b,d,f=z.FilterMixin("and"),g=f.toJSON();if(g.and.filters=[],n(a))g.and.filters.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or Array of Filters");for(b=0,d=a.length;d>b;b++){if(!n(a[b]))throw new TypeError("Array must contain only Filter objects");g.and.filters.push(a[b].toJSON())}}return c(f,{filters:function(a){var b,c;if(null==a)return g.and.filters;if(n(a))g.and.filters.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or an Array of Filters");for(g.and.filters=[],b=0,c=a.length;c>b;b++){if(!n(a[b]))throw new TypeError("Array must contain only Filter objects");g.and.filters.push(a[b].toJSON())}}return this}})},z.BoolFilter=function(){var a=z.FilterMixin("bool"),b=a.toJSON();return c(a,{must:function(a){var c,d;if(null==b.bool.must&&(b.bool.must=[]),null==a)return b.bool.must;if(n(a))b.bool.must.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b.bool.must=[],c=0,d=a.length;d>c;c++){if(!n(a[c]))throw new TypeError("Argument must be an array of Filters");b.bool.must.push(a[c].toJSON())}}return this},mustNot:function(a){var c,d;if(null==b.bool.must_not&&(b.bool.must_not=[]),null==a)return b.bool.must_not;if(n(a))b.bool.must_not.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b.bool.must_not=[],c=0,d=a.length;d>c;c++){if(!n(a[c]))throw new TypeError("Argument must be an array of Filters");b.bool.must_not.push(a[c].toJSON())}}return this},should:function(a){var c,d;if(null==b.bool.should&&(b.bool.should=[]),null==a)return b.bool.should;if(n(a))b.bool.should.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b.bool.should=[],c=0,d=a.length;d>c;c++){if(!n(a[c]))throw new TypeError("Argument must be an array of Filters");b.bool.should.push(a[c].toJSON())}}return this}})},z.ExistsFilter=function(a){var b=z.FilterMixin("exists"),d=b.toJSON();return d.exists.field=a,c(b,{field:function(a){return null==a?d.exists.field:(d.exists.field=a,this)}})},z.GeoBboxFilter=function(a){var b=z.FilterMixin("geo_bounding_box"),d=b.toJSON();return d.geo_bounding_box[a]={},c(b,{field:function(b){var c=d.geo_bounding_box[a];return null==b?a:(delete d.geo_bounding_box[a],a=b,d.geo_bounding_box[b]=c,this)},topLeft:function(b){if(null==b)return d.geo_bounding_box[a].top_left;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d.geo_bounding_box[a].top_left=b.toJSON(),this},bottomRight:function(b){if(null==b)return d.geo_bounding_box[a].bottom_right;if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d.geo_bounding_box[a].bottom_right=b.toJSON(),this},type:function(a){return null==a?d.geo_bounding_box.type:(a=a.toLowerCase(),("memory"===a||"indexed"===a)&&(d.geo_bounding_box.type=a),this)},normalize:function(a){return null==a?d.geo_bounding_box.normalize:(d.geo_bounding_box.normalize=a,this)}})},z.GeoDistanceFilter=function(a){var b=z.FilterMixin("geo_distance"),d=b.toJSON();return d.geo_distance[a]=[0,0],c(b,{field:function(b){var c=d.geo_distance[a];return null==b?a:(delete d.geo_distance[a],a=b,d.geo_distance[b]=c,this)},distance:function(a){if(null==a)return d.geo_distance.distance;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance.distance=a,this},unit:function(a){return null==a?d.geo_distance.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(d.geo_distance.unit=a),this)},point:function(b){if(null==b)return d.geo_distance[a];if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d.geo_distance[a]=b.toJSON(),this},distanceType:function(a){return null==a?d.geo_distance.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(d.geo_distance.distance_type=a),this)},normalize:function(a){return null==a?d.geo_distance.normalize:(d.geo_distance.normalize=a,this)},optimizeBbox:function(a){return null==a?d.geo_distance.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(d.geo_distance.optimize_bbox=a),this)}})},z.GeoDistanceRangeFilter=function(a){var b=z.FilterMixin("geo_distance_range"),d=b.toJSON();return d.geo_distance_range[a]=[0,0],c(b,{field:function(b){var c=d.geo_distance_range[a];return null==b?a:(delete d.geo_distance_range[a],a=b,d.geo_distance_range[b]=c,this)},from:function(a){if(null==a)return d.geo_distance_range.from;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.from=a,this},to:function(a){if(null==a)return d.geo_distance_range.to;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.to=a,this},includeLower:function(a){return null==a?d.geo_distance_range.include_lower:(d.geo_distance_range.include_lower=a,this)},includeUpper:function(a){return null==a?d.geo_distance_range.include_upper:(d.geo_distance_range.include_upper=a,this)},gt:function(a){if(null==a)return d.geo_distance_range.gt;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.gt=a,this},gte:function(a){if(null==a)return d.geo_distance_range.gte;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.gte=a,this},lt:function(a){if(null==a)return d.geo_distance_range.lt;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.lt=a,this},lte:function(a){if(null==a)return d.geo_distance_range.lte;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.geo_distance_range.lte=a,this},unit:function(a){return null==a?d.geo_distance_range.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(d.geo_distance_range.unit=a),this)},point:function(b){if(null==b)return d.geo_distance_range[a];if(!r(b))throw new TypeError("Argument must be a GeoPoint");return d.geo_distance_range[a]=b.toJSON(),this},distanceType:function(a){return null==a?d.geo_distance_range.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(d.geo_distance_range.distance_type=a),this)},normalize:function(a){return null==a?d.geo_distance_range.normalize:(d.geo_distance_range.normalize=a,this)},optimizeBbox:function(a){return null==a?d.geo_distance_range.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(d.geo_distance_range.optimize_bbox=a),this)}})},z.GeoPolygonFilter=function(a){var b=z.FilterMixin("geo_polygon"),d=b.toJSON();return d.geo_polygon[a]={points:[]},c(b,{field:function(b){var c=d.geo_polygon[a];return null==b?a:(delete d.geo_polygon[a],a=b,d.geo_polygon[b]=c,this)},points:function(b){var c,f;if(null==b)return d.geo_polygon[a].points;if(r(b))d.geo_polygon[a].points.push(b.toJSON());else{if(!e(b))throw new TypeError("Argument must be a GeoPoint or Array of GeoPoints");for(d.geo_polygon[a].points=[],c=0,f=b.length;f>c;c++){if(!r(b[c]))throw new TypeError("Argument must be Array of GeoPoints");d.geo_polygon[a].points.push(b[c].toJSON())}}return this},normalize:function(a){return null==a?d.geo_polygon.normalize:(d.geo_polygon.normalize=a,this)}})},z.GeoShapeFilter=function(a){var b=z.FilterMixin("geo_shape"),d=b.toJSON();return d.geo_shape[a]={},c(b,{field:function(b){var c=d.geo_shape[a];return null==b?a:(delete d.geo_shape[a],a=b,d.geo_shape[b]=c,this)},shape:function(b){return null==b?d.geo_shape[a].shape:(null!=d.geo_shape[a].indexed_shape&&delete d.geo_shape[a].indexed_shape,d.geo_shape[a].shape=b.toJSON(),this)},indexedShape:function(b){return null==b?d.geo_shape[a].indexed_shape:(null!=d.geo_shape[a].shape&&delete d.geo_shape[a].shape,d.geo_shape[a].indexed_shape=b.toJSON(),this)},relation:function(b){return null==b?d.geo_shape[a].relation:(b=b.toLowerCase(),("intersects"===b||"disjoint"===b||"within"===b)&&(d.geo_shape[a].relation=b),this)},strategy:function(b){return null==b?d.geo_shape[a].strategy:(b=b.toLowerCase(),("recursive"===b||"term"===b)&&(d.geo_shape[a].strategy=b),this)}})},z.HasChildFilter=function(a,b){if(!l(a))throw new TypeError("No Query object found");var d=z.FilterMixin("has_child"),e=d.toJSON();return e.has_child.query=a.toJSON(),e.has_child.type=b,c(d,{query:function(a){if(null==a)return e.has_child.query;if(!l(a))throw new TypeError("Argument must be a Query object");return e.has_child.query=a.toJSON(),this},filter:function(a){if(null==a)return e.has_child.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return e.has_child.filter=a.toJSON(),this},type:function(a){return null==a?e.has_child.type:(e.has_child.type=a,this)},shortCircuitCutoff:function(a){return null==a?e.has_child.short_circuit_cutoff:(e.has_child.short_circuit_cutoff=a,this)},scope:function(a){return this}})},z.HasParentFilter=function(a,b){if(!l(a))throw new TypeError("No Query object found");var d=z.FilterMixin("has_parent"),e=d.toJSON();return e.has_parent.query=a.toJSON(),e.has_parent.parent_type=b,c(d,{query:function(a){if(null==a)return e.has_parent.query;if(!l(a))throw new TypeError("Argument must be a Query object");return e.has_parent.query=a.toJSON(),this},filter:function(a){if(null==a)return e.has_parent.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return e.has_parent.filter=a.toJSON(),this},parentType:function(a){return null==a?e.has_parent.parent_type:(e.has_parent.parent_type=a,this)},scope:function(a){return this}})},z.IdsFilter=function(a){var b=z.FilterMixin("ids"),d=b.toJSON();if(g(a))d.ids.values=[a];else{if(!e(a))throw new TypeError("Argument must be a string or an array");d.ids.values=a}return c(b,{values:function(a){if(null==a)return d.ids.values;if(g(a))d.ids.values.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or an array");d.ids.values=a}return this},type:function(a){if(null==d.ids.type&&(d.ids.type=[]),null==a)return d.ids.type;if(g(a))d.ids.type.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or an array");d.ids.type=a}return this}})},z.IndicesFilter=function(a,b){if(!n(a))throw new TypeError("Argument must be a Filter");var d=z.FilterMixin("indices"),f=d.toJSON();if(f.indices.filter=a.toJSON(),g(b))f.indices.indices=[b];else{if(!e(b))throw new TypeError("Argument must be a string or array");f.indices.indices=b}return c(d,{indices:function(a){if(null==a)return f.indices.indices;
if(g(a))f.indices.indices.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or array");f.indices.indices=a}return this},filter:function(a){if(null==a)return f.indices.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return f.indices.filter=a.toJSON(),this},noMatchFilter:function(a){if(null==a)return f.indices.no_match_filter;if(g(a))a=a.toLowerCase(),("none"===a||"all"===a)&&(f.indices.no_match_filter=a);else{if(!n(a))throw new TypeError("Argument must be string or Filter");f.indices.no_match_filter=a.toJSON()}return this}})},z.LimitFilter=function(a){var b=z.FilterMixin("limit"),d=b.toJSON();return d.limit.value=a,c(b,{value:function(a){if(null==a)return d.limit.value;if(!h(a))throw new TypeError("Argument must be a numeric value");return d.limit.value=a,this}})},z.MatchAllFilter=function(){return z.FilterMixin("match_all")},z.MissingFilter=function(a){var b=z.FilterMixin("missing"),d=b.toJSON();return d.missing.field=a,c(b,{field:function(a){return null==a?d.missing.field:(d.missing.field=a,this)},existence:function(a){return null==a?d.missing.existence:(d.missing.existence=a,this)},nullValue:function(a){return null==a?d.missing.null_value:(d.missing.null_value=a,this)}})},z.NestedFilter=function(a){var b=z.FilterMixin("nested"),d=b.toJSON();return d.nested.path=a,c(b,{path:function(a){return null==a?d.nested.path:(d.nested.path=a,this)},query:function(a){if(null==a)return d.nested.query;if(!l(a))throw new TypeError("Argument must be a Query object");return d.nested.query=a.toJSON(),this},filter:function(a){if(null==a)return d.nested.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return d.nested.filter=a.toJSON(),this},boost:function(a){return null==a?d.nested.boost:(d.nested.boost=a,this)},join:function(a){return null==a?d.nested.join:(d.nested.join=a,this)},scope:function(a){return this}})},z.NotFilter=function(a){if(!n(a))throw new TypeError("Argument must be a Filter");var b=z.FilterMixin("not"),d=b.toJSON();return d.not=a.toJSON(),c(b,{filter:function(a){if(null==a)return d.not;if(!n(a))throw new TypeError("Argument must be a Filter");return d.not=a.toJSON(),this}})},z.NumericRangeFilter=function(a){var b=z.FilterMixin("numeric_range"),d=b.toJSON();return d.numeric_range[a]={},c(b,{field:function(b){var c=d.numeric_range[a];return null==b?a:(delete d.numeric_range[a],a=b,d.numeric_range[a]=c,this)},from:function(b){if(null==b)return d.numeric_range[a].from;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].from=b,this},to:function(b){if(null==b)return d.numeric_range[a].to;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].to=b,this},includeLower:function(b){return null==b?d.numeric_range[a].include_lower:(d.numeric_range[a].include_lower=b,this)},includeUpper:function(b){return null==b?d.numeric_range[a].include_upper:(d.numeric_range[a].include_upper=b,this)},gt:function(b){if(null==b)return d.numeric_range[a].gt;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].gt=b,this},gte:function(b){if(null==b)return d.numeric_range[a].gte;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].gte=b,this},lt:function(b){if(null==b)return d.numeric_range[a].lt;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].lt=b,this},lte:function(b){if(null==b)return d.numeric_range[a].lte;if(!h(b))throw new TypeError("Argument must be a numeric value");return d.numeric_range[a].lte=b,this}})},z.OrFilter=function(a){var b,d,f=z.FilterMixin("or"),g=f.toJSON();if(g.or.filters=[],n(a))g.or.filters.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b=0,d=a.length;d>b;b++){if(!n(a[b]))throw new TypeError("Argument must be array of Filters");g.or.filters.push(a[b].toJSON())}}return c(f,{filters:function(a){var b,c;if(null==a)return g.or.filters;if(n(a))g.or.filters.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Filter or array of Filters");for(g.or.filters=[],b=0,c=a.length;c>b;b++){if(!n(a[b]))throw new TypeError("Argument must be an array of Filters");g.or.filters.push(a[b].toJSON())}}return this}})},z.PrefixFilter=function(a,b){var d=z.FilterMixin("prefix"),e=d.toJSON();return e.prefix[a]=b,c(d,{field:function(b){var c=e.prefix[a];return null==b?a:(delete e.prefix[a],a=b,e.prefix[a]=c,this)},prefix:function(b){return null==b?e.prefix[a]:(e.prefix[a]=b,this)}})},z.QueryFilter=function(a){if(!l(a))throw new TypeError("Argument must be a Query");var b=z.FilterMixin("fquery"),d=b.toJSON();return d.fquery.query=a.toJSON(),c(b,{query:function(a){if(null==a)return d.fquery.query;if(!l(a))throw new TypeError("Argument must be a Query");return d.fquery.query=a.toJSON(),this}})},z.RangeFilter=function(a){var b=z.FilterMixin("range"),d=b.toJSON();return d.range[a]={},c(b,{field:function(b){var c=d.range[a];return null==b?a:(delete d.range[a],a=b,d.range[b]=c,this)},from:function(b){return null==b?d.range[a].from:(d.range[a].from=b,this)},to:function(b){return null==b?d.range[a].to:(d.range[a].to=b,this)},includeLower:function(b){return null==b?d.range[a].include_lower:(d.range[a].include_lower=b,this)},includeUpper:function(b){return null==b?d.range[a].include_upper:(d.range[a].include_upper=b,this)},gt:function(b){return null==b?d.range[a].gt:(d.range[a].gt=b,this)},gte:function(b){return null==b?d.range[a].gte:(d.range[a].gte=b,this)},lt:function(b){return null==b?d.range[a].lt:(d.range[a].lt=b,this)},lte:function(b){return null==b?d.range[a].lte:(d.range[a].lte=b,this)}})},z.RegexpFilter=function(a,b){var d=z.FilterMixin("regexp"),e=d.toJSON();return e.regexp[a]={value:b},c(d,{field:function(b){var c=e.regexp[a];return null==b?a:(delete e.regexp[a],a=b,e.regexp[b]=c,this)},value:function(b){return null==b?e.regexp[a].value:(e.regexp[a].value=b,this)},flags:function(b){return null==b?e.regexp[a].flags:(e.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?e.regexp[a].flags_value:(e.regexp[a].flags_value=b,this)}})},z.ScriptFilter=function(a){var b=z.FilterMixin("script"),d=b.toJSON();return d.script.script=a,c(b,{script:function(a){return null==a?d.script.script:(d.script.script=a,this)},params:function(a){return null==a?d.script.params:(d.script.params=a,this)},lang:function(a){return null==a?d.script.lang:(d.script.lang=a,this)}})},z.TermFilter=function(a,b){var d=z.FilterMixin("term"),e=d.toJSON();return e.term[a]=b,c(d,{field:function(b){var c=e.term[a];return null==b?a:(delete e.term[a],a=b,e.term[a]=c,this)},term:function(b){return null==b?e.term[a]:(e.term[a]=b,this)}})},z.TermsFilter=function(a,b){var d=z.FilterMixin("terms"),f=d.toJSON(),g=function(){e(f.terms[a])||(f.terms[a]=[])},h=function(){e(f.terms[a])&&(f.terms[a]={})};return e(b)?f.terms[a]=b:f.terms[a]=[b],c(d,{field:function(b){var c=f.terms[a];return null==b?a:(delete f.terms[a],a=b,f.terms[b]=c,this)},terms:function(b){return g(),null==b?f.terms[a]:(e(b)?f.terms[a]=b:f.terms[a].push(b),this)},index:function(b){return h(),null==b?f.terms[a].index:(f.terms[a].index=b,this)},type:function(b){return h(),null==b?f.terms[a].type:(f.terms[a].type=b,this)},id:function(b){return h(),null==b?f.terms[a].id:(f.terms[a].id=b,this)},path:function(b){return h(),null==b?f.terms[a].path:(f.terms[a].path=b,this)},routing:function(b){return h(),null==b?f.terms[a].routing:(f.terms[a].routing=b,this)},cacheLookup:function(b){return h(),null==b?f.terms[a].cache:(f.terms[a].cache=b,this)},execution:function(a){return null==a?f.terms.execution:(a=a.toLowerCase(),("plain"===a||"bool"===a||"bool_nocache"===a||"and"===a||"and_nocache"===a||"or"===a||"or_nocache"===a)&&(f.terms.execution=a),this)}})},z.TypeFilter=function(a){var b=z.FilterMixin("type"),d=b.toJSON();return d.type.value=a,c(b,{type:function(a){return null==a?d.type.value:(d.type.value=a,this)}})},z.BoolQuery=function(){var a=z.QueryMixin("bool"),b=a.toJSON();return c(a,{must:function(a){var c,d;if(null==b.bool.must&&(b.bool.must=[]),null==a)return b.bool.must;if(l(a))b.bool.must.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Query or array of Queries");for(b.bool.must=[],c=0,d=a.length;d>c;c++){if(!l(a[c]))throw new TypeError("Argument must be an array of Queries");b.bool.must.push(a[c].toJSON())}}return this},mustNot:function(a){var c,d;if(null==b.bool.must_not&&(b.bool.must_not=[]),null==a)return b.bool.must_not;if(l(a))b.bool.must_not.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Query or array of Queries");for(b.bool.must_not=[],c=0,d=a.length;d>c;c++){if(!l(a[c]))throw new TypeError("Argument must be an array of Queries");b.bool.must_not.push(a[c].toJSON())}}return this},should:function(a){var c,d;if(null==b.bool.should&&(b.bool.should=[]),null==a)return b.bool.should;if(l(a))b.bool.should.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Query or array of Queries");for(b.bool.should=[],c=0,d=a.length;d>c;c++){if(!l(a[c]))throw new TypeError("Argument must be an array of Queries");b.bool.should.push(a[c].toJSON())}}return this},adjustPureNegative:function(a){return null==a?b.bool.adjust_pure_negative:(b.bool.adjust_pure_negative=a,this)},disableCoord:function(a){return null==a?b.bool.disable_coord:(b.bool.disable_coord=a,this)},minimumNumberShouldMatch:function(a){return null==a?b.bool.minimum_number_should_match:(b.bool.minimum_number_should_match=a,this)}})},z.BoostingQuery=function(a,b,d){if(!l(a)||!l(b))throw new TypeError("Arguments must be Queries");var e=z.QueryMixin("boosting"),f=e.toJSON();return f.boosting.positive=a.toJSON(),f.boosting.negative=b.toJSON(),f.boosting.negative_boost=d,c(e,{positive:function(a){if(null==a)return f.boosting.positive;if(!l(a))throw new TypeError("Argument must be a Query");return f.boosting.positive=a.toJSON(),this},negative:function(a){if(null==a)return f.boosting.negative;if(!l(a))throw new TypeError("Argument must be a Query");return f.boosting.negative=a.toJSON(),this},negativeBoost:function(a){return null==a?f.boosting.negative_boost:(f.boosting.negative_boost=a,this)}})},z.CommonTermsQuery=function(a,b){var d=z.QueryMixin("common"),e=d.toJSON();return null==a&&(a="no_field_set"),e.common[a]={},null!=b&&(e.common[a].query=b),c(d,{field:function(b){var c=e.common[a];return null==b?a:(delete e.common[a],a=b,e.common[b]=c,this)},query:function(b){return null==b?e.common[a].query:(e.common[a].query=b,this)},analyzer:function(b){return null==b?e.common[a].analyzer:(e.common[a].analyzer=b,this)},disableCoord:function(b){return null==b?e.common[a].disable_coord:(e.common[a].disable_coord=b,this)},cutoffFrequency:function(b){return null==b?e.common[a].cutoff_frequency:(e.common[a].cutoff_frequency=b,this)},highFreqOperator:function(b){return null==b?e.common[a].high_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(e.common[a].high_freq_operator=b),this)},lowFreqOperator:function(b){return null==b?e.common[a].low_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(e.common[a].low_freq_operator=b),this)},minimumShouldMatch:function(b){return null==b?e.common[a].minimum_should_match.low_freq:(null==e.common[a].minimum_should_match&&(e.common[a].minimum_should_match={}),e.common[a].minimum_should_match.low_freq=b,this)},minimumShouldMatchLowFreq:function(a){return this.minimumShouldMatch(a)},minimumShouldMatchHighFreq:function(b){return null==b?e.common[a].minimum_should_match.high_freq:(null==e.common[a].minimum_should_match&&(e.common[a].minimum_should_match={}),e.common[a].minimum_should_match.high_freq=b,this)},boost:function(b){return null==b?e.common[a].boost:(e.common[a].boost=b,this)}})},z.ConstantScoreQuery=function(){var a=z.QueryMixin("constant_score"),b=a.toJSON();return c(a,{query:function(a){if(null==a)return b.constant_score.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.constant_score.query=a.toJSON(),this},filter:function(a){if(null==a)return b.constant_score.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b.constant_score.filter=a.toJSON(),this},cache:function(a){return null==a?b.constant_score._cache:(b.constant_score._cache=a,this)},cacheKey:function(a){return null==a?b.constant_score._cache_key:(b.constant_score._cache_key=a,this)}})},z.DisMaxQuery=function(){var a=z.QueryMixin("dis_max"),b=a.toJSON();return c(a,{queries:function(a){var c,d;if(null==a)return b.dis_max.queries;if(null==b.dis_max.queries&&(b.dis_max.queries=[]),l(a))b.dis_max.queries.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be a Query or array of Queries");for(b.dis_max.queries=[],c=0,d=a.length;d>c;c++){if(!l(a[c]))throw new TypeError("Argument must be array of Queries");b.dis_max.queries.push(a[c].toJSON())}}return this},tieBreaker:function(a){return null==a?b.dis_max.tie_breaker:(b.dis_max.tie_breaker=a,this)}})},z.FieldMaskingSpanQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a SpanQuery");var d=z.QueryMixin("field_masking_span"),e=d.toJSON();return e.field_masking_span.query=a.toJSON(),e.field_masking_span.field=b,c(d,{query:function(a){if(null==a)return e.field_masking_span.query;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return e.field_masking_span.query=a.toJSON(),this},field:function(a){return null==a?e.field_masking_span.field:(e.field_masking_span.field=a,this)}})},z.FilteredQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");if(null!=b&&!n(b))throw new TypeError("Argument must be a Filter");var d=z.QueryMixin("filtered"),e=d.toJSON();return e.filtered.query=a.toJSON(),null!=b&&(e.filtered.filter=b.toJSON()),c(d,{query:function(a){if(null==a)return e.filtered.query;if(!l(a))throw new TypeError("Argument must be a Query");return e.filtered.query=a.toJSON(),this},filter:function(a){if(null==a)return e.filtered.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return e.filtered.filter=a.toJSON(),this},strategy:function(a){return null==a?e.filtered.strategy:(a=a.toLowerCase(),("query_first"===a||"random_access_always"===a||"leap_frog"===a||"leap_frog_filter_first"===a||0===a.indexOf("random_access_"))&&(e.filtered.strategy=a),this)},cache:function(a){return null==a?e.filtered._cache:(e.filtered._cache=a,this)},cacheKey:function(a){return null==a?e.filtered._cache_key:(e.filtered._cache_key=a,this)}})},z.FunctionScoreQuery=function(){var a=z.QueryMixin("function_score"),b=a.toJSON();return c(a,{query:function(a){if(null==a)return b.function_score.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.function_score.query=a.toJSON(),this},filter:function(a){if(null==a)return b.function_score.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b.function_score.filter=a.toJSON(),this},scoreMode:function(a){return null==a?b.function_score.score_mode:(a=a.toLowerCase(),("avg"===a||"max"===a||"min"===a||"sum"===a||"multiply"===a||"first"===a)&&(b.function_score.score_mode=a),this)},boostMode:function(a){return null==a?b.function_score.boost_mode:(a=a.toLowerCase(),("multiply"===a||"replace"===a||"sum"===a||"avg"===a||"max"===a||"min"===a)&&(b.function_score.boost_mode=a),this)},boost:function(a){return null==a?b.function_score.boost:(b.function_score.boost=a,this)},"function":function(a){if(null==b.function_score.functions&&(b.function_score.functions=[]),null==a)return b.function_score.functions;if(!y(a))throw new TypeError("Argument must be a ScoreFunction");return b.function_score.functions.push(a.toJSON()),this},functions:function(a){var c,d;if(null==a)return b.function_score.functions;if(!e(a))throw new TypeError("Argument must be an array of ScoreFunctions");for(b.function_score.functions=[],c=0,d=a.length;d>c;c++){if(!y(a[c]))throw new TypeError("Argument must be an array of ScoreFunctions");b.function_score.functions.push(a[c].toJSON())}return this}})},z.FuzzyLikeThisFieldQuery=function(a,b){var d=z.QueryMixin("flt_field"),e=d.toJSON();return e.flt_field[a]={like_text:b},c(d,{field:function(b){var c=e.flt_field[a];return null==b?a:(delete e.flt_field[a],a=b,e.flt_field[b]=c,this)},likeText:function(b){return null==b?e.flt_field[a].like_text:(e.flt_field[a].like_text=b,this)},ignoreTf:function(b){return null==b?e.flt_field[a].ignore_tf:(e.flt_field[a].ignore_tf=b,this)},maxQueryTerms:function(b){return null==b?e.flt_field[a].max_query_terms:(e.flt_field[a].max_query_terms=b,this)},minSimilarity:function(b){return null==b?e.flt_field[a].min_similarity:(e.flt_field[a].min_similarity=b,this)},prefixLength:function(b){return null==b?e.flt_field[a].prefix_length:(e.flt_field[a].prefix_length=b,this)},analyzer:function(b){return null==b?e.flt_field[a].analyzer:(e.flt_field[a].analyzer=b,this)},failOnUnsupportedField:function(b){return null==b?e.flt_field[a].fail_on_unsupported_field:(e.flt_field[a].fail_on_unsupported_field=b,this)},boost:function(b){return null==b?e.flt_field[a].boost:(e.flt_field[a].boost=b,this)}})},z.FuzzyLikeThisQuery=function(a){var b=z.QueryMixin("flt"),d=b.toJSON();return d.flt.like_text=a,c(b,{fields:function(a){if(null==d.flt.fields&&(d.flt.fields=[]),null==a)return d.flt.fields;if(g(a))d.flt.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or array");d.flt.fields=a}return this},likeText:function(a){return null==a?d.flt.like_text:(d.flt.like_text=a,this)},ignoreTf:function(a){return null==a?d.flt.ignore_tf:(d.flt.ignore_tf=a,this)},maxQueryTerms:function(a){return null==a?d.flt.max_query_terms:(d.flt.max_query_terms=a,this)},minSimilarity:function(a){return null==a?d.flt.min_similarity:(d.flt.min_similarity=a,this)},prefixLength:function(a){return null==a?d.flt.prefix_length:(d.flt.prefix_length=a,this)},analyzer:function(a){return null==a?d.flt.analyzer:(d.flt.analyzer=a,this)},failOnUnsupportedField:function(a){return null==a?d.flt.fail_on_unsupported_field:(d.flt.fail_on_unsupported_field=a,this)}})},z.FuzzyQuery=function(a,b){var d=z.QueryMixin("fuzzy"),e=d.toJSON();return e.fuzzy[a]={value:b},c(d,{field:function(b){var c=e.fuzzy[a];return null==b?a:(delete e.fuzzy[a],a=b,e.fuzzy[b]=c,this)},value:function(b){return null==b?e.fuzzy[a].value:(e.fuzzy[a].value=b,this)},transpositions:function(b){return null==b?e.fuzzy[a].transpositions:(e.fuzzy[a].transpositions=b,this)},maxExpansions:function(b){return null==b?e.fuzzy[a].max_expansions:(e.fuzzy[a].max_expansions=b,this)},minSimilarity:function(b){return null==b?e.fuzzy[a].min_similarity:(e.fuzzy[a].min_similarity=b,this)},prefixLength:function(b){return null==b?e.fuzzy[a].prefix_length:(e.fuzzy[a].prefix_length=b,this)},rewrite:function(b){return null==b?e.fuzzy[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.fuzzy[a].rewrite=b),this)},boost:function(b){return null==b?e.fuzzy[a].boost:(e.fuzzy[a].boost=b,this)}})},z.GeoShapeQuery=function(a){var b=z.QueryMixin("geo_shape"),d=b.toJSON();return d.geo_shape[a]={},c(b,{field:function(b){var c=d.geo_shape[a];return null==b?a:(delete d.geo_shape[a],a=b,d.geo_shape[b]=c,this)},shape:function(b){return null==b?d.geo_shape[a].shape:(null!=d.geo_shape[a].indexed_shape&&delete d.geo_shape[a].indexed_shape,d.geo_shape[a].shape=b.toJSON(),this)},indexedShape:function(b){return null==b?d.geo_shape[a].indexed_shape:(null!=d.geo_shape[a].shape&&delete d.geo_shape[a].shape,d.geo_shape[a].indexed_shape=b.toJSON(),this)},relation:function(b){return null==b?d.geo_shape[a].relation:(b=b.toLowerCase(),("intersects"===b||"disjoint"===b||"within"===b)&&(d.geo_shape[a].relation=b),this)},strategy:function(b){return null==b?d.geo_shape[a].strategy:(b=b.toLowerCase(),("recursive"===b||"term"===b)&&(d.geo_shape[a].strategy=b),this)},boost:function(b){return null==b?d.geo_shape[a].boost:(d.geo_shape[a].boost=b,this)}})},z.HasChildQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a valid Query");var d=z.QueryMixin("has_child"),e=d.toJSON();return e.has_child.query=a.toJSON(),e.has_child.type=b,c(d,{query:function(a){if(null==a)return e.has_child.query;if(!l(a))throw new TypeError("Argument must be a valid Query");return e.has_child.query=a.toJSON(),this},type:function(a){return null==a?e.has_child.type:(e.has_child.type=a,this)},scope:function(a){return this},scoreType:function(a){return null==a?e.has_child.score_type:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(e.has_child.score_type=a),this)},scoreMode:function(a){return null==a?e.has_child.score_mode:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(e.has_child.score_mode=a),this)},shortCircuitCutoff:function(a){return null==a?e.has_child.short_circuit_cutoff:(e.has_child.short_circuit_cutoff=a,this)}})},z.HasParentQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var d=z.QueryMixin("has_parent"),e=d.toJSON();return e.has_parent.query=a.toJSON(),e.has_parent.parent_type=b,c(d,{query:function(a){if(null==a)return e.has_parent.query;if(!l(a))throw new TypeError("Argument must be a Query");return e.has_parent.query=a.toJSON(),this},parentType:function(a){return null==a?e.has_parent.parent_type:(e.has_parent.parent_type=a,this)},scope:function(a){return this},scoreType:function(a){return null==a?e.has_parent.score_type:(a=a.toLowerCase(),("none"===a||"score"===a)&&(e.has_parent.score_type=a),this)},scoreMode:function(a){return null==a?e.has_parent.score_mode:(a=a.toLowerCase(),("none"===a||"score"===a)&&(e.has_parent.score_mode=a),this)}})},z.IdsQuery=function(a){var b=z.QueryMixin("ids"),d=b.toJSON();if(g(a))d.ids.values=[a];else{if(!e(a))throw new TypeError("Argument must be string or array");d.ids.values=a}return c(b,{values:function(a){if(null==a)return d.ids.values;if(g(a))d.ids.values.push(a);else{if(!e(a))throw new TypeError("Argument must be string or array");d.ids.values=a}return this},type:function(a){if(null==d.ids.type&&(d.ids.type=[]),null==a)return d.ids.type;if(g(a))d.ids.type.push(a);else{if(!e(a))throw new TypeError("Argument must be string or array");d.ids.type=a}return this}})},z.IndicesQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var d=z.QueryMixin("indices"),f=d.toJSON();if(f.indices.query=a.toJSON(),g(b))f.indices.indices=[b];else{if(!e(b))throw new TypeError("Argument must be a string or array");f.indices.indices=b}return c(d,{indices:function(a){if(null==a)return f.indices.indices;if(g(a))f.indices.indices.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or array");f.indices.indices=a}return this},query:function(a){if(null==a)return f.indices.query;if(!l(a))throw new TypeError("Argument must be a Query");return f.indices.query=a.toJSON(),this},noMatchQuery:function(a){if(null==a)return f.indices.no_match_query;if(g(a))a=a.toLowerCase(),("none"===a||"all"===a)&&(f.indices.no_match_query=a);else{if(!l(a))throw new TypeError("Argument must be string or Query");f.indices.no_match_query=a.toJSON()}return this}})},z.MatchAllQuery=function(){return z.QueryMixin("match_all")},z.MatchQuery=function(a,b){var d=z.QueryMixin("match"),e=d.toJSON();return e.match[a]={query:b},c(d,{query:function(b){return null==b?e.match[a].query:(e.match[a].query=b,this)},type:function(b){return null==b?e.match[a].type:(b=b.toLowerCase(),("boolean"===b||"phrase"===b||"phrase_prefix"===b)&&(e.match[a].type=b),this)},fuzziness:function(b){return null==b?e.match[a].fuzziness:(e.match[a].fuzziness=b,this)},cutoffFrequency:function(b){return null==b?e.match[a].cutoff_frequency:(e.match[a].cutoff_frequency=b,this)},prefixLength:function(b){return null==b?e.match[a].prefix_length:(e.match[a].prefix_length=b,this)},maxExpansions:function(b){return null==b?e.match[a].max_expansions:(e.match[a].max_expansions=b,this)},operator:function(b){return null==b?e.match[a].operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(e.match[a].operator=b),this)},slop:function(b){return null==b?e.match[a].slop:(e.match[a].slop=b,this)},analyzer:function(b){return null==b?e.match[a].analyzer:(e.match[a].analyzer=b,this)},minimumShouldMatch:function(b){return null==b?e.match[a].minimum_should_match:(e.match[a].minimum_should_match=b,this)},rewrite:function(b){return null==b?e.match[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.match[a].rewrite=b),this)},fuzzyRewrite:function(b){return null==b?e.match[a].fuzzy_rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.match[a].fuzzy_rewrite=b),this)},fuzzyTranspositions:function(b){return null==b?e.match[a].fuzzy_transpositions:(e.match[a].fuzzy_transpositions=b,this)},lenient:function(b){return null==b?e.match[a].lenient:(e.match[a].lenient=b,this)},zeroTermsQuery:function(b){return null==b?e.match[a].zero_terms_query:(b=b.toLowerCase(),("all"===b||"none"===b)&&(e.match[a].zero_terms_query=b),this)},boost:function(b){return null==b?e.match[a].boost:(e.match[a].boost=b,this)}})},z.MoreLikeThisFieldQuery=function(a,b){var d=z.QueryMixin("mlt_field"),e=d.toJSON();return e.mlt_field[a]={like_text:b},c(d,{field:function(b){var c=e.mlt_field[a];return null==b?a:(delete e.mlt_field[a],a=b,e.mlt_field[b]=c,this)},likeText:function(b){return null==b?e.mlt_field[a].like_text:(e.mlt_field[a].like_text=b,this)},percentTermsToMatch:function(b){return null==b?e.mlt_field[a].percent_terms_to_match:(e.mlt_field[a].percent_terms_to_match=b,this)},minTermFreq:function(b){return null==b?e.mlt_field[a].min_term_freq:(e.mlt_field[a].min_term_freq=b,this)},maxQueryTerms:function(b){return null==b?e.mlt_field[a].max_query_terms:(e.mlt_field[a].max_query_terms=b,this)},stopWords:function(b){return null==b?e.mlt_field[a].stop_words:(e.mlt_field[a].stop_words=b,this)},minDocFreq:function(b){return null==b?e.mlt_field[a].min_doc_freq:(e.mlt_field[a].min_doc_freq=b,this)},maxDocFreq:function(b){return null==b?e.mlt_field[a].max_doc_freq:(e.mlt_field[a].max_doc_freq=b,this)},minWordLen:function(b){return null==b?e.mlt_field[a].min_word_len:(e.mlt_field[a].min_word_len=b,this)},maxWordLen:function(b){return null==b?e.mlt_field[a].max_word_len:(e.mlt_field[a].max_word_len=b,this)},analyzer:function(b){return null==b?e.mlt_field[a].analyzer:(e.mlt_field[a].analyzer=b,this)},boostTerms:function(b){return null==b?e.mlt_field[a].boost_terms:(e.mlt_field[a].boost_terms=b,this)},failOnUnsupportedField:function(b){return null==b?e.mlt_field[a].fail_on_unsupported_field:(e.mlt_field[a].fail_on_unsupported_field=b,this)},boost:function(b){return null==b?e.mlt_field[a].boost:(e.mlt_field[a].boost=b,this)}})},z.MoreLikeThisQuery=function(a,b){var d=z.QueryMixin("mlt"),f=d.toJSON();if(f.mlt.like_text=b,f.mlt.fields=[],g(a))f.mlt.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be string or array");f.mlt.fields=a}return c(d,{fields:function(a){if(null==a)return f.mlt.fields;if(g(a))f.mlt.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or array");f.mlt.fields=a}return this},likeText:function(a){return null==a?f.mlt.like_text:(f.mlt.like_text=a,this)},percentTermsToMatch:function(a){return null==a?f.mlt.percent_terms_to_match:(f.mlt.percent_terms_to_match=a,this)},minTermFreq:function(a){return null==a?f.mlt.min_term_freq:(f.mlt.min_term_freq=a,this)},maxQueryTerms:function(a){return null==a?f.mlt.max_query_terms:(f.mlt.max_query_terms=a,this)},stopWords:function(a){return null==a?f.mlt.stop_words:(f.mlt.stop_words=a,this)},minDocFreq:function(a){return null==a?f.mlt.min_doc_freq:(f.mlt.min_doc_freq=a,this)},maxDocFreq:function(a){return null==a?f.mlt.max_doc_freq:(f.mlt.max_doc_freq=a,this)},minWordLen:function(a){return null==a?f.mlt.min_word_len:(f.mlt.min_word_len=a,this)},maxWordLen:function(a){return null==a?f.mlt.max_word_len:(f.mlt.max_word_len=a,this)},analyzer:function(a){return null==a?f.mlt.analyzer:(f.mlt.analyzer=a,this)},boostTerms:function(a){return null==a?f.mlt.boost_terms:(f.mlt.boost_terms=a,this)},failOnUnsupportedField:function(a){return null==a?f.mlt.fail_on_unsupported_field:(f.mlt.fail_on_unsupported_field=a,this)}})},z.MultiMatchQuery=function(a,b){var d=z.QueryMixin("multi_match"),f=d.toJSON();if(f.multi_match.query=b,f.multi_match.fields=[],g(a))f.multi_match.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be string or array");f.multi_match.fields=a}return c(d,{fields:function(a){if(null==a)return f.multi_match.fields;if(g(a))f.multi_match.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be string or array");f.multi_match.fields=a}return this},useDisMax:function(a){return null==a?f.multi_match.use_dis_max:(f.multi_match.use_dis_max=a,this)},tieBreaker:function(a){return null==a?f.multi_match.tie_breaker:(f.multi_match.tie_breaker=a,this)},cutoffFrequency:function(a){return null==a?f.multi_match.cutoff_frequency:(f.multi_match.cutoff_frequency=a,this)},minimumShouldMatch:function(a){return null==a?f.multi_match.minimum_should_match:(f.multi_match.minimum_should_match=a,this)},rewrite:function(a){return null==a?f.multi_match.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(f.multi_match.rewrite=a),this)},fuzzyRewrite:function(a){return null==a?f.multi_match.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(f.multi_match.fuzzy_rewrite=a),this)},lenient:function(a){return null==a?f.multi_match.lenient:(f.multi_match.lenient=a,this)},query:function(a){return null==a?f.multi_match.query:(f.multi_match.query=a,this)},type:function(a){return null==a?f.multi_match.type:(a=a.toLowerCase(),("boolean"===a||"phrase"===a||"phrase_prefix"===a)&&(f.multi_match.type=a),this)},fuzziness:function(a){return null==a?f.multi_match.fuzziness:(f.multi_match.fuzziness=a,this)},prefixLength:function(a){return null==a?f.multi_match.prefix_length:(f.multi_match.prefix_length=a,this)},maxExpansions:function(a){return null==a?f.multi_match.max_expansions:(f.multi_match.max_expansions=a,this)},operator:function(a){return null==a?f.multi_match.operator:(a=a.toLowerCase(),("and"===a||"or"===a)&&(f.multi_match.operator=a),this)},slop:function(a){return null==a?f.multi_match.slop:(f.multi_match.slop=a,this)},analyzer:function(a){return null==a?f.multi_match.analyzer:(f.multi_match.analyzer=a,this)},zeroTermsQuery:function(a){return null==a?f.multi_match.zero_terms_query:(a=a.toLowerCase(),("all"===a||"none"===a)&&(f.multi_match.zero_terms_query=a),this)}})},z.NestedQuery=function(a){var b=z.QueryMixin("nested"),d=b.toJSON();return d.nested.path=a,c(b,{path:function(a){return null==a?d.nested.path:(d.nested.path=a,this)},query:function(a){if(null==a)return d.nested.query;if(!l(a))throw new TypeError("Argument must be a Query");return d.nested.query=a.toJSON(),this},filter:function(a){if(null==a)return d.nested.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return d.nested.filter=a.toJSON(),this},scoreMode:function(a){return null==a?d.nested.score_mode:(a=a.toLowerCase(),("avg"===a||"total"===a||"max"===a||"none"===a||"sum"===a)&&(d.nested.score_mode=a),this)},scope:function(a){return this}})},z.PrefixQuery=function(a,b){var d=z.QueryMixin("prefix"),e=d.toJSON();return e.prefix[a]={value:b},c(d,{field:function(b){var c=e.prefix[a];return null==b?a:(delete e.prefix[a],a=b,e.prefix[b]=c,this)},value:function(b){return null==b?e.prefix[a].value:(e.prefix[a].value=b,
this)},rewrite:function(b){return null==b?e.prefix[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.prefix[a].rewrite=b),this)},boost:function(b){return null==b?e.prefix[a].boost:(e.prefix[a].boost=b,this)}})},z.QueryStringQuery=function(a){var b=z.QueryMixin("query_string"),d=b.toJSON();return d.query_string.query=a,c(b,{query:function(a){return null==a?d.query_string.query:(d.query_string.query=a,this)},defaultField:function(a){return null==a?d.query_string.default_field:(d.query_string.default_field=a,this)},fields:function(a){if(null==d.query_string.fields&&(d.query_string.fields=[]),null==a)return d.query_string.fields;if(g(a))d.query_string.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or array");d.query_string.fields=a}return this},useDisMax:function(a){return null==a?d.query_string.use_dis_max:(d.query_string.use_dis_max=a,this)},defaultOperator:function(a){return null==a?d.query_string.default_operator:(a=a.toUpperCase(),("AND"===a||"OR"===a)&&(d.query_string.default_operator=a),this)},analyzer:function(a){return null==a?d.query_string.analyzer:(d.query_string.analyzer=a,this)},quoteAnalyzer:function(a){return null==a?d.query_string.quote_analyzer:(d.query_string.quote_analyzer=a,this)},allowLeadingWildcard:function(a){return null==a?d.query_string.allow_leading_wildcard:(d.query_string.allow_leading_wildcard=a,this)},lowercaseExpandedTerms:function(a){return null==a?d.query_string.lowercase_expanded_terms:(d.query_string.lowercase_expanded_terms=a,this)},enablePositionIncrements:function(a){return null==a?d.query_string.enable_position_increments:(d.query_string.enable_position_increments=a,this)},fuzzyPrefixLength:function(a){return null==a?d.query_string.fuzzy_prefix_length:(d.query_string.fuzzy_prefix_length=a,this)},fuzzyMinSim:function(a){return null==a?d.query_string.fuzzy_min_sim:(d.query_string.fuzzy_min_sim=a,this)},phraseSlop:function(a){return null==a?d.query_string.phrase_slop:(d.query_string.phrase_slop=a,this)},analyzeWildcard:function(a){return null==a?d.query_string.analyze_wildcard:(d.query_string.analyze_wildcard=a,this)},autoGeneratePhraseQueries:function(a){return null==a?d.query_string.auto_generate_phrase_queries:(d.query_string.auto_generate_phrase_queries=a,this)},minimumShouldMatch:function(a){return null==a?d.query_string.minimum_should_match:(d.query_string.minimum_should_match=a,this)},tieBreaker:function(a){return null==a?d.query_string.tie_breaker:(d.query_string.tie_breaker=a,this)},escape:function(a){return null==a?d.query_string.escape:(d.query_string.escape=a,this)},fuzzyMaxExpansions:function(a){return null==a?d.query_string.fuzzy_max_expansions:(d.query_string.fuzzy_max_expansions=a,this)},fuzzyRewrite:function(a){return null==a?d.query_string.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(d.query_string.fuzzy_rewrite=a),this)},rewrite:function(a){return null==a?d.query_string.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(d.query_string.rewrite=a),this)},quoteFieldSuffix:function(a){return null==a?d.query_string.quote_field_suffix:(d.query_string.quote_field_suffix=a,this)},lenient:function(a){return null==a?d.query_string.lenient:(d.query_string.lenient=a,this)}})},z.RangeQuery=function(a){var b=z.QueryMixin("range"),d=b.toJSON();return d.range[a]={},c(b,{field:function(b){var c=d.range[a];return null==b?a:(delete d.range[a],a=b,d.range[b]=c,this)},from:function(b){return null==b?d.range[a].from:(d.range[a].from=b,this)},to:function(b){return null==b?d.range[a].to:(d.range[a].to=b,this)},includeLower:function(b){return null==b?d.range[a].include_lower:(d.range[a].include_lower=b,this)},includeUpper:function(b){return null==b?d.range[a].include_upper:(d.range[a].include_upper=b,this)},gt:function(b){return null==b?d.range[a].gt:(d.range[a].gt=b,this)},gte:function(b){return null==b?d.range[a].gte:(d.range[a].gte=b,this)},lt:function(b){return null==b?d.range[a].lt:(d.range[a].lt=b,this)},lte:function(b){return null==b?d.range[a].lte:(d.range[a].lte=b,this)},boost:function(b){return null==b?d.range[a].boost:(d.range[a].boost=b,this)}})},z.RegexpQuery=function(a,b){var d=z.QueryMixin("regexp"),e=d.toJSON();return e.regexp[a]={value:b},c(d,{field:function(b){var c=e.regexp[a];return null==b?a:(delete e.regexp[a],a=b,e.regexp[b]=c,this)},value:function(b){return null==b?e.regexp[a].value:(e.regexp[a].value=b,this)},flags:function(b){return null==b?e.regexp[a].flags:(e.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?e.regexp[a].flags_value:(e.regexp[a].flags_value=b,this)},rewrite:function(b){return null==b?e.regexp[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.regexp[a].rewrite=b),this)},boost:function(b){return null==b?e.regexp[a].boost:(e.regexp[a].boost=b,this)}})},z.SpanFirstQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a SpanQuery");var d=z.QueryMixin("span_first"),e=d.toJSON();return e.span_first.match=a.toJSON(),e.span_first.end=b,c(d,{match:function(a){if(null==a)return e.span_first.match;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return e.span_first.match=a.toJSON(),this},end:function(a){return null==a?e.span_first.end:(e.span_first.end=a,this)}})},z.SpanMultiTermQuery=function(a){if(null!=a&&!l(a))throw new TypeError("Argument must be a MultiTermQuery");var b=z.QueryMixin("span_multi"),d=b.toJSON();return d.span_multi.match={},null!=a&&(d.span_multi.match=a.toJSON()),c(b,{match:function(a){if(null==a)return d.span_multi.match;if(!l(a))throw new TypeError("Argument must be a MultiTermQuery");return d.span_multi.match=a.toJSON(),this}})},z.SpanNearQuery=function(a,b){var d,f,g=z.QueryMixin("span_near"),h=g.toJSON();if(h.span_near.clauses=[],h.span_near.slop=b,l(a))h.span_near.clauses.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(d=0,f=a.length;f>d;d++){if(!l(a[d]))throw new TypeError("Argument must be array of SpanQueries");h.span_near.clauses.push(a[d].toJSON())}}return c(g,{clauses:function(a){var b,c;if(null==a)return h.span_near.clauses;if(l(a))h.span_near.clauses.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(h.span_near.clauses=[],b=0,c=a.length;c>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");h.span_near.clauses.push(a[b].toJSON())}}return this},slop:function(a){return null==a?h.span_near.slop:(h.span_near.slop=a,this)},inOrder:function(a){return null==a?h.span_near.in_order:(h.span_near.in_order=a,this)},collectPayloads:function(a){return null==a?h.span_near.collect_payloads:(h.span_near.collect_payloads=a,this)}})},z.SpanNotQuery=function(a,b){if(!l(a)||!l(b))throw new TypeError("Argument must be a SpanQuery");var d=z.QueryMixin("span_not"),e=d.toJSON();return e.span_not.include=a.toJSON(),e.span_not.exclude=b.toJSON(),c(d,{include:function(a){if(null==a)return e.span_not.include;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return e.span_not.include=a.toJSON(),this},exclude:function(a){if(null==a)return e.span_not.exclude;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return e.span_not.exclude=a.toJSON(),this}})},z.SpanOrQuery=function(a){var b,d,f=z.QueryMixin("span_or"),g=f.toJSON();if(g.span_or.clauses=[],l(a))g.span_or.clauses.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(b=0,d=a.length;d>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");g.span_or.clauses.push(a[b].toJSON())}}return c(f,{clauses:function(a){var b,c;if(null==a)return g.span_or.clauses;if(l(a))g.span_or.clauses.push(a.toJSON());else{if(!e(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(g.span_or.clauses=[],b=0,c=a.length;c>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");g.span_or.clauses.push(a[b].toJSON())}}return this}})},z.SpanTermQuery=function(a,b){var d=z.QueryMixin("span_term"),e=d.toJSON();return e.span_term[a]={term:b},c(d,{field:function(b){var c=e.span_term[a];return null==b?a:(delete e.span_term[a],a=b,e.span_term[b]=c,this)},term:function(b){return null==b?e.span_term[a].term:(e.span_term[a].term=b,this)},boost:function(b){return null==b?e.span_term[a].boost:(e.span_term[a].boost=b,this)}})},z.TermQuery=function(a,b){var d=z.QueryMixin("term"),e=d.toJSON();return e.term[a]={term:b},c(d,{field:function(b){var c=e.term[a];return null==b?a:(delete e.term[a],a=b,e.term[b]=c,this)},term:function(b){return null==b?e.term[a].term:(e.term[a].term=b,this)},boost:function(b){return null==b?e.term[a].boost:(e.term[a].boost=b,this)}})},z.TermsQuery=function(a,b){var d=z.QueryMixin("terms"),f=d.toJSON();if(g(b))f.terms[a]=[b];else{if(!e(b))throw new TypeError("Argument must be string or array");f.terms[a]=b}return c(d,{field:function(b){var c=f.terms[a];return null==b?a:(delete f.terms[a],a=b,f.terms[b]=c,this)},terms:function(b){if(null==b)return f.terms[a];if(g(b))f.terms[a].push(b);else{if(!e(b))throw new TypeError("Argument must be string or array");f.terms[a]=b}return this},minimumShouldMatch:function(a){return null==a?f.terms.minimum_should_match:(f.terms.minimum_should_match=a,this)},disableCoord:function(a){return null==a?f.terms.disable_coord:(f.terms.disable_coord=a,this)}})},z.TopChildrenQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var d=z.QueryMixin("top_children"),e=d.toJSON();return e.top_children.query=a.toJSON(),e.top_children.type=b,c(d,{query:function(a){if(null==a)return e.top_children.query;if(!l(a))throw new TypeError("Argument must be a Query");return e.top_children.query=a.toJSON(),this},type:function(a){return null==a?e.top_children.type:(e.top_children.type=a,this)},scope:function(a){return this},score:function(a){return null==a?e.top_children.score:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(e.top_children.score=a),this)},scoreMode:function(a){return null==a?e.top_children.score_mode:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(e.top_children.score_mode=a),this)},factor:function(a){return null==a?e.top_children.factor:(e.top_children.factor=a,this)},incrementalFactor:function(a){return null==a?e.top_children.incremental_factor:(e.top_children.incremental_factor=a,this)}})},z.WildcardQuery=function(a,b){var d=z.QueryMixin("wildcard"),e=d.toJSON();return e.wildcard[a]={value:b},c(d,{field:function(b){var c=e.wildcard[a];return null==b?a:(delete e.wildcard[a],a=b,e.wildcard[b]=c,this)},value:function(b){return null==b?e.wildcard[a].value:(e.wildcard[a].value=b,this)},rewrite:function(b){return null==b?e.wildcard[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(e.wildcard[a].rewrite=b),this)},boost:function(b){return null==b?e.wildcard[a].boost:(e.wildcard[a].boost=b,this)}})},z.BoostFactorScoreFunction=function(a){var b=z.ScoreFunctionMixin("boost_factor"),d=b.toJSON();return d.boost_factor=a,c(b,{boost:function(a){return null==a?d.boost_factor:(d.boost_factor=a,this)}})},z.DecayScoreFunction=function(a){var b="gauss",d=z.ScoreFunctionMixin(b),e=d.toJSON(),f=function(a){var c;b!==a&&(c=e[b],delete e[b],b=a,e[b]=c)};return e[b][a]={},c(d,{linear:function(){f("linear")},exp:function(){f("exp")},gauss:function(){f("gauss")},field:function(c){var d=e[b][a];return null==c?a:(delete e[b][a],a=c,e[b][a]=d,this)},scale:function(c){return null==c?e[b][a].scale:(e[b][a].scale=c,this)},origin:function(c){if(null==c)return e[b][a].origin;if(r(c))e[b][a].origin=c.toJSON();else{if(k(c))throw new TypeError("origin must be a GeoPoint or native type");e[b][a].origin=c}return this},decay:function(c){return null==c?e[b][a].decay:(e[b][a].decay=c,this)},offset:function(c){return null==c?e[b][a].offset:(e[b][a].offset=c,this)}})},z.RandomScoreFunction=function(){var a=z.ScoreFunctionMixin("random_score"),b=a.toJSON();return c(a,{seed:function(a){return null==a?b.random_score.seed:(b.random_score.seed=a,this)}})},z.ScriptScoreFunction=function(){var a=z.ScoreFunctionMixin("script_score"),b=a.toJSON();return c(a,{script:function(a){return null==a?b.script_score.script:(b.script_score.script=a,this)},lang:function(a){return null==a?b.script_score.lang:(b.script_score.lang=a,this)},params:function(a){return null==a?b.script_score.params:(b.script_score.params=a,this)}})},z.GeoPoint=function(b){var c=[0,0];return null!=b&&e(b)&&2===b.length&&(c=[b[1],b[0]]),{properties:function(b){return null==b?c:(f(b)&&a(b,"lat")&&a(b,"lon")?c={lat:b.lat,lon:b.lon}:f(b)&&a(b,"geohash")&&(c={geohash:b.geohash}),this)},string:function(a){return null==a?c:(g(a)&&-1!==a.indexOf(",")&&(c=a),this)},geohash:function(a,b){return b=null!=b&&h(b)?b:12,null==a?c:(g(a)&&a.length===b&&(c=a),this)},array:function(a){return null==a?c:(e(a)&&2===a.length&&(c=[a[1],a[0]]),this)},_type:function(){return"geo point"},toJSON:function(){return c}}},z.Highlight=function(c){var d={fields:{}},h=function(b,c,e){null==b?d[c]=e:(a(d.fields,b)||(d.fields[b]={}),d.fields[b][c]=e)};return null!=c&&(g(c)?d.fields[c]={}:e(c)&&b(c,function(a){d.fields[a]={}})),{fields:function(c){return null==c?d.fields:void(g(c)?a(d.fields,c)||(d.fields[c]={}):e(c)&&b(c,function(b){a(d.fields,b)||(d.fields[b]={})}))},preTags:function(a,b){return null===a&&null!=b?d.fields[b].pre_tags:null==a?d.pre_tags:(g(a)?h(b,"pre_tags",[a]):e(a)&&h(b,"pre_tags",a),this)},postTags:function(a,b){return null===a&&null!=b?d.fields[b].post_tags:null==a?d.post_tags:(g(a)?h(b,"post_tags",[a]):e(a)&&h(b,"post_tags",a),this)},order:function(a,b){return null===a&&null!=b?d.fields[b].order:null==a?d.order:(a=a.toLowerCase(),"score"===a&&h(b,"order",a),this)},tagsSchema:function(a){return null==a?d.tags_schema:(a=a.toLowerCase(),"styled"===a&&(d.tags_schema=a),this)},highlightFilter:function(a,b){return null===a&&null!=b?d.fields[b].highlight_filter:null==a?d.highlight_filter:(h(b,"highlight_filter",a),this)},fragmentSize:function(a,b){return null===a&&null!=b?d.fields[b].fragment_size:null==a?d.fragment_size:(h(b,"fragment_size",a),this)},numberOfFragments:function(a,b){return null===a&&null!=b?d.fields[b].number_of_fragments:null==a?d.number_of_fragments:(h(b,"number_of_fragments",a),this)},encoder:function(a){return null==a?d.encoder:(a=a.toLowerCase(),("default"===a||"html"===a)&&(d.encoder=a),this)},requireFieldMatch:function(a,b){return null===a&&null!=b?d.fields[b].require_field_match:null==a?d.require_field_match:(h(b,"require_field_match",a),this)},boundaryMaxScan:function(a,b){return null===a&&null!=b?d.fields[b].boundary_max_scan:null==a?d.boundary_max_scan:(h(b,"boundary_max_scan",a),this)},boundaryChars:function(a,b){return null===a&&null!=b?d.fields[b].boundary_chars:null==a?d.boundary_chars:(h(b,"boundary_chars",a),this)},type:function(a,b){return null===a&&null!=b?d.fields[b].type:null==a?d.type:(a=a.toLowerCase(),("fast-vector-highlighter"===a||"highlighter"===a||"postings"===a)&&h(b,"type",a),this)},fragmenter:function(a,b){return null===a&&null!=b?d.fields[b].fragmenter:null==a?d.fragmenter:(a=a.toLowerCase(),("simple"===a||"span"===a)&&h(b,"fragmenter",a),this)},options:function(a,b){if(null===a&&null!=b)return d.fields[b].options;if(null==a)return d.options;if(!f(a)||e(a)||k(a))throw new TypeError("Parameter must be an object");return h(b,"options",a),this},_type:function(){return"highlight"},toJSON:function(){return d}}},z.IndexedShape=function(a,b){var c={type:a,id:b};return{type:function(a){return null==a?c.type:(c.type=a,this)},id:function(a){return null==a?c.id:(c.id=a,this)},index:function(a){return null==a?c.index:(c.index=a,this)},shapeFieldName:function(a){return null==a?c.shape_field_name:(c.shape_field_name=a,this)},_type:function(){return"indexed shape"},toJSON:function(){return c}}},z.Request=function(){var b={};return{sort:function(){var c,d;if(a(b,"sort")||(b.sort=[]),0===arguments.length)return b.sort;if(1===arguments.length){var f=arguments[0];if(g(f))b.sort.push(f);else if(u(f))b.sort.push(f.toJSON());else{if(!e(f))throw new TypeError("Argument must be string, Sort, or array");for(b.sort=[],c=0,d=f.length;d>c;c++)if(g(f[c]))b.sort.push(f[c]);else{if(!u(f[c]))throw new TypeError("Invalid object in array");b.sort.push(f[c].toJSON())}}}else if(2===arguments.length){var h=arguments[0],i=arguments[1];if(g(h)&&g(i)&&(i=i.toLowerCase(),"asc"===i||"desc"===i)){var j={};j[h]={order:i},b.sort.push(j)}}return this},trackScores:function(a){return null==a?b.track_scores:(b.track_scores=a,this)},from:function(a){return null==a?b.from:(b.from=a,this)},size:function(a){return null==a?b.size:(b.size=a,this)},timeout:function(a){return null==a?b.timeout:(b.timeout=a,this)},fields:function(a){if(null==a)return b.fields;if(null==b.fields&&(b.fields=[]),g(a))b.fields.push(a);else{if(!e(a))throw new TypeError("Argument must be a string or an array");b.fields=a}return this},source:function(a,c){if(null==a&&null==c)return b._source;if(!e(a)&&!g(a)&&!i(a))throw new TypeError("Argument includes must be a string, an array, or a boolean");if(null!=c&&!e(c)&&!g(c))throw new TypeError("Argument excludes must be a string or an array");return i(a)?b._source=a:(b._source={includes:a},null!=c&&(b._source.excludes=c)),this},rescore:function(a){if(null==a)return b.rescore;if(!m(a))throw new TypeError("Argument must be a Rescore");return b.rescore=a.toJSON(),this},query:function(a){if(null==a)return b.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.query=a.toJSON(),this},facet:function(a){if(null==a)return b.facets;if(null==b.facets&&(b.facets={}),!o(a))throw new TypeError("Argument must be a Facet");return c(b.facets,a.toJSON()),this},aggregation:function(a){if(null==a)return b.aggs;if(null==b.aggs&&(b.aggs={}),!p(a))throw new TypeError("Argument must be an Aggregation");return c(b.aggs,a.toJSON()),this},agg:function(a){return this.aggregation(a)},filter:function(a){if(null==a)return b.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b.filter=a.toJSON(),this},highlight:function(a){if(null==a)return b.highlight;if(!v(a))throw new TypeError("Argument must be a Highlight object");return b.highlight=a.toJSON(),this},suggest:function(a){if(null==a)return b.suggest;if(null==b.suggest&&(b.suggest={}),g(a))b.suggest.text=a;else{if(!w(a))throw new TypeError("Argument must be a string or Suggest object");c(b.suggest,a.toJSON())}return this},scriptField:function(a){if(null==a)return b.script_fields;if(null==b.script_fields&&(b.script_fields={}),!q(a))throw new TypeError("Argument must be a ScriptField");return c(b.script_fields,a.toJSON()),this},indexBoost:function(a,c){return null==b.indices_boost&&(b.indices_boost={}),0===arguments.length?b.indices_boost:(b.indices_boost[a]=c,this)},explain:function(a){return null==a?b.explain:(b.explain=a,this)},version:function(a){return null==a?b.version:(b.version=a,this)},minScore:function(a){return null==a?b.min_score:(b.min_score=a,this)},_type:function(){return"request"},toJSON:function(){return b}}},z.Rescore=function(a,b){if(null!=a&&!h(a))throw new TypeError("Argument must be a Number");if(null!=b&&!l(b))throw new TypeError("Argument must be a Query");var c={query:{}};return null!=a&&(c.window_size=a),null!=b&&(c.query.rescore_query=b.toJSON()),{rescoreQuery:function(a){if(null==a)return c.query.rescore_query;if(!l(a))throw new TypeError("Argument must be a Query");return c.query.rescore_query=a.toJSON(),this},queryWeight:function(a){if(null==a)return c.query.query_weight;if(!h(a))throw new TypeError("Argument must be a Number");return c.query.query_weight=a,this},rescoreQueryWeight:function(a){if(null==a)return c.query.rescore_query_weight;if(!h(a))throw new TypeError("Argument must be a Number");return c.query.rescore_query_weight=a,this},windowSize:function(a){if(null==a)return c.window_size;if(!h(a))throw new TypeError("Argument must be a Number");return c.window_size=a,this},scoreMode:function(a){return null==a?c.query.score_mode:(a=a.toLowerCase(),("total"===a||"min"===a||"max"===a||"multiply"===a||"avg"===a)&&(c.query.score_mode=a),this)},_type:function(){return"rescore"},toJSON:function(){return c}}},z.ScriptField=function(a){var b={};return b[a]={},{lang:function(c){return null==c?b[a].lang:(b[a].lang=c,this)},script:function(c){return null==c?b[a].script:(b[a].script=c,this)},params:function(c){return null==c?b[a].params:(b[a].params=c,this)},ignoreFailure:function(c){return null==c?b[a].ignore_failure:(b[a].ignore_failure=c,this)},_type:function(){return"script field"},toJSON:function(){return b}}},z.Shape=function(a,b){var c={},d=function(a){var b=!1;return("point"===a||"linestring"===a||"polygon"===a||"multipoint"===a||"envelope"===a||"multipolygon"===a||"circle"===a||"multilinestring"===a)&&(b=!0),b};return a=a.toLowerCase(),d(a)&&(c.type=a,c.coordinates=b),{type:function(a){return null==a?c.type:(a=a.toLowerCase(),d(a)&&(c.type=a),this)},coordinates:function(a){return null==a?c.coordinates:(c.coordinates=a,this)},radius:function(a){return null==a?c.radius:(c.radius=a,this)},_type:function(){return"shape"},toJSON:function(){return c}}},z.Sort=function(a){null==a&&(a="_score");var b={},c=a,d="_geo_distance",e="_script";return b[c]={},{field:function(d){var e=b[c];return null==d?a:(delete b[c],a=d,c=d,b[c]=e,this)},geoDistance:function(e){var f=b[c];if(null==e)return b[c][a];if(!r(e))throw new TypeError("Argument must be a GeoPoint");return delete b[c],c=d,b[c]=f,b[c][a]=e.toJSON(),this},script:function(a){var d=b[c];return null==a?b[c].script:(delete b[c],c=e,b[c]=d,b[c].script=a,this)},order:function(a){return null==a?b[c].order:(a=a.toLowerCase(),("asc"===a||"desc"===a)&&(b[c].order=a),this)},asc:function(){return b[c].order="asc",this},desc:function(){return b[c].order="desc",this},reverse:function(a){return null==a?b[c].reverse:(b[c].reverse=a,this)},missing:function(a){return null==a?b[c].missing:(b[c].missing=a,this)},ignoreUnmapped:function(a){return null==a?b[c].ignore_unmapped:(b[c].ignore_unmapped=a,this)},unit:function(a){return null==a?b[c].unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b[c].unit=a),this)},normalize:function(a){return null==a?b[c].normalize:(b[c].normalize=a,this)},distanceType:function(a){return null==a?b[c].distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b[c].distance_type=a),this)},params:function(a){return null==a?b[c].params:(b[c].params=a,this)},lang:function(a){return null==a?b[c].lang:(b[c].lang=a,this)},type:function(a){return null==a?b[c].type:(a=a.toLowerCase(),("string"===a||"number"===a)&&(b[c].type=a),this)},mode:function(a){return null==a?b[c].mode:(a=a.toLowerCase(),("min"===a||"max"===a||"sum"===a||"avg"===a)&&(b[c].mode=a),this)},nestedPath:function(a){return null==a?b[c].nested_path:(b[c].nested_path=a,this)},nestedFilter:function(a){if(null==a)return b[c].nested_filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b[c].nested_filter=a.toJSON(),this},_type:function(){return"sort"},toJSON:function(){return b}}},z.CompletionSuggester=function(a){var b,d=z.SuggesterMixin(a),e=d.toJSON();return e[a].completion={},b=z.SuggestContextMixin(e[a].completion),c(d,b,{fuzzy:function(b){return null==b?e[a].completion.fuzzy:(b&&null==e[a].completion.fuzzy?e[a].completion.fuzzy={}:b||null==e[a].completion.fuzzy||delete e[a].completion.fuzzy,this)},transpositions:function(b){return null==e[a].completion.fuzzy&&(e[a].completion.fuzzy={}),null==b?e[a].completion.fuzzy.transpositions:(e[a].completion.fuzzy.transpositions=b,this)},unicodeAware:function(b){return null==e[a].completion.fuzzy&&(e[a].completion.fuzzy={}),null==b?e[a].completion.fuzzy.unicode_aware:(e[a].completion.fuzzy.unicode_aware=b,this)},editDistance:function(b){return null==e[a].completion.fuzzy&&(e[a].completion.fuzzy={}),null==b?e[a].completion.fuzzy.edit_distance:(e[a].completion.fuzzy.edit_distance=b,this)},minLength:function(b){return null==e[a].completion.fuzzy&&(e[a].completion.fuzzy={}),null==b?e[a].completion.fuzzy.min_length:(e[a].completion.fuzzy.min_length=b,this)},prefixLength:function(b){return null==e[a].completion.fuzzy&&(e[a].completion.fuzzy={}),null==b?e[a].completion.fuzzy.prefix_length:(e[a].completion.fuzzy.prefix_length=b,this)}})},z.DirectGenerator=function(){var a={},b=z.DirectSettingsMixin(a);return c(b,{preFilter:function(b){return null==b?a.pre_filter:(a.pre_filter=b,this)},postFilter:function(b){return null==b?a.post_filter:(a.post_filter=b,this)},field:function(b){return null==b?a.field:(a.field=b,this)},size:function(b){return null==b?a.size:(a.size=b,this)},_type:function(){return"generator"},toJSON:function(){return a}})},z.PhraseSuggester=function(a){var b,d=z.SuggesterMixin(a),f=d.toJSON();return f[a].phrase={},b=z.SuggestContextMixin(f[a].phrase),c(d,b,{realWordErrorLikelihood:function(b){return null==b?f[a].phrase.real_word_error_likelihood:(f[a].phrase.real_word_error_likelihood=b,this)},confidence:function(b){return null==b?f[a].phrase.confidence:(f[a].phrase.confidence=b,this)},separator:function(b){return null==b?f[a].phrase.separator:(f[a].phrase.separator=b,this)},maxErrors:function(b){return null==b?f[a].phrase.max_errors:(f[a].phrase.max_errors=b,this)},gramSize:function(b){return null==b?f[a].phrase.gram_size:(f[a].phrase.gram_size=b,this)},forceUnigrams:function(b){return null==b?f[a].phrase.force_unigrams:(f[a].phrase.force_unigrams=b,this)},tokenLimit:function(b){return null==b?f[a].phrase.token_limit:(f[a].phrase.token_limit=b,this)},linearSmoothing:function(b,c,d){return 0===arguments.length?f[a].phrase.smoothing:(f[a].phrase.smoothing={linear:{trigram_lambda:b,bigram_lambda:c,unigram_lambda:d}},this)},laplaceSmoothing:function(b){return null==b?f[a].phrase.smoothing:(f[a].phrase.smoothing={laplace:{alpha:b}},this)},stupidBackoffSmoothing:function(b){return null==b?f[a].phrase.smoothing:(f[a].phrase.smoothing={stupid_backoff:{discount:b}},this)},highlight:function(b,c){return 0===arguments.length?f[a].phrase.highlight:(f[a].phrase.highlight={pre_tag:b,post_tag:c},this)},directGenerator:function(b){var c,d;if(null==f[a].phrase.direct_generator&&(f[a].phrase.direct_generator=[]),null==b)return f[a].phrase.direct_generator;if(x(b))f[a].phrase.direct_generator.push(b.toJSON());else{if(!e(b))throw new TypeError("Argument must be a Generator or array of Generators");for(f[a].phrase.direct_generator=[],c=0,d=b.length;d>c;c++){if(!x(b[c]))throw new TypeError("Argument must be an array of Generators");f[a].phrase.direct_generator.push(b[c].toJSON())}}return this}})},z.TermSuggester=function(a){var b,d,e=z.SuggesterMixin(a),f=e.toJSON();return f[a].term={},b=z.DirectSettingsMixin(f[a].term),d=z.SuggestContextMixin(f[a].term),c(e,b,d)},z.noConflict=function(){return A.ejs=B,this}}.call(this);var elasticui;!function(a){var b;!function(a){var b=function(){function b(){this.ejsObjects=[],this.jsonObjects=[]}return b.prototype.indexOf=function(b){return this.jsonObjects.indexOf(a.EjsTool.getJsonFromEjsObject(b))},b.prototype.add=function(b){var c=this.indexOf(b);-1==c&&(this.ejsObjects.push(b),this.jsonObjects.push(a.EjsTool.getJsonFromEjsObject(b)))},b.prototype.remove=function(a){var b=this.indexOf(a);b>-1&&(this.ejsObjects.splice(b,1),this.jsonObjects.splice(b,1))},b}();a.EjsCollection=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},elasticui;!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.getAsFilter=function(){return a.FilterTool.combineFilters(this.ejsObjects)},c.prototype.getAsORFilter=function(){return a.FilterTool.combineFiltersShould(this.ejsObjects)},c.prototype.contains=function(a){return this.indexOf(a)>-1},c}(a.EjsCollection);a.FilterCollection=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){}return a.combineFilters=function(a){return 1===a.length?a[0]:a.length>1?ejs.BoolFilter().must(a):null},a.combineFiltersShould=function(a){return 1===a.length?a[0]:a.length>1?ejs.BoolFilter().should(a):null},a}();a.FilterTool=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){a.services=angular.module("elasticui.services",[])}(b=a.services||(a.services={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){a.directives=angular.module("elasticui.directives",[])}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="EAC",b.scope=!0,b.controller=a.controllers.AggregationController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-aggregation")+" | euiCached",function(b){return a.aggregation.agg=b});var e=!0,f=b.attr("eui-filter-self");f&&(a.$watch(f,function(b){return a.aggregation.filterSelf=b}),e=a.$eval(f)),a.aggregation={agg:a.$eval(b.attr("eui-aggregation")+" | euiCached"),filterSelf:e},d.init()},b}return b}();b.AggregationDirective=c,b.directives.directive("euiAggregation",a.directives.AggregationDirective)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="A",b.scope=!0,b.controller=a.controllers.FilterController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-filter")+" | euiCached",function(b){return a.filter.filter=b});var e=!1,f=b.attr("eui-enabled");f&&(a.$watch(f,function(b){return a.filter.enabled=b}),e=a.$eval(f)),a.filter={filter:a.$eval(b.attr("eui-filter")+" | euiCached"),enabled:e},d.init()},b}return b}();b.FilterDirective=c,b.directives.directive("euiFilter",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="EAC",b.scope=!1,b.controller=a.controllers.IndexController,b.link=function(a,b,c,d){a.$watch(c.euiIndex,function(a){d.indexVM.index=a}),d.indexVM.index=a.$eval(c.euiIndex)},b}return b}();b.IndexDirective=c,b.directives.directive("euiIndex",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){var a={};return a.require="ngModel",a.link=function(a,b,c,d){d.$parsers.push(function(a){return!a}),d.$formatters.push(function(a){return!a})},a}return a}();a.InvertedDirective=b,a.directives.directive("euiInverted",b)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="EAC",b.scope=!0,b.controller=a.controllers.OrFilterController,b.link=function(){},b}return b}();b.OrFilterDirective=c,b.directives.directive("euiOrFilter",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="A",b.scope=!0,b.controller=a.controllers.SortController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-sort")+" | euiCached",function(b){return a.sorting.sort=b});var e=!1,f=b.attr("eui-enabled");
f&&(a.$watch(f,function(b){return a.sorting.enabled=b}),e=a.$eval(f)),a.sorting={sort:a.$eval(b.attr("eui-sort")+" | euiCached"),enabled:e},d.init()},b}return b}();b.SortDirective=c,b.directives.directive("euiSort",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){var a={};return a.restrict="EAC",a.scope=!1,a.transclude=!1,a.link={pre:function(a,b){var c=b.attr("eui-key");a.$watch(b.attr("eui-value"),function(b,d){angular.equals(b,d)||(a[c]=b)},!0),a[c]=a.$eval(b.attr("eui-value"))}},a}return a.$inject=["$timeout"],a}();a.VarDirective=b,a.directives.directive("euiVar",b)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){a.filters=angular.module("elasticui.filters",[])}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){var a={};return function(b){if(!b)return b;var c=angular.toJson(b.toJSON());return a[c]||(a[c]=b),a[c]}}return a}();a.CachedFilter=b,a.filters.filter("euiCached",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){return function(b,c){if(!b||!b.length)return b;var d=a.parseString(c);return b.map(function(b){return[b.key,a.getValue(b,d)]})}}return a.parseString=function(a){return a.split(".")},a.getValue=function(a,b){var c=a;return angular.forEach(b,function(a){return c?void(c=c[a]):c}),c},a}();a.MapFilter=b,a.filters.filter("euiMap",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){return function(a,b,c,d){void 0===d&&(d=5);for(var e=1;b>=e;e++)c+d>=e&&e>=c-d||c>e&&4>c-d||e>c+d&&4>b-(c+d)?a.push(e):1==e?a.push(1,-1):e==b&&a.push(-2,b);return a}}return a}();a.PageRangeFilter=b,a.filters.filter("euiPageRange",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){return function(a,b){b=parseInt(b);for(var c=0;b>c;c++)a.push(c);return a}}return a}();a.RangeFilter=b,a.filters.filter("euiRange",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){return function(a){return a?Math.round(a):a}}return a}();a.RoundFilter=b,a.filters.filter("euiRound",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){return function(a){return new Date(a).getTime()}}return a}();a.TimestampFilter=b,a.filters.filter("euiTimestamp",b)}(b=a.filters||(a.filters={}))}(elasticui||(elasticui={})),angular.module("elasticui.controllers",[]).controller(elasticui.controllers);var elasticui;!function(a){var b;!function(b){var c=function(){function b(a){this.scope=a}return b.prototype.init=function(){var b=this;this.scope.$parent.$watch("indexVM.results",function(){return b.updateResults()}),this.scope.$watch("aggregation.agg",function(c,d){a.util.EjsTool.equals(d,c)||(b.previousProvider&&b.scope.indexVM.aggregationProviders.remove(b.previousProvider),b.updateAgg())}),this.scope.$watch("aggregation.filterSelf",function(a,c){a!==c&&(b.previousProvider&&b.scope.indexVM.aggregationProviders.remove(b.previousProvider),b.updateAgg())}),this.scope.$on("$destroy",function(){b.previousProvider&&b.scope.indexVM.aggregationProviders.remove(b.previousProvider)}),this.updateAgg()},b.prototype.updateResults=function(){var a=this.scope.indexVM.results;if(this.scope.aggregation.agg&&a&&a.aggregations){var c=b.getAggName(this.scope.aggregation.agg),d=Object.keys(a.aggregations).filter(function(a){return a==c||a=="filtered_"+c})[0],e=a.aggregations[d];d=="filtered_"+c&&(e=e[c]),this.scope.aggResult=e}},b.prototype.updateAgg=function(){var a=this,b=null;this.scope.aggregation.agg&&(b=function(b){return a.getAggregation(b)}),b&&this.scope.indexVM.aggregationProviders.add(b),this.previousProvider=b},b.getAggName=function(a){return Object.keys(a.toJSON())[0]},b.prototype.getAggregationExplicit=function(c,d,e){var f=this;if(!c)return null;var g=e;d||(g=g.filter(function(a){return a!=f.scope.combinedFilter&&("undefined"==typeof a.field||a.field()!=c.field())}));var h=a.util.FilterTool.combineFilters(g);return null!=h&&(c=new ejs.FilterAggregation("filtered_"+b.getAggName(c)).filter(h).agg(c)),c},b.prototype.getAggregation=function(a){return this.getAggregationExplicit(this.scope.aggregation.agg,this.scope.aggregation.filterSelf,a)},b.$inject=["$scope"],b}();b.AggregationController=c}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(a){this.scope=a}return b.prototype.init=function(){var b=this;if(this.scope.filter.filter){var c=this.scope.filters.contains(this.scope.filter.filter);!c&&this.scope.filter.enabled&&(this.scope.filters.add(this.scope.filter.filter),c=!0)}this.scope.filter.enabled=c,this.scope.$watch("filter.enabled",function(a,c){a!==c&&b.updateFilter()}),this.scope.$watch("filter.filter",function(c,d){a.util.EjsTool.equals(d,c)||(d&&b.scope.filters.remove(d),b.updateFilter())})},b.prototype.updateFilter=function(){this.scope.filter.filter&&(this.scope.filter.enabled?this.scope.filters.add(this.scope.filter.filter):this.scope.filters.remove(this.scope.filter.filter))},b.$inject=["$scope"],b}();b.FilterController=c}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(b,c,d,e,f){var g=this;this.filters=new a.util.FilterCollection,this.indexVM={host:null,query:null,sort:null,aggregationProviders:new a.util.SimpleSet,filters:this.filters,highlight:null,loaded:!1,page:1,index:null,loading:!1,pageCount:0,pageSize:10,results:null,refresh:function(a){return void 0===a&&(a=!0),g.refresh(a)},error:null,autoLoad:!0},this.searchPromise=null,this.refreshPromise=null,this.es=e,this.$rootScope=f,b.indexVM=this.indexVM,b.ejs=d.ejs,b.filters=this.filters,b.$watchCollection("indexVM.filters.ejsObjects",function(){g.indexVM.page=1,g.search()}),b.$watchCollection("indexVM.aggregationProviders.objects",function(){return g.search()}),b.$watch("indexVM.host",function(){null!=g.indexVM.host&&e.setHost(g.indexVM.host)&&g.search()}),b.$watch("indexVM.sort",function(){g.indexVM.page=1,g.search()}),b.$watch("indexVM.pageSize",function(){g.indexVM.page=1,g.search()}),b.$watch("indexVM.page",function(){return g.search()}),b.$watch("indexVM.index",function(){return g.search()}),b.$watch("indexVM.query",function(){return g.search()}),b.$watch("indexVM.highlight",function(){return g.search()}),c(function(){return g.loaded()},200)}return b.prototype.loaded=function(){this.indexVM.loaded||(this.indexVM.loaded=!0,this.indexVM.autoLoad&&this.search())},b.prototype.getSearchPromise=function(){for(var a=ejs.Request(),b=0;b<this.indexVM.aggregationProviders.objects.length;b++){var c=this.indexVM.aggregationProviders.objects[b],d=c(this.filters.ejsObjects);a.agg(d)}var e=this.filters.getAsFilter();null!=e&&a.filter(e),a.query(null!=this.indexVM.query?this.indexVM.query:ejs.MatchAllQuery()),null!=this.indexVM.sort&&a.sort(this.indexVM.sort),null!=this.indexVM.highlight&&a.highlight(this.indexVM.highlight);var f=this.es.client.search({index:this.indexVM.index,size:this.indexVM.pageSize,from:this.indexVM.pageSize*(this.indexVM.page-1),body:a});return f},b.prototype.onError=function(a){this.$rootScope.$broadcast("eui-search-error",a),this.indexVM.error=a},b.prototype.search=function(){var a=this;if(this.indexVM.loaded&&this.indexVM.index){if(null!=this.refreshPromise){var b=this.refreshPromise;this.refreshPromise=null,b.abort()}if(null!=this.searchPromise){var b=this.searchPromise;this.searchPromise=null,b.abort()}this.indexVM.loading=!0,this.searchPromise=this.getSearchPromise(),this.searchPromise.then(function(b){a.searchPromise=null,a.indexVM.error=null,a.onResult(b)},function(b){a.searchPromise&&(a.searchPromise=null,a.onError(b))})}},b.prototype.refresh=function(a){var b=this;void 0===a&&(a=!0),this.indexVM.loaded&&this.indexVM.index&&null==this.searchPromise&&(this.indexVM.loading=!0,this.refreshPromise=this.getSearchPromise(),this.refreshPromise.then(function(c){b.refreshPromise=null,b.indexVM.error=null,b.onResult(c,a)},function(a){b.refreshPromise&&(b.refreshPromise=null,b.onError(a))}))},b.prototype.onResult=function(a,b){void 0===b&&(b=!1),b&&null!=this.indexVM.results&&this.indexVM.results.hits.total==a.hits.total||(this.indexVM.results=a,this.indexVM.pageCount=Math.ceil(this.indexVM.results.hits.total/this.indexVM.pageSize)),this.indexVM.loading=!1},b.$inject=["$scope","$timeout","$window","es","$rootScope"],b}();b.IndexController=c}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(b){var c=this;this.filters=new a.util.FilterCollection,b.filters=this.filters,b.$watchCollection("filters.ejsObjects",function(){return c.updateCombinedFilter()}),this.scope=b}return b.prototype.updateCombinedFilter=function(){this.scope.combinedFilter&&this.scope.$parent.filters.remove(this.scope.combinedFilter),this.scope.combinedFilter=this.filters.getAsORFilter(),this.scope.combinedFilter&&this.scope.$parent.filters.add(this.scope.combinedFilter)},b.$inject=["$scope"],b}();b.OrFilterController=c}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(a){this.scope=a}return a.prototype.init=function(){var a=this;this.scope.$watch("indexVM.sort",function(){return a.updateEnabled()}),this.scope.$watch("sorting.sort",function(){return a.updateSort()}),this.scope.$watch("sorting.enabled",function(b,c){b!==c&&a.updateSort()}),this.updateSort()},a.prototype.updateSort=function(){this.scope.sorting.enabled?this.scope.indexVM.sort=this.scope.sorting.sort:this.isEnabledOnIndexScope()&&(this.scope.indexVM.sort=null)},a.prototype.updateEnabled=function(){this.scope.sorting.enabled=this.isEnabledOnIndexScope()},a.prototype.isEnabledOnIndexScope=function(){return null!=this.scope.indexVM.sort&&angular.equals(this.scope.indexVM.sort.toJSON(),this.scope.sorting.sort.toJSON())},a.$inject=["$scope"],a}();a.SortController=b}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(a,b){this.esFactory=a,this.setHost(b)}return a.prototype.setHost=function(a){return a===this.host?!1:(this.host=a,this.client=this.esFactory({host:a,calcDeadTimeout:"flat"}),!0)},a.$inject=["esFactory","euiHost"],a}();a.ElasticService=b,a.services.service("es",b)}(b=a.services||(a.services={}))}(elasticui||(elasticui={})),angular.module("elasticui",["elasticsearch","elasticui.filters","elasticui.controllers","elasticui.services","elasticui.directives","elasticui.widgets.directives"]);var elasticui;!function(a){var b;!function(a){var b;!function(a){a.directives=angular.module("elasticui.widgets.directives",[]),a.default_agg_count=0}(b=a.directives||(a.directives={}))}(b=a.widgets||(a.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(c){var d={};return d.restrict="E",d.scope=!0,d.link={pre:function(d,e,f){a.util.AngularTool.setupBinding(c,d,f,["field","size"]),d.agg_name=d.field.replace(/[^a-z_0-9]/gim,"_")+"_"+b.default_agg_count++}},d.template='\r\n            <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation(agg_name).field(field).size(size)">\r\n                <li ng-repeat="bucket in aggResult.buckets">\r\n                    <label class="checkbox" eui-filter="ejs.TermsFilter(field, bucket.key)">\r\n                        <input type="checkbox" ng-model="filter.enabled">\r\n                        {{bucket.key}} ({{bucket.doc_count}})\r\n                    </label>\r\n                </li>\r\n            </ul>',d}return c.$inject=["$parse"],c}();b.ChecklistDirective=c,b.directives.directive("euiChecklist",c)}(c=b.directives||(b.directives={}))}(b=a.widgets||(a.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){var a={};return a.restrict="E",a.scope=!0,a.template='\r\n            <ul class="pager">\r\n                <li ng-if="indexVM.page <= 1" class="disabled"><a href="">Previous</a></li>\r\n                <li ng-if="indexVM.page > 1"><a href="" ng-click="indexVM.page=indexVM.page - 1">Previous</a></li>\r\n                <li ng-if="indexVM.pageCount <= indexVM.page" class="disabled"><a href="">Next</a></li>\r\n                <li ng-if="indexVM.pageCount > indexVM.page"><a href="" ng-click="indexVM.page=indexVM.page + 1">Next</a></li>\r\n            </ul>',a}return a}();a.SimplePagingDirective=b,a.directives.directive("euiSimplePaging",b)}(b=a.directives||(a.directives={}))}(b=a.widgets||(a.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c;!function(b){var c=function(){function c(c){var d={};return d.restrict="E",d.scope=!0,d.link={pre:function(d,e,f){a.util.AngularTool.setupBinding(c,d,f,["field","size"]),d.agg_name=d.field.replace(/[^a-z_0-9]/gim,"_")+"_"+b.default_agg_count++}},d.template='\r\n            <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation(agg_name).field(field).size(size)">\r\n                <li ng-repeat="bucket in aggResult.buckets">\r\n                    <label eui-filter="ejs.TermsFilter(field, bucket.key)">\r\n                        <span ng-if="!filter.enabled"><a href="" ng-click="filter.enabled=true">{{bucket.key}} <span class="muted">({{bucket.doc_count}})</span></a></span>\r\n                        <span ng-if="filter.enabled">{{bucket.key}} <a href="" ng-click="filter.enabled=false" class="facet-remove">x</a></span>\r\n                    </label>\r\n                </li>\r\n            </ul>',d}return c.$inject=["$parse"],c}();b.SingleselectDirective=c,b.directives.directive("euiSingleselect",c)}(c=b.directives||(b.directives={}))}(b=a.widgets||(a.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(a){this.scope=a}return a.prototype.init=function(){var a=this;this.scope.$watch("indexVM.highlight",function(){return a.updateEnabled()}),this.scope.$watch("highlighting.highlight",function(){return a.updateHighlight()}),this.scope.$watch("highlighting.enabled",function(b,c){b!==c&&a.updateHighlight()}),this.updateHighlight()},a.prototype.updateHighlight=function(){this.scope.highlighting.enabled?this.scope.indexVM.highlight=this.scope.highlighting.highlight:this.isEnabledOnIndexScope()&&(this.scope.indexVM.highlight=null)},a.prototype.updateEnabled=function(){this.scope.highlighting.enabled=this.isEnabledOnIndexScope()},a.prototype.isEnabledOnIndexScope=function(){return null!=this.scope.indexVM.highlight&&angular.equals(this.scope.indexVM.highlight.toJSON(),this.scope.highlighting.highlight.toJSON())},a.$inject=["$scope"],a}();a.HighlightController=b}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(a){this.scope=a}return a.prototype.init=function(){var a=this;this.scope.$watch("indexVM.host",function(){return a.readHost()}),this.scope.$watch("host",function(){return a.updateHost()}),this.updateHost()},a.prototype.updateHost=function(){null!==this.scope.host&&(this.scope.indexVM.host=this.scope.host)},a.prototype.readHost=function(){this.scope.host=this.scope.indexVM.host},a.$inject=["$scope"],a}();a.HostController=b}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(a){this.scope=a}return b.prototype.init=function(){var b=this;this.scope.$watch("query.enabled",function(a,c){a!==c&&b.updateQuery()}),this.scope.$watch("query.query",function(c,d){a.util.EjsTool.equals(d,c)||b.updateQuery()}),this.updateQuery()},b.prototype.updateQuery=function(){this.scope.query.query&&(this.scope.indexVM.query=this.scope.query.enabled?this.scope.query.query:null)},b.$inject=["$scope"],b}();b.QueryController=c}(b=a.controllers||(a.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="A",b.scope=!0,b.controller=a.controllers.HighlightController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-highlight")+" | euiCached",function(b){return a.highlighting.highlight=b});var e=!1,f=b.attr("eui-enabled");f&&(a.$watch(f,function(b){return a.highlighting.enabled=b}),e=a.$eval(f)),a.highlighting={highlight:a.$eval(b.attr("eui-highlight")+" | euiCached"),enabled:e},d.init()},b}return b}();b.HighlightDirective=c,b.directives.directive("euiHighlight",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="A",b.scope=!0,b.controller=a.controllers.HostController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-host"),function(b){return a.host=b}),a.host=a.$eval(b.attr("eui-host")),d.init()},b}return b}();b.HostDirective=c,b.directives.directive("euiHost",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c=function(){function b(){var b={};return b.restrict="A",b.scope=!0,b.controller=a.controllers.QueryController,b.link=function(a,b,c,d){a.$watch(b.attr("eui-query")+" | euiCached",function(b){return a.query.query=b});var e=!1,f=b.attr("eui-enabled");f&&(a.$watch(f,function(b){return a.query.enabled=b}),e=a.$eval(f)),a.query={query:a.$eval(b.attr("eui-query")+" | euiCached"),enabled:e},d.init()},b}return b}();b.QueryDirective=c,b.directives.directive("euiQuery",c)}(b=a.directives||(a.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){}return a.setupBinding=function(a,b,c,d){angular.forEach(d,function(d){b.$watch(c[d],function(a){b[d]!=a&&(b[d]=a)}),b[d]=a(c[d])(b)})},a}();a.AngularTool=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){}return a.getJsonFromEjsObject=function(a){return angular.toJson(a.toJSON())},a.equals=function(a,b){return!a&&!b||a&&b&&this.getJsonFromEjsObject(a)==this.getJsonFromEjsObject(b)},a}();a.EjsTool=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(a){var b=function(){function a(){this.objects=[]}return a.prototype.indexOf=function(a){return this.objects.indexOf(a)},a.prototype.add=function(a){var b=this.indexOf(a);-1==b&&this.objects.push(a)},a.prototype.remove=function(a){var b=this.indexOf(a);b>-1&&this.objects.splice(b,1)},a}();a.SimpleSet=b}(b=a.util||(a.util={}))}(elasticui||(elasticui={}));var elasticui;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(b){var c={};return c.restrict="E",c.scope=!0,c.link={pre:function(c,d,e){a.util.AngularTool.setupBinding(b,c,e,["field"])}},c.template='\r\n            <input type="text" eui-query="ejs.MatchQuery(field, querystring)" ng-model="querystring" eui-enabled="querystring.length" />\r\n            ',c}return b.$inject=["$parse"],b}();b.SearchboxDirective=c,b.directives.directive("euiSearchbox",c)}(c=b.directives||(b.directives={}))}(b=a.widgets||(a.widgets={}))}(elasticui||(elasticui={})),function(){function a(a,b,c){function d(d,k){var l=k.dirPaginate,m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n=/\|\s*itemsPerPage\s*:[^|]*/;if(null===m[2].match(n))throw"pagination directive: the 'itemsPerPage' filter must be set.";var o=m[2].replace(n,""),p=b(o);g(d);var q=k.paginationId||j;return c.registerInstance(q),function(d,g,k){var m=b(k.paginationId)(d)||k.paginationId||j;c.registerInstance(m);var n=e(l,m);f(g,k,n),h(g);var o=a(g),q=i(d,k,m);c.setCurrentPageParser(m,q,d),"undefined"!=typeof k.totalItems?(c.setAsyncModeTrue(m),d.$watch(function(){return b(k.totalItems)(d)},function(a){a>=0&&c.setCollectionLength(m,a)})):d.$watchCollection(function(){return p(d)},function(a){a&&c.setCollectionLength(m,a.length)}),o(d)}}function e(a,b){var c,d=!!a.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return c=b===j||d?a:a.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+b+"'")}function f(a,b,c){a[0].hasAttribute("dir-paginate-start")||a[0].hasAttribute("data-dir-paginate-start")?(b.$set("ngRepeatStart",c),a.eq(a.length-1).attr("ng-repeat-end",!0)):b.$set("ngRepeat",c)}function g(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).attr("dir-paginate-no-compile",!0)})}function h(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).removeAttr("dir-paginate-no-compile")}),a.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),a.eq(a.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function i(a,c,d){var e;if(c.currentPage)e=b(c.currentPage);else{var f=d+"__currentPage";a[f]=1,e=b(f)}return e}return{terminal:!0,multiElement:!0,compile:d}}function b(){return{priority:5e3,terminal:!0}}function c(a){a.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function d(a,b){function c(b,c,e){function g(c){k(c)&&(b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,i(),b.onPageChange&&b.onPageChange({newPageNumber:c}))}function h(){var c=parseInt(a.getCurrentPage(m))||1;b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,b.pagination.last=b.pages[b.pages.length-1],b.pagination.last<b.pagination.current?b.setCurrent(b.pagination.last):i()}function i(){var c=a.getCurrentPage(m),d=a.getItemsPerPage(m),e=a.getCollectionLength(m);b.range.lower=(c-1)*d+1,b.range.upper=Math.min(c*d,e),b.range.total=e}function k(a){return f.test(a)&&a>0&&a<=b.pagination.last}var l=e.paginationId||j,m=b.paginationId||e.paginationId||j;if(!a.isRegistered(m)&&!a.isRegistered(l)){var n=m!==j?" (id: "+m+") ":" ";throw"pagination directive: the pagination controls"+n+"cannot be used without the corresponding pagination directive."}b.maxSize||(b.maxSize=9),b.directionLinks=angular.isDefined(e.directionLinks)?b.$parent.$eval(e.directionLinks):!0,b.boundaryLinks=angular.isDefined(e.boundaryLinks)?b.$parent.$eval(e.boundaryLinks):!1;var o=Math.max(b.maxSize,5);b.pages=[],b.pagination={last:1,current:1},b.range={lower:1,upper:1,total:1},b.$watch(function(){return(a.getCollectionLength(m)+1)*a.getItemsPerPage(m)},function(a){a>0&&h()}),b.$watch(function(){return a.getItemsPerPage(m)},function(a,c){a!=c&&"undefined"!=typeof c&&g(b.pagination.current)}),b.$watch(function(){return a.getCurrentPage(m)},function(a,b){a!=b&&g(a)}),b.setCurrent=function(b){k(b)&&(b=parseInt(b,10),a.setCurrentPage(m,b))}}function d(a,b,c,d){var f,g=[],h=Math.ceil(b/c),i=Math.ceil(d/2);f=i>=a?"start":a>h-i?"end":"middle";for(var j=h>d,k=1;h>=k&&d>=k;){var l=e(k,a,d,h),m=2===k&&("middle"===f||"end"===f),n=k===d-1&&("middle"===f||"start"===f);j&&(m||n)?g.push("..."):g.push(l),k++}return g}function e(a,b,c,d){var e=Math.ceil(c/2);return a===c?d:1===a?a:d>c?b>d-e?d-c+a:b>e?b-e+a:a:a}var f=/^\d+$/;return{restrict:"AE",templateUrl:function(a,c){return c.templateUrl||b.getPath()},scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?"},link:c}}function e(a){return function(b,c,d){if("undefined"==typeof d&&(d=j),!a.isRegistered(d))throw"pagination directive: the itemsPerPage id argument (id: "+d+") does not match a registered pagination-id.";var e,f;return b instanceof Array?(c=parseInt(c)||9999999999,f=a.isAsyncMode(d)?0:(a.getCurrentPage(d)-1)*c,e=f+c,a.setItemsPerPage(d,c),b.slice(f,e)):b}}function f(){var a,b={};this.registerInstance=function(c){"undefined"==typeof b[c]&&(b[c]={asyncMode:!1},a=c)},this.isRegistered=function(a){return"undefined"!=typeof b[a]},this.getLastInstanceId=function(){return a},this.setCurrentPageParser=function(a,c,d){b[a].currentPageParser=c,b[a].context=d},this.setCurrentPage=function(a,c){b[a].currentPageParser.assign(b[a].context,c)},this.getCurrentPage=function(a){var c=b[a].currentPageParser;return c?c(b[a].context):1},this.setItemsPerPage=function(a,c){b[a].itemsPerPage=c},this.getItemsPerPage=function(a){return b[a].itemsPerPage},this.setCollectionLength=function(a,c){b[a].collectionLength=c},this.getCollectionLength=function(a){return b[a].collectionLength},this.setAsyncModeTrue=function(a){b[a].asyncMode=!0},this.isAsyncMode=function(a){return b[a].asyncMode}}function g(){var a="angularUtils.directives.dirPagination.template";this.setPath=function(b){a=b},this.$get=function(){return{getPath:function(){return a}}}}var h,i="angularUtils.directives.dirPagination",j="__default";try{h=angular.module(i)}catch(k){h=angular.module(i,[])}h.directive("dirPaginate",["$compile","$parse","paginationService",a]).directive("dirPaginateNoCompile",b).directive("dirPaginationControls",["paginationService","paginationTemplate",d]).filter("itemsPerPage",["paginationService",e]).service("paginationService",f).provider("paginationTemplate",g).run(["$templateCache",c])}(),function(a,b,c){"use strict";function d(b){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/WebKit/.test(a.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1},this.opts={},this.events={};var c=this;this.onDrop=function(a){c.opts.onDropStopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.dataTransfer;b.items&&b.items[0]&&b.items[0].webkitGetAsEntry?c.webkitReadDataTransfer(a):c.addFiles(b.files,a)},this.preventEvent=function(a){a.preventDefault()},this.opts=d.extend({},this.defaults,b||{})}}function e(a,b){this.flowObj=a,this.file=b,this.name=b.fileName||b.name,this.size=b.size,this.relativePath=b.relativePath||b.webkitRelativePath||this.name,this.uniqueIdentifier=a.generateUniqueIdentifier(b),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function f(a,b,c){this.flowObj=a,this.fileObj=b,this.fileObjSize=b.size,this.offset=c,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;var d=this.flowObj.opts.chunkSize;this.startByte=this.offset*d,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*d),this.xhr=null,this.fileObjSize-this.endByte<d&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);var e=this;this.event=function(a,b){b=Array.prototype.slice.call(arguments),b.unshift(e),e.fileObj.chunkEvent.apply(e.fileObj,b)},this.progressHandler=function(a){a.lengthComputable&&(e.loaded=a.loaded,e.total=a.total),e.event("progress",a)},this.testHandler=function(a){var b=e.status(!0);"error"===b?(e.event(b,e.message()),e.flowObj.uploadNextChunk()):"success"===b?(e.tested=!0,e.event(b,e.message()),e.flowObj.uploadNextChunk()):e.fileObj.paused||(e.tested=!0,e.send())},this.doneHandler=function(a){var b=e.status();if("success"===b||"error"===b)e.event(b,e.message()),e.flowObj.uploadNextChunk();else{e.event("retry",e.message()),e.pendingRetry=!0,e.abort(),e.retries++;var c=e.flowObj.opts.chunkRetryInterval;null!==c?setTimeout(function(){e.send()},c):e.send()}}}function g(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}function h(a,b){return"function"==typeof a&&(b=Array.prototype.slice.call(arguments),a=a.apply(null,b.slice(1))),a}function i(a,b){setTimeout(a.bind(b),0)}function j(a,b){return k(arguments,function(b){b!==a&&k(b,function(b,c){a[c]=b})}),a}function k(a,b,c){if(a){var d;if("undefined"!=typeof a.length){for(d=0;d<a.length;d++)if(b.call(c,a[d],d)===!1)return}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d)===!1)return}}var l=a.navigator.msPointerEnabled;d.prototype={on:function(a,b){a=a.toLowerCase(),this.events.hasOwnProperty(a)||(this.events[a]=[]),this.events[a].push(b)},off:function(a,b){a!==c?(a=a.toLowerCase(),b!==c?this.events.hasOwnProperty(a)&&g(this.events[a],b):delete this.events[a]):this.events={}},fire:function(a,b){b=Array.prototype.slice.call(arguments),a=a.toLowerCase();var c=!1;return this.events.hasOwnProperty(a)&&k(this.events[a],function(a){c=a.apply(this,b.slice(1))===!1||c},this),"catchall"!=a&&(b.unshift("catchAll"),c=this.fire.apply(this,b)===!1||c),!c},webkitReadDataTransfer:function(a){function b(a){g+=a.length,k(a,function(a){if(a.isFile){var e=a.fullPath;a.file(function(a){c(a,e)},d)}else a.isDirectory&&a.createReader().readEntries(b,d)}),e()}function c(a,b){a.relativePath=b.substring(1),h.push(a),e()}function d(a){throw a}function e(){0==--g&&f.addFiles(h,a)}var f=this,g=a.dataTransfer.items.length,h=[];k(a.dataTransfer.items,function(a){var f=a.webkitGetAsEntry();return f?void(f.isFile?c(a.getAsFile(),f.fullPath):f.createReader().readEntries(b,d)):void e()})},generateUniqueIdentifier:function(a){var b=this.opts.generateUniqueIdentifier;if("function"==typeof b)return b(a);var c=a.relativePath||a.webkitRelativePath||a.fileName||a.name;return a.size+"-"+c.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(a){var b=!1;if(this.opts.prioritizeFirstAndLastChunk&&(k(this.files,function(a){return!a.paused&&a.chunks.length&&"pending"===a.chunks[0].status()&&0===a.chunks[0].preprocessState?(a.chunks[0].send(),b=!0,!1):!a.paused&&a.chunks.length>1&&"pending"===a.chunks[a.chunks.length-1].status()&&0===a.chunks[0].preprocessState?(a.chunks[a.chunks.length-1].send(),b=!0,!1):void 0}),b))return b;if(k(this.files,function(a){return a.paused||k(a.chunks,function(a){return"pending"===a.status()&&0===a.preprocessState?(a.send(),b=!0,!1):void 0}),b?!1:void 0}),b)return!0;var c=!1;return k(this.files,function(a){return a.isComplete()?void 0:(c=!0,!1)}),c||a||i(function(){this.fire("complete")},this),!1},assignBrowse:function(a,c,d,e){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){var f;"INPUT"===a.tagName&&"file"===a.type?f=a:(f=b.createElement("input"),f.setAttribute("type","file"),j(f.style,{visibility:"hidden",position:"absolute"}),a.appendChild(f),a.addEventListener("click",function(){f.click()},!1)),this.opts.singleFile||d||f.setAttribute("multiple","multiple"),c&&f.setAttribute("webkitdirectory","webkitdirectory"),k(e,function(a,b){
f.setAttribute(b,a)});var g=this;f.addEventListener("change",function(a){g.addFiles(a.target.files,a),a.target.value=""},!1)},this)},assignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){a.addEventListener("dragover",this.preventEvent,!1),a.addEventListener("dragenter",this.preventEvent,!1),a.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){a.removeEventListener("dragover",this.preventEvent),a.removeEventListener("dragenter",this.preventEvent),a.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var a=!1;return k(this.files,function(b){return b.isUploading()?(a=!0,!1):void 0}),a},_shouldUploadNext:function(){var a=0,b=!0,c=this.opts.simultaneousUploads;return k(this.files,function(d){k(d.chunks,function(d){return"uploading"===d.status()&&(a++,a>=c)?(b=!1,!1):void 0})}),b&&a},upload:function(){var a=this._shouldUploadNext();if(a!==!1){this.fire("uploadStart");for(var b=!1,c=1;c<=this.opts.simultaneousUploads-a;c++)b=this.uploadNextChunk(!0)||b;b||i(function(){this.fire("complete")},this)}},resume:function(){k(this.files,function(a){a.resume()})},pause:function(){k(this.files,function(a){a.pause()})},cancel:function(){for(var a=this.files.length-1;a>=0;a--)this.files[a].cancel()},progress:function(){var a=0,b=0;return k(this.files,function(c){a+=c.progress()*c.size,b+=c.size}),b>0?a/b:0},addFile:function(a,b){this.addFiles([a],b)},addFiles:function(a,b){var c=[];k(a,function(a){if((!l||l&&a.size>0)&&(a.size%4096!==0||"."!==a.name&&"."!==a.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(a))){var d=new e(this,a);this.fire("fileAdded",d,b)&&c.push(d)}},this),this.fire("filesAdded",c,b)&&k(c,function(a){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(a)},this),this.fire("filesSubmitted",c,b)},removeFile:function(a){for(var b=this.files.length-1;b>=0;b--)this.files[b]===a&&(this.files.splice(b,1),a.abort())},getFromUniqueIdentifier:function(a){var b=!1;return k(this.files,function(c){c.uniqueIdentifier===a&&(b=c)}),b},getSize:function(){var a=0;return k(this.files,function(b){a+=b.size}),a},sizeUploaded:function(){var a=0;return k(this.files,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){var a=0,b=0;return k(this.files,function(c){c.paused||c.error||(a+=c.size-c.sizeUploaded(),b+=c.averageSpeed)}),a&&!b?Number.POSITIVE_INFINITY:a||b?Math.floor(a/b):0}},e.prototype={measureSpeed:function(){var a=Date.now()-this._lastProgressCallback;if(a){var b=this.flowObj.opts.speedSmoothingFactor,c=this.sizeUploaded();this.currentSpeed=Math.max((c-this._prevUploadedSize)/a*1e3,0),this.averageSpeed=b*this.currentSpeed+(1-b)*this.averageSpeed,this._prevUploadedSize=c}},chunkEvent:function(a,b,c){switch(b){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,a),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,c,a),this.flowObj.fire("error",c,this,a);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,a),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,c,a));break;case"retry":this.flowObj.fire("fileRetry",this,a)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(a){this.currentSpeed=0,this.averageSpeed=0;var b=this.chunks;a&&(this.chunks=[]),k(b,function(a){"uploading"===a.status()&&(a.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){this.abort(!0),this.error=!1,this._prevProgress=0;for(var a=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,b=Math.max(a(this.file.size/this.flowObj.opts.chunkSize),1),c=0;b>c;c++)this.chunks.push(new f(this.flowObj,this,c))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var a=0;k(this.chunks,function(b){a+=b.progress()*(b.endByte-b.startByte)});var b=a/this.size;return this._prevProgress=Math.max(this._prevProgress,b>.9999?1:b),this._prevProgress},isUploading:function(){var a=!1;return k(this.chunks,function(b){return"uploading"===b.status()?(a=!0,!1):void 0}),a},isComplete:function(){var a=!1;return k(this.chunks,function(b){var c=b.status();return"pending"===c||"uploading"===c||1===b.preprocessState?(a=!0,!1):void 0}),!a},sizeUploaded:function(){var a=0;return k(this.chunks,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){if(this.paused||this.error)return 0;var a=this.size-this.sizeUploaded();return a&&!this.averageSpeed?Number.POSITIVE_INFINITY:a||this.averageSpeed?Math.floor(a/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},f.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(a,b){return a+=a.indexOf("?")<0?"?":"&",a+b.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var a=h(this.flowObj.opts.testMethod,this.fileObj,this),b=this.prepareXhrRequest(a,!0);this.xhr.send(b)},preprocessFinished:function(){this.preprocessState=2,this.send()},send:function(){var a=this.flowObj.opts.preprocess;if("function"==typeof a)switch(this.preprocessState){case 0:return this.preprocessState=1,void a(this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;var b=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",c=this.fileObj.file[b](this.startByte,this.endByte,this.fileObj.file.type);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var d=h(this.flowObj.opts.uploadMethod,this.fileObj,this),e=this.prepareXhrRequest(d,!1,this.flowObj.opts.method,c);this.xhr.send(e)},abort:function(){var a=this.xhr;this.xhr=null,a&&a.abort()},status:function(a){return this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!a&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var a=this.status();return"success"===a||"error"===a?1:"pending"===a?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var a=this.endByte-this.startByte;return"success"!==this.status()&&(a=this.progress()*a),a},prepareXhrRequest:function(a,b,c,d){var e=h(this.flowObj.opts.query,this.fileObj,this,b);e=j(this.getParams(),e);var f=h(this.flowObj.opts.target,this.fileObj,this,b),g=null;if("GET"===a||"octet"===c){var i=[];k(e,function(a,b){i.push([encodeURIComponent(b),encodeURIComponent(a)].join("="))}),f=this.getTarget(f,i),g=d||null}else g=new FormData,k(e,function(a,b){g.append(b,a)}),g.append(this.flowObj.opts.fileParameterName,d,this.fileObj.file.name);return this.xhr.open(a,f,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,k(h(this.flowObj.opts.headers,this.fileObj,this,b),function(a,b){this.xhr.setRequestHeader(b,a)},this),g}},d.evalOpts=h,d.extend=j,d.each=k,d.FlowFile=e,d.FlowChunk=f,d.version="2.9.0","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=d:(a.Flow=d,"function"==typeof define&&define.amd&&define("flow",[],function(){return d}))}(window,document),!function(a,b,c){"use strict";function d(b){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/WebKit/.test(a.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],onDropStopPropagation:!1},this.opts={},this.events={};var c=this;this.onDrop=function(a){c.opts.onDropStopPropagation&&a.stopPropagation(),a.preventDefault();var b=a.dataTransfer;b.items&&b.items[0]&&b.items[0].webkitGetAsEntry?c.webkitReadDataTransfer(a):c.addFiles(b.files,a)},this.preventEvent=function(a){a.preventDefault()},this.opts=d.extend({},this.defaults,b||{})}}function e(a,b){this.flowObj=a,this.file=b,this.name=b.fileName||b.name,this.size=b.size,this.relativePath=b.relativePath||b.webkitRelativePath||this.name,this.uniqueIdentifier=a.generateUniqueIdentifier(b),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function f(a,b,c){this.flowObj=a,this.fileObj=b,this.fileObjSize=b.size,this.offset=c,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;var d=this.flowObj.opts.chunkSize;this.startByte=this.offset*d,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*d),this.xhr=null,this.fileObjSize-this.endByte<d&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);var e=this;this.progressHandler=function(a){a.lengthComputable&&(e.loaded=a.loaded,e.total=a.total),e.fileObj.chunkEvent("progress")},this.testHandler=function(){var a=e.status();"success"===a?(e.tested=!0,e.fileObj.chunkEvent(a,e.message()),e.flowObj.uploadNextChunk()):e.fileObj.paused||(e.tested=!0,e.send())},this.doneHandler=function(){var a=e.status();if("success"===a||"error"===a)e.fileObj.chunkEvent(a,e.message()),e.flowObj.uploadNextChunk();else{e.fileObj.chunkEvent("retry",e.message()),e.pendingRetry=!0,e.abort(),e.retries++;var b=e.flowObj.opts.chunkRetryInterval;null!==b?setTimeout(function(){e.send()},b):e.send()}}}function g(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}function h(a,b){return"function"==typeof a&&(b=Array.prototype.slice.call(arguments),a=a.apply(null,b.slice(1))),a}function i(a,b){setTimeout(a.bind(b),0)}function j(a){return k(arguments,function(b){b!==a&&k(b,function(b,c){a[c]=b})}),a}function k(a,b,c){if(a){var d;if("undefined"!=typeof a.length){for(d=0;d<a.length;d++)if(b.call(c,a[d],d)===!1)return}else for(d in a)if(a.hasOwnProperty(d)&&b.call(c,a[d],d)===!1)return}}d.prototype={on:function(a,b){a=a.toLowerCase(),this.events.hasOwnProperty(a)||(this.events[a]=[]),this.events[a].push(b)},off:function(a,b){a!==c?(a=a.toLowerCase(),b!==c?this.events.hasOwnProperty(a)&&g(this.events[a],b):delete this.events[a]):this.events={}},fire:function(a,b){b=Array.prototype.slice.call(arguments),a=a.toLowerCase();var c=!1;return this.events.hasOwnProperty(a)&&k(this.events[a],function(a){c=a.apply(this,b.slice(1))===!1||c}),"catchall"!=a&&(b.unshift("catchAll"),c=this.fire.apply(this,b)===!1||c),!c},webkitReadDataTransfer:function(a){function b(a){g+=a.length,k(a,function(a){if(a.isFile){var e=a.fullPath;a.file(function(a){c(a,e)},d)}else a.isDirectory&&a.createReader().readEntries(b,d)}),e()}function c(a,b){a.relativePath=b.substring(1),h.push(a),e()}function d(a){throw a}function e(){0==--g&&f.addFiles(h,a)}var f=this,g=a.dataTransfer.items.length,h=[];k(a.dataTransfer.items,function(a){var f=a.webkitGetAsEntry();return f?void(f.isFile?c(a.getAsFile(),f.fullPath):f.createReader().readEntries(b,d)):void e()})},generateUniqueIdentifier:function(a){var b=this.opts.generateUniqueIdentifier;if("function"==typeof b)return b(a);var c=a.relativePath||a.webkitRelativePath||a.fileName||a.name;return a.size+"-"+c.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(a){var b=!1;if(this.opts.prioritizeFirstAndLastChunk&&(k(this.files,function(a){return!a.paused&&a.chunks.length&&"pending"===a.chunks[0].status()&&0===a.chunks[0].preprocessState?(a.chunks[0].send(),b=!0,!1):!a.paused&&a.chunks.length>1&&"pending"===a.chunks[a.chunks.length-1].status()&&0===a.chunks[0].preprocessState?(a.chunks[a.chunks.length-1].send(),b=!0,!1):void 0}),b))return b;if(k(this.files,function(a){return a.paused||k(a.chunks,function(a){return"pending"===a.status()&&0===a.preprocessState?(a.send(),b=!0,!1):void 0}),b?!1:void 0}),b)return!0;var c=!1;return k(this.files,function(a){return a.isComplete()?void 0:(c=!0,!1)}),c||a||i(function(){this.fire("complete")},this),!1},assignBrowse:function(a,c,d,e){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){var f;"INPUT"===a.tagName&&"file"===a.type?f=a:(f=b.createElement("input"),f.setAttribute("type","file"),j(f.style,{visibility:"hidden",position:"absolute"}),a.appendChild(f),a.addEventListener("click",function(){f.click()},!1)),this.opts.singleFile||d||f.setAttribute("multiple","multiple"),c&&f.setAttribute("webkitdirectory","webkitdirectory"),k(e,function(a,b){f.setAttribute(b,a)});var g=this;f.addEventListener("change",function(a){g.addFiles(a.target.files,a),a.target.value=""},!1)},this)},assignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){a.addEventListener("dragover",this.preventEvent,!1),a.addEventListener("dragenter",this.preventEvent,!1),a.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(a){"undefined"==typeof a.length&&(a=[a]),k(a,function(a){a.removeEventListener("dragover",this.preventEvent),a.removeEventListener("dragenter",this.preventEvent),a.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var a=!1;return k(this.files,function(b){return b.isUploading()?(a=!0,!1):void 0}),a},_shouldUploadNext:function(){var a=0,b=!0,c=this.opts.simultaneousUploads;return k(this.files,function(d){k(d.chunks,function(d){return"uploading"===d.status()&&(a++,a>=c)?(b=!1,!1):void 0})}),b&&a},upload:function(){var a=this._shouldUploadNext();if(a!==!1){this.fire("uploadStart");for(var b=!1,c=1;c<=this.opts.simultaneousUploads-a;c++)b=this.uploadNextChunk(!0)||b;b||i(function(){this.fire("complete")},this)}},resume:function(){k(this.files,function(a){a.resume()})},pause:function(){k(this.files,function(a){a.pause()})},cancel:function(){for(var a=this.files.length-1;a>=0;a--)this.files[a].cancel()},progress:function(){var a=0,b=0;return k(this.files,function(c){a+=c.progress()*c.size,b+=c.size}),b>0?a/b:0},addFile:function(a,b){this.addFiles([a],b)},addFiles:function(a,b){var c=[];k(a,function(a){if((a.size%4096!==0||"."!==a.name&&"."!==a.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(a))){var d=new e(this,a);this.fire("fileAdded",d,b)&&c.push(d)}},this),this.fire("filesAdded",c,b)&&k(c,function(a){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(a)},this),this.fire("filesSubmitted",c,b)},removeFile:function(a){for(var b=this.files.length-1;b>=0;b--)this.files[b]===a&&(this.files.splice(b,1),a.abort())},getFromUniqueIdentifier:function(a){var b=!1;return k(this.files,function(c){c.uniqueIdentifier===a&&(b=c)}),b},getSize:function(){var a=0;return k(this.files,function(b){a+=b.size}),a},sizeUploaded:function(){var a=0;return k(this.files,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){var a=0,b=0;return k(this.files,function(c){c.paused||c.error||(a+=c.size-c.sizeUploaded(),b+=c.averageSpeed)}),a&&!b?Number.POSITIVE_INFINITY:a||b?Math.floor(a/b):0}},e.prototype={measureSpeed:function(){var a=Date.now()-this._lastProgressCallback;if(a){var b=this.flowObj.opts.speedSmoothingFactor,c=this.sizeUploaded();this.currentSpeed=Math.max((c-this._prevUploadedSize)/a*1e3,0),this.averageSpeed=b*this.currentSpeed+(1-b)*this.averageSpeed,this._prevUploadedSize=c}},chunkEvent:function(a,b){switch(a){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,b),this.flowObj.fire("error",b,this);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,b));break;case"retry":this.flowObj.fire("fileRetry",this)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(a){this.currentSpeed=0,this.averageSpeed=0;var b=this.chunks;a&&(this.chunks=[]),k(b,function(a){"uploading"===a.status()&&(a.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){this.abort(!0),this.error=!1,this._prevProgress=0;for(var a=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,b=Math.max(a(this.file.size/this.flowObj.opts.chunkSize),1),c=0;b>c;c++)this.chunks.push(new f(this.flowObj,this,c))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var a=0;k(this.chunks,function(b){a+=b.progress()*(b.endByte-b.startByte)});var b=a/this.size;return this._prevProgress=Math.max(this._prevProgress,b>.999?1:b),this._prevProgress},isUploading:function(){var a=!1;return k(this.chunks,function(b){return"uploading"===b.status()?(a=!0,!1):void 0}),a},isComplete:function(){var a=!1;return k(this.chunks,function(b){var c=b.status();return"pending"===c||"uploading"===c||1===b.preprocessState?(a=!0,!1):void 0}),!a},sizeUploaded:function(){var a=0;return k(this.chunks,function(b){a+=b.sizeUploaded()}),a},timeRemaining:function(){if(this.paused||this.error)return 0;var a=this.size-this.sizeUploaded();return a&&!this.averageSpeed?Number.POSITIVE_INFINITY:a||this.averageSpeed?Math.floor(a/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},f.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(a,b){return a+=a.indexOf("?")<0?"?":"&",a+b.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var a=this.prepareXhrRequest("GET",!0);this.xhr.send(a)},preprocessFinished:function(){this.preprocessState=2,this.send()},send:function(){var a=this.flowObj.opts.preprocess;if("function"==typeof a)switch(this.preprocessState){case 0:return this.preprocessState=1,void a(this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;var b=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",c=this.fileObj.file[b](this.startByte,this.endByte,this.fileObj.file.type);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var d=this.prepareXhrRequest("POST",!1,this.flowObj.opts.method,c);this.xhr.send(d)},abort:function(){var a=this.xhr;this.xhr=null,a&&a.abort()},status:function(){return this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":200==this.xhr.status?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var a=this.status();return"success"===a||"error"===a?1:"pending"===a?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var a=this.endByte-this.startByte;return"success"!==this.status()&&(a=this.progress()*a),a},prepareXhrRequest:function(a,b,c,d){var e=h(this.flowObj.opts.query,this.fileObj,this,b);e=j(this.getParams(),e);var f=h(this.flowObj.opts.target,this.fileObj,this,b),g=null;if("GET"===a||"octet"===c){var i=[];k(e,function(a,b){i.push([encodeURIComponent(b),encodeURIComponent(a)].join("="))}),f=this.getTarget(f,i),g=d||null}else g=new FormData,k(e,function(a,b){g.append(b,a)}),g.append(this.flowObj.opts.fileParameterName,d,this.fileObj.file.name);return this.xhr.open(a,f,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,k(h(this.flowObj.opts.headers,this.fileObj,this,b),function(a,b){this.xhr.setRequestHeader(b,a)},this),g}},d.evalOpts=h,d.extend=j,d.each=k,d.FlowFile=e,d.FlowChunk=f,d.version="2.6.2","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=d:(a.Flow=d,"function"==typeof define&&define.amd&&define("flow",[],function(){return d}))}(window,document),angular.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(a){return new Flow(a)},this.events=[],this.on=function(a,b){this.events.push([a,b])},this.$get=function(){var a=this.factory,b=this.defaults,c=this.events;return{create:function(d){var e=a(angular.extend({},b,d));return angular.forEach(c,function(a){e.on(a[0],a[1])}),e}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(a,b,c,d){var e=angular.extend({},a.$eval(b.flowInit)),f=a.$eval(b.flowObject)||d.create(e);f.on("catchAll",function(b){var c=Array.prototype.slice.call(arguments);c.shift();var d=a.$broadcast.apply(a,["flow::"+b,f].concat(c));return{progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[b]&&a.$apply(),d.defaultPrevented?!1:void 0}),a.$flow=f,b.hasOwnProperty("flowName")&&(c(b.flowName).assign(a,f),a.$on("$destroy",function(){c(b.flowName).assign(a)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.hasOwnProperty("flowDirectory"),e=c.hasOwnProperty("flowSingleFile"),f=c.hasOwnProperty("flowAttrs")&&a.$eval(c.flowAttrs);a.$flow.assignBrowse(b,d,e,f)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(a,b){b.bind("drop dragover",function(a){a.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(a){return{scope:!1,link:function(b,c,d){function e(a){var b=!1,c=a.dataTransfer||a.originalEvent.dataTransfer;return angular.forEach(c&&c.types,function(a){"Files"===a&&(b=!0)}),b}var f,g=!1;c.bind("dragover",function(c){e(c)&&(g||(b.$apply(d.flowDragEnter),g=!0),a.cancel(f),c.preventDefault())}),c.bind("dragleave drop",function(){f=a(function(){b.$eval(d.flowDragLeave),f=null,g=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){function d(){a.$flow.assignDrop(b)}function e(){a.$flow.unAssignDrop(b)}c.flowDropEnabled?a.$watch(c.flowDropEnabled,function(a){a?d():e()}):d()}}}),!function(a){"use strict";function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}var c=a.module("flow.events",["flow.init"]),d={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};a.forEach(d,function(d,e){var f="flow"+b(e);"flowUploadStart"==f&&(f="flowUploadStarted"),c.directive(f,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(b,c){b.$on("flow::"+e,function(){var e=Array.prototype.slice.call(arguments),g=e.shift();if(b.$flow===e.shift()){var h={};a.forEach(d,function(a,b){h[a]=e[b]}),b.$eval(c[f],h)===!1&&g.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.flowImg;a.$watch(d,function(b){if(b){var d=new FileReader;d.readAsDataURL(b.file),d.onload=function(b){a.$apply(function(){c.$set("src",b.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(a){a.transfers=a.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]),angular.module("angular-info-box",[]).directive("infoBox",["$compile",function(a){return{restrict:"AEC",transclude:!0,link:function(b,c,d){b.freetext?b.displaytext=b.freetext:b.lookupitems?angular.isObject(b.lookupitems)&&(b.displaytext=b.lookupitems[b.lookup]):(console.log("InfoBox Error for "+b.lookup+" - lookups object is empty, supply some or use freetext attribute"),b.displaytext="");var e='&nbsp;<span  tabindex="-1" class="glyphicon glyphicon-info-sign blue" data-toggle="popover" data-content="{{displaytext}}" ng-show="displaytext" data-placement="left" data-container="body" data-original-title></span>';b.right&&(e='&nbsp;<span  tabindex="-1" class="glyphicon glyphicon-info-sign blue" data-toggle="popover" data-content="{{displaytext}}" ng-show="displaytext" data-placement="right" data-container="body" data-original-title></span>'),c.html(e).show(),a(c.contents())(b)},controller:["$scope","$timeout",function(a,b){b(function(){$('[data-toggle="popover"]').popover({trigger:"focus"})})}],scope:{lookup:"@",freetext:"@",lookupitems:"=",right:"@"}}}]),function(a,b,c){"use strict";function d(){this.development=function(a){return f=a||f,this},this.$get=["$window","$log",function(a,d){var e={VERSION:a.Raven?a.Raven.VERSION:"development",TraceKit:a.Raven?a.Raven.TraceKit:"development",captureException:function(b,c){f?d.error("Raven: Exception ",b,c):a.Raven.captureException(b,c)},captureMessage:function(b,c){f?d.error("Raven: Message ",b,c):a.Raven.captureMessage(b,c)},setUser:function(b){f?d.info("Raven: User ",b):a.Raven.setUser?a.Raven.setUser(b):a.Raven.setUserContext&&a.Raven.setUserContext(b)},setUserContext:function(b){f?d.info("Raven: User ",b):a.Raven.setUserContext?a.Raven.setUserContext(b):a.Raven.setUser&&a.Raven.setUser(b)},lastException:function(){f?d.error("Raven: Last Exception"):a.Raven.lastException()},context:function(a,d,e){var f=this;return b.isFunction(a)&&(e=d||[],d=a,a=c),f.wrap(a,d).apply(f,e)},wrap:function(a,d){function e(){for(var b=[],c=arguments.length;c--;)b[c]=f.wrap(a,arguments[c]);try{return d.apply(this,b)}catch(e){f.captureException(e,a)}}var f=this;if(b.isUndefined(d)&&!b.isFunction(a))return a;if(b.isFunction(a)&&(d=a,a=c),!b.isFunction(d))return d;if(d.__raven__)return d;for(var g in d)d.hasOwnProperty(g)&&(e[g]=d[g]);return e.__raven__=!0,e}};return e}]}function e(a,b){function c(c,d){c instanceof Error?b.captureException(c,d):b.captureMessage(c,{exception:c,cause:d}),a(c,d)}return c}var f=null;b.module("ngRaven",[]).provider("$raven",d).provider("Raven",d).config(["$provide",function(a){a.decorator("$exceptionHandler",["$delegate","$raven",e])}]),b.module("angular-raven",["ngRaven"])}(this,angular);